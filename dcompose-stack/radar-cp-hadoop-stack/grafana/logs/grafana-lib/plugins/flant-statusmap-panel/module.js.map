{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"lodash\"","webpack:///external \"d3\"","webpack:///external \"@grafana/data\"","webpack:///external \"jquery\"","webpack:///external \"app/core/utils/kbn\"","webpack:///external \"app/core/core\"","webpack:///external \"@grafana/runtime\"","webpack:///external \"app/core/core_module\"","webpack:///external \"app/plugins/sdk\"","webpack:///external \"moment\"","webpack:///external \"app/core/time_series2\"","webpack:///external \"app/core/utils/ticks\"","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///./data_processor.ts","webpack:///../node_modules/d3-scale-chromatic/src/colors.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/category10.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack:///../node_modules/d3-scale-chromatic/src/categorical/Tableau10.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-color/src/define.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-color/src/color.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-interpolate/src/basis.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-interpolate/src/constant.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-interpolate/src/color.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-interpolate/src/rgb.js","webpack:///../node_modules/d3-scale-chromatic/src/ramp.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-interpolate/src/basisClosed.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack:///../node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-color/src/math.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-color/src/cubehelix.js","webpack:///../node_modules/d3-scale-chromatic/node_modules/d3-interpolate/src/cubehelix.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js","webpack:///../node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack:///./util/d3/d3-scale-chromatic.ts","webpack:///./color_legend.ts","webpack:///./options_editor.ts","webpack:///./tooltip_editor.ts","webpack:///./panel_config_migration.ts","webpack:///./statusmap_data.ts","webpack:///./tooltip.ts","webpack:///./annotations.ts","webpack:///./util/grafana/events/events.ts","webpack:///./rendering.ts","webpack:///./color_mode_discrete.ts","webpack:///./module.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__8__","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__10__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__13__","extendStatics","b","setPrototypeOf","__proto__","Array","__assign","assign","arguments","length","apply","this","__values","iterator","next","done","TypeError","panel","grafanaVersion","getSeriesList","options","list","dataList","range","series","timeField","j","fields","field","type","number","fullname","spcpos","indexOf","slice","datapoints","push","values","valueOf","timeSeries","toTimeSeries","target","refId","alias","dataFrameIndex","fieldIndex","index","unit","config","undefined","last","from","isOutsideRange","setPanelDefaultsForNewXAxisMode","xaxis","bars","lines","points","legend","show","tooltip","shared","stack","validateXAxisSeriesValue","validOptions","getXAxisValueOptions","text","pluckDeep","obj","propertyParts","split","specifier","colors","constructor","factory","extend","parent","definition","Color","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","format","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","NaN","g","a","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","isNaN","Math","max","min","round","toString","h","Hsl","hslConvert","hsl2rgb","m1","m2","basis","t1","v0","v1","v2","v3","t2","t3","define","copy","channels","displayable","formatHsl","brighter","k","pow","darker","x","linear","gamma","y","nogamma","exponential","constant","color","start","end","rgbGamma","rgbSpline","spline","rgbBasis","floor","scheme","concat","map","ramp","radians","PI","degrees","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","sqrt","atan2","hue","cubehelixGamma","cubehelix","cosh","cos","sinh","sin","cubehelixLong","warm","cool","ts","abs","pi_1_3","pi_2_3","magma","inferno","plasma","GnYlRdScheme","GnYlRd","d3ScaleChromatic","interpolateGnYlRd","drawLegendValues","elem","colorScale","rangeFrom","rangeTo","maxValue","minValue","legendWidth","legendElem","find","childNodes","legendValueScale","domain","ticks","tickStepSize","ticksNum","current","isValueCloseTo","sortBy","uniq","buildLegendTicks","xAxis","tickValues","tickSize","colorRect","posY","getSvgElemHeight","posX","getSvgElemX","append","attr","select","remove","clearLegend","empty","getColorScale","colorScheme","colorInterpolator","colorScaleInverted","invert","user","lightTheme","svgElem","baseVal","height","val","valueTo","step","directive","restrict","template","link","scope","attrs","ctrl","render","outerWidth","colorSchemes","legendHeight","valuesRange","selectAll","data","enter","LEGEND_STEP_WIDTH","drawSimpleColorLegend","colorOptions","exponent","cardColor","style","drawSimpleOpacityLegend","events","on","bucketMatrix","noDatapoints","rangeStep","widthFactor","drawColorLegend","opacityScale","legendOpacityScale","getOpacityScale","drawOpacityLegend","discreteExtraSeries","thresholds","tooltips","tr","valuesNumber","graphWidthAttr","graphWidth","textWidth","each","thisWidth","getBBox","width","itemWidth","getDiscreteColor","thresholdValues","thresholdTooltips","tickFormat","v","drawDiscreteLegendValues","drawDiscreteColorLegend","$scope","editor","panelCtrl","unitFormats","getUnitFormats","setUnitFormat","subItem","unitFormat","onAddThreshold","defaultColor","onRemoveThreshold","splice","onRemoveThresholds","onAddThreeLights","onAddSolarized","optionsEditorCtrl","templateUrl","controller","emptyTooltipItem","urlText","urlTemplate","urlIcon","urlToLowerCase","valueDateFormat","onAddUrl","items","onRemoveUrl","onRemoveUrls","getFAIconClasses","getValueDateFormats","tooltipEditorCtrl","TooltipEditorCtrl","migratePanelConfig","has","statusmap","ConfigVersion","labelFormat","minBucketWidthToShowWeekends","showCrosshair","showWeekends","yAxis","cards","cardSpacing","cardVSpacing","cardHSpacing","freezeOnClick","usingUrl","hasRealItems","urls","url","base_url","label","showItems","item","icon_fa","forcelowercase","replace","valueVar","useExtraSeries","extraSeries","migrate_V0_V1","id","columns","multipleValues","noColorDefined","yLabel","pLabels","xid","to","relFrom","relTo","mostRecent","belong","put","isEmpty","buckets","targets","rangeMs","intervalMs","xBucketSize","yid","Bucket","hasData","defaultPageSize","pageSize","currentPage","BucketMatrix","enable","me","rowLabel","setEnable","setCurrent","num","setDefaultPageSize","setPageSize","pages","ceil","totalRows","pageStartRow","pageEndRow","hasNext","hasPrev","switchToNext","switchToPrev","dashboard","panelElem","mouseOverBucket","originalFillColor","onMouseOver","onMouseLeave","e","add","move","destroy","onMouseMove","removeFrozen","tooltipFrozen","showFrozen","pos","displayTooltip","moveRelative","panelRelY","frozen","cardEl","bucket","timestamp","tooltipClose","tooltipHtml","formatDate","statuses","statusTitle","seriesFilterIndex","convertValueToTooltips","convertValuesToTooltips","join","JSON","parse","stringify","scopedVars","retrieveTimeVar","bucketRangeExtension","dateFormat","templateSrv","truncate","showCustomContent","customContent","useMax","dataWarnings","title","badValues","getNotColoredValues","html","stopPropagation","node","tooltipWidth","clientWidth","tooltipHeight","clientHeight","left","pageX","top","pageY","window","innerWidth","pageYOffset","innerHeight","panelX","offset","panelY","panelWidth","panelHeight","tooltipLeft","tooltipTop","mouseOverAnnotationTick","tooltipBase","annoId","anno","annotations","annoTime","time","annoText","annoTags","tags","backColor","borderColor","graphHover","graphHoverClear","renderComplete","chartWidth","chartHeight","chartTop","chartBottom","yAxisWidth","xAxisHeight","cardRound","cardWidth","cardHeight","xGridSize","yGridSize","dataRangeWidingFactor","$heatmap","annotationTooltip","yOffset","selection","active","x1","x2","padding","right","bottom","margin","onRender","tickValueFormatter","onGraphHover","onGraphHoverClear","onMouseDown","onMouseClick","clearCrosshair","event","drawSharedCrosshair","renderingCompleted","setElementHeight","row","isString","usingPagination","css","getYAxisWidth","axisText","nodes","maxTextWidth","getXAxisHeight","axisLinePosition","parseFloat","addXAxis","xScale","timeRange","timeFormat","grafanaTimeFormatter","secPerTick","grafanaTimeFormat","getTimezone","tickPadding","heatmap","getYScale","getYAxisScale","addYAxis","bucketMatrixPager","yAxisSort","sort","localeCompare","ignorePunctuation","numeric","yAxisScale","yScale","tickSizeInner","wideYAxisRange","tickInterval","y_min","y_max","y_widing","decimals","scaledDecimals","valueFormats","addStatusmapCanvas","heatmap_elem","insert","addStatusmap","setOpacityScale","getCardX","getCardWidth","getCardY","getCardHeight","getCardColor","getCardOpacity","highlightCard","resetCardHighLight","_renderAnnotations","emit","highlightColor","strokeColor","current_card","cx","w","cutted_width","ys","nullPointMode","getBucketColorSingle","getBucketColor","getCardStrokeWidth","getEventOffset","elemOffset","clientX","clientY","mouseUpHandler","onMouseUp","document","one","unbind","selectionRange","timeFrom","timeTo","timeSrv","setTime","utc","clearSelection","limitSelection","offsetX","drawSelection","emitGraphHoverEvent","drawCrosshair","getEventPos","y1","offsetY","posX1","posX2","selectionX","selectionWidth","position","graphTooltip","annoData","source","isEqualValues","getNotMatchedValues","notMatched","getMatchedThreshold","threshold","getThreshold","isAllValuesNulls","updateCardsValuesHasColorInfoSingle","updateCardsValuesHasColorInfo","val1","val2","roundIntervalCeil","interval","colorModes","opacityScales","dark","light","$injector","annotationsSrv","pageSizeViewer","panelDefaults","datasource","cardMinWidth","minWidth","maxWidth","showExtraInfo","extraInfo","usingSplitLabel","delimiter","labelTemplate","highlightCards","hideBranding","interval_to_ms","intervalToMs","defaultsDeep","BucketMatrixPager","pager","graph","ColorModeDiscrete","tip","dataError","onDataError","editModeInitialized","onInitEditMode","refresh","postRefresh","onRenderComplete","onCardColorChange","majorVersion","buildInfo","version","useDataFrames","dataFramesReceived","onDataFramesReceived","dataSnapshotLoad","processor","dataReceived","onDataReceived","__","changeDefaultPaginationSize","onChangePageSize","onPrevPage","onNextPage","getChartWidth","wndWidth","$","panelWidthFactor","gridPos","updateTimeRange","ret","calculateInterval","minCardWidth","minSpacing","maxCardsCount","lowLimitMs","intervalOverride","secondsToHms","issueQueries","annotationsPromise","getAnnotations","datasourcePromises","then","issueQueriesWithInterval","origInterval","res","newBucketMatrix","convertDataToBuckets","result","loading","addEditorTab","newColor","rendering","timeRangeForUrl","mostRecentBucket","targetIndex","targetPartials","queryResult","targetKeys","keys","targetTimestampRanges","targetTimestamps","si","datapoint","idx","tsTo","tsFrom","minFrom","targetEmptyBuckets","lastTs","topBucket","bucketFrom","Number","MAX_VALUE","MIN_SAFE_INTEGER","dataIndex","dp","bucketsLen"],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","module.exports = __WEBPACK_EXTERNAL_MODULE__10__;","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { find } from 'lodash';\n// import { colors } from '@grafana/ui';\nimport {\n  DataFrame,\n  dateTime,\n  Field,\n  FieldType,\n  // getColorForTheme,\n  getFieldDisplayName,\n  getTimeField,\n  TimeRange,\n} from '@grafana/data';\nimport TimeSeries from 'grafana/app/core/time_series2';\n// import config from 'grafana/app/core/config';\n\ntype Options = {\n  dataList: DataFrame[];\n  range?: TimeRange;\n};\n\nexport class DataProcessor {\n  constructor(private panel: any, private grafanaVersion: number) {}\n\n  getSeriesList(options: Options): TimeSeries[] {\n    const list: TimeSeries[] = [];\n    const { dataList, range } = options;\n\n    if (!dataList || !dataList.length) {\n      return list;\n    }\n\n    for (let i = 0; i < dataList.length; i++) {\n      const series = dataList[i];\n      const { timeField } = getTimeField(series);\n\n      if (!timeField) {\n        continue;\n      }\n\n      for (let j = 0; j < series.fields.length; j++) {\n        const field = series.fields[j];\n\n        if (field.type !== FieldType.number) {\n          continue;\n        }\n        /**\n         * Since v8.x getFieldDisplayName() will return series name as: column_name + tag_value\n         * column_name is redundant and be omitted for concise label display\n         *\n         * e.g. \"input_qty 1395T2776201\" ==> \"1395T2776201\"\n         */\n        const fullname = getFieldDisplayName(field, series, dataList);\n        let name = fullname;\n        if (this.grafanaVersion >= 8) {\n          const spcpos = fullname.indexOf(' ');\n          name = spcpos >= 0 ? fullname.slice(spcpos) : name;\n        }\n        const datapoints = [];\n\n        for (let r = 0; r < series.length; r++) {\n          datapoints.push([field.values.get(r), dateTime(timeField.values.get(r)).valueOf()]);\n        }\n        const timeSeries = {\n          ...this.toTimeSeries(field, name, i, j, datapoints, list.length, range),\n          target: name,\n          refId: series.refId,\n        };\n        list.push(timeSeries as any);\n      }\n    }\n\n    // Merge all the rows if we want to show a histogram\n    /* if (this.panel.xaxis.mode === 'histogram' && !this.panel.stack && list.length > 1) {\n      const first = list[0];\n      first.alias = first.aliasEscaped = 'Count';\n\n      for (let i = 1; i < list.length; i++) {\n        first.datapoints = first.datapoints.concat(list[i].datapoints);\n      }\n\n      return [first];\n    } */\n\n    return list;\n  }\n\n  private toTimeSeries(\n    field: Field,\n    alias: string,\n    dataFrameIndex: number,\n    fieldIndex: number,\n    datapoints: any[][],\n    index: number,\n    range?: TimeRange\n  ) {\n    // const colorIndex = index % colors.length;\n    // const color = this.panel.aliasColors[alias] || colors[colorIndex];\n\n    const series = new TimeSeries({\n      datapoints: datapoints || [],\n      alias: alias,\n      // color: getColorForTheme(color, config.theme),\n      unit: field.config ? field.config.unit : undefined,\n      dataFrameIndex,\n      fieldIndex,\n    });\n\n    if (datapoints && datapoints.length > 0 && range) {\n      const last = datapoints[datapoints.length - 1][1];\n      const from = range.from;\n\n      if (last - from.valueOf() < -10000) {\n        // If the data is in reverse order\n        const first = datapoints[0][1];\n        if (first - from.valueOf() < -10000) {\n          series.isOutsideRange = true;\n        }\n      }\n    }\n    return series;\n  }\n\n  setPanelDefaultsForNewXAxisMode() {\n    switch (this.panel.xaxis.mode) {\n      case 'time': {\n        this.panel.bars = false;\n        this.panel.lines = true;\n        this.panel.points = false;\n        this.panel.legend.show = true;\n        this.panel.tooltip.shared = true;\n        this.panel.xaxis.values = [];\n        break;\n      }\n      case 'series': {\n        this.panel.bars = true;\n        this.panel.lines = false;\n        this.panel.points = false;\n        this.panel.stack = false;\n        this.panel.legend.show = false;\n        this.panel.tooltip.shared = false;\n        this.panel.xaxis.values = ['total'];\n        break;\n      }\n      case 'histogram': {\n        this.panel.bars = true;\n        this.panel.lines = false;\n        this.panel.points = false;\n        this.panel.stack = false;\n        this.panel.legend.show = false;\n        this.panel.tooltip.shared = false;\n        break;\n      }\n    }\n  }\n\n  validateXAxisSeriesValue() {\n    switch (this.panel.xaxis.mode) {\n      case 'series': {\n        if (this.panel.xaxis.values.length === 0) {\n          this.panel.xaxis.values = ['total'];\n          return;\n        }\n\n        const validOptions = this.getXAxisValueOptions({});\n        const found: any = find(validOptions, { value: this.panel.xaxis.values[0] });\n        if (!found) {\n          this.panel.xaxis.values = ['total'];\n        }\n        return;\n      }\n    }\n  }\n\n  getXAxisValueOptions(options: any) {\n    switch (this.panel.xaxis.mode) {\n      case 'series': {\n        return [\n          { text: 'Avg', value: 'avg' },\n          { text: 'Min', value: 'min' },\n          { text: 'Max', value: 'max' },\n          { text: 'Total', value: 'total' },\n          { text: 'Count', value: 'count' },\n        ];\n      }\n    }\n\n    return [];\n  }\n\n  pluckDeep(obj: any, property: string) {\n    const propertyParts = property.split('.');\n    let value = obj;\n    for (let i = 0; i < propertyParts.length; ++i) {\n      if (value[propertyParts[i]]) {\n        value = value[propertyParts[i]];\n      } else {\n        return undefined;\n      }\n    }\n    return value;\n  }\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\");\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n}\n","export const radians = Math.PI / 180;\nexport const degrees = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {degrees, radians} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * degrees - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * radians,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n","export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import * as d3 from 'd3';\nimport * as d3ScaleChromaticOrig from 'd3-scale-chromatic';\n\n// Add GnYlRd color schema to d3-scale-chromatic\n\nlet GnYlRdScheme = new Array(3)\n  .concat(\n    '91cf60ffffbffc8d59',\n    '1a9641a6d96afdae61d7191c',\n    '1a9641a6d96affffbffdae61d7191c',\n    '1a985091cf60d9ef8bfee08bfc8d59d73027',\n    '1a985091cf60d9ef8bffffbffee08bfc8d59d73027',\n    '1a985066bd63a6d96ad9ef8bfee08bfdae61f46d43d73027',\n    '1a985066bd63a6d96ad9ef8bffffbffee08bfdae61f46d43d73027',\n    '0068371a985066bd63a6d96ad9ef8bfee08bfdae61f46d43d73027a50026',\n    '0068371a985066bd63a6d96ad9ef8bffffbffee08bfdae61f46d43d73027a50026'\n  )\n  .map(function (specifier) {\n    var n = (specifier.length / 6) | 0,\n      colors = new Array(n),\n      i = 0;\n    while (i < n) {\n      colors[i] = '#' + specifier.slice(i * 6, ++i * 6);\n    }\n    return colors;\n  });\n\nlet GnYlRd = d3.interpolateRgbBasis(GnYlRdScheme[GnYlRdScheme.length - 1]);\n\nlet d3ScaleChromatic = {\n  ...d3ScaleChromaticOrig,\n  interpolateGnYlRd: GnYlRd,\n};\n\nexport { d3ScaleChromatic };\n","import _ from 'lodash';\nimport $ from 'jquery';\nimport * as d3 from 'd3';\nimport { d3ScaleChromatic } from './util/d3/d3-scale-chromatic';\nimport { contextSrv } from 'grafana/app/core/core';\nimport { tickStep } from 'grafana/app/core/utils/ticks';\nimport coreModule from 'grafana/app/core/core_module';\n\nimport { StatusHeatmapCtrl } from './module';\nimport { PanelEvents } from '@grafana/data';\n\nconst LEGEND_STEP_WIDTH = 2;\n\n/**\n * Bigger color legend for opacity and spectrum modes editor.\n */\ncoreModule.directive('optionsColorLegend', function () {\n  return {\n    restrict: 'E',\n    template: '<div class=\"status-heatmap-color-legend\"><svg width=\"16.8rem\" height=\"24px\"></svg></div>',\n    link: function (scope: any, elem, attrs) {\n      let ctrl = scope.ctrl;\n      let panel = scope.ctrl.panel;\n\n      render();\n\n      ctrl.events.on(PanelEvents.render, function () {\n        render();\n      });\n\n      function render() {\n        let legendElem = $(elem).find('svg');\n        let legendWidth = Math.floor(legendElem.outerWidth());\n\n        if (panel.color.mode === 'spectrum') {\n          let colorScheme = _.find(ctrl.colorSchemes, { value: panel.color.colorScheme });\n          let colorScale = getColorScale(colorScheme, legendWidth);\n          drawSimpleColorLegend(elem, colorScale);\n        } else if (panel.color.mode === 'opacity') {\n          let colorOptions = panel.color;\n          drawSimpleOpacityLegend(elem, colorOptions);\n        }\n      }\n    },\n  };\n});\n\n/**\n * Graph legend with values.\n */\ncoreModule.directive('statusHeatmapLegend', function () {\n  return {\n    restrict: 'E',\n    template: '<div class=\"status-heatmap-color-legend\"><svg width=\"100px\" height=\"6px\"></svg></div>',\n    link: function (scope, elem, attrs) {\n      let ctrl: StatusHeatmapCtrl = scope.ctrl;\n      let panel = scope.ctrl.panel;\n\n      render();\n      ctrl.events.on(PanelEvents.render, function () {\n        render();\n      });\n\n      function render() {\n        clearLegend(elem);\n        if (!ctrl.panel.legend.show) {\n          return;\n        }\n        if (ctrl.bucketMatrix) {\n          let rangeFrom = ctrl.bucketMatrix.minValue;\n          let rangeTo = ctrl.bucketMatrix.maxValue;\n          let maxValue = panel.color.max != null ? panel.color.max : rangeTo;\n          let minValue = panel.color.min != null ? panel.color.min : rangeFrom;\n\n          if (ctrl.bucketMatrix.noDatapoints) {\n            if (panel.color.max != null) {\n              rangeTo = maxValue = 100;\n            } else {\n              rangeTo = 100;\n            }\n            if (panel.color.min != null) {\n              rangeFrom = minValue = 0;\n            } else {\n              rangeFrom = 0;\n            }\n          }\n\n          if (panel.color.mode === 'spectrum') {\n            let colorScheme = _.find(ctrl.colorSchemes, { value: panel.color.colorScheme });\n            drawColorLegend(elem, colorScheme, rangeFrom, rangeTo, maxValue, minValue);\n          } else if (panel.color.mode === 'opacity') {\n            let colorOptions = panel.color;\n            drawOpacityLegend(elem, colorOptions, rangeFrom, rangeTo, maxValue, minValue);\n          } else if (panel.color.mode === 'discrete') {\n            let colorOptions = panel.color;\n            drawDiscreteColorLegend(elem, colorOptions, ctrl.discreteExtraSeries);\n          }\n        }\n      }\n    },\n  };\n});\n\nfunction drawColorLegend(elem, colorScheme, rangeFrom: number, rangeTo: number, maxValue: number, minValue: number) {\n  let legendElem = $(elem).find('svg');\n  let legend: any = d3.select(legendElem.get(0));\n  clearLegend(elem);\n\n  let legendWidth = Math.floor(legendElem.outerWidth()) - 30; // narrow legendWidth by 30px to get space for first and last tick values\n  let legendHeight = legendElem.attr('height');\n\n  let rangeStep = (rangeTo - rangeFrom) / (legendWidth / LEGEND_STEP_WIDTH);\n  // width in pixels in legend space of unit segment in range space\n  // rangeStep * witdhFactor == width in pixels of one rangeStep\n  let widthFactor = legendWidth / (rangeTo - rangeFrom);\n  let valuesRange = d3.range(rangeFrom, rangeTo, rangeStep);\n\n  let colorScale = getColorScale(colorScheme, maxValue, minValue);\n  legend\n    .selectAll('.status-heatmap-color-legend-rect')\n    .data(valuesRange)\n    .enter()\n    .append('rect')\n    // translate from range space into pixels\n    // and shift all rectangles to the right by 10\n    .attr('x', d => (d - rangeFrom) * widthFactor + 10)\n    .attr('y', 0)\n    // rectangles are slightly overlaped to prevent gaps\n    .attr('width', LEGEND_STEP_WIDTH + 1)\n    .attr('height', legendHeight)\n    .attr('stroke-width', 0)\n    .attr('fill', d => colorScale(d));\n\n  drawLegendValues(elem, colorScale, rangeFrom, rangeTo, maxValue, minValue, legendWidth);\n}\n\nfunction drawOpacityLegend(elem, options, rangeFrom, rangeTo, maxValue, minValue) {\n  let legendElem = $(elem).find('svg');\n  let legend = d3.select(legendElem.get(0));\n  clearLegend(elem);\n\n  let legendWidth = Math.floor(legendElem.outerWidth()) - 30; // narrow legendWidth by 30px to get space for first and last tick values\n  let legendHeight = legendElem.attr('height');\n\n  let rangeStep = (rangeTo - rangeFrom) / (legendWidth / LEGEND_STEP_WIDTH);\n  // width in pixels in legend space of unit segment in range space\n  // rangeStep * witdhFactor == width in pixels of one rangeStep\n  let widthFactor = legendWidth / (rangeTo - rangeFrom);\n  let valuesRange = d3.range(rangeFrom, rangeTo, rangeStep);\n\n  let opacityScale = getOpacityScale(options, maxValue, minValue);\n  legend\n    .selectAll('.status-heatmap-opacity-legend-rect')\n    .data(valuesRange)\n    .enter()\n    .append('rect')\n    // translate from range space into pixels\n    // and shift all rectangles to the right by 10\n    .attr('x', d => d * widthFactor + 10)\n    .attr('y', 0)\n    // rectangles are slightly overlaped to prevent gaps\n    .attr('width', LEGEND_STEP_WIDTH + 1)\n    .attr('height', legendHeight)\n    .attr('stroke-width', 0)\n    .attr('fill', options.cardColor)\n    .style('opacity', d => opacityScale(d));\n\n  drawLegendValues(elem, opacityScale, rangeFrom, rangeTo, maxValue, minValue, legendWidth);\n}\n\nfunction drawDiscreteColorLegend(elem, colorOptions, discreteExtraSeries) {\n  let legendElem = $(elem).find('svg');\n  let legend = d3.select(legendElem.get(0));\n  clearLegend(elem);\n\n  let thresholds = colorOptions.thresholds;\n  let tooltips = _.map(thresholds, tr => tr.tooltip);\n  let valuesNumber = thresholds.length;\n\n  // graph width as a fallback\n  const $heatmap = $(elem).parent().parent().parent().find('.statusmap-panel');\n  const graphWidthAttr = $heatmap.find('svg').attr('width');\n  let graphWidth = parseInt(graphWidthAttr, 10);\n\n  // calculate max width of tooltip and use it as width for each item\n  let textWidth: number[] = [];\n  legend\n    .selectAll('.hidden-texts')\n    .data(tooltips)\n    .enter()\n    .append('text')\n    .attr('class', 'axis tick hidden-texts')\n    .attr('font-family', 'sans-serif')\n    .text(d => d)\n    .each(function (d, i) {\n      let thisWidth = this.getBBox().width;\n      textWidth.push(thisWidth);\n    });\n  legend.selectAll('.hidden-texts').remove();\n\n  let legendWidth = Math.floor(_.min([graphWidth - 30, (_.max(textWidth)! + 3) * valuesNumber])!);\n  legendElem.attr('width', legendWidth);\n\n  let legendHeight = legendElem.attr('height');\n\n  let itemWidth = Math.floor(legendWidth / valuesNumber);\n  let valuesRange = d3.range(valuesNumber); // from 0 to valuesNumber-1\n\n  legend\n    .selectAll('.status-heatmap-color-legend-rect')\n    .data(valuesRange)\n    .enter()\n    .append('rect')\n    .attr('x', d => d * itemWidth)\n    .attr('y', 0)\n    .attr('width', itemWidth + 1) // Overlap rectangles to prevent gaps\n    .attr('height', legendHeight)\n    .attr('stroke-width', 0)\n    .attr('fill', d => discreteExtraSeries.getDiscreteColor(d));\n\n  drawDiscreteLegendValues(elem, colorOptions, legendWidth);\n}\n\nfunction drawLegendValues(\n  elem,\n  colorScale,\n  rangeFrom: number,\n  rangeTo: number,\n  maxValue: number,\n  minValue: number,\n  legendWidth: number\n) {\n  let legendElem = $(elem).find('svg');\n  let legend = d3.select(legendElem.get(0));\n\n  if (legendWidth <= 0 || legendElem.get(0).childNodes.length === 0) {\n    return;\n  }\n\n  let legendValueScale = d3.scaleLinear().domain([rangeFrom, rangeTo]).range([0, legendWidth]);\n\n  let ticks = buildLegendTicks(rangeFrom, rangeTo, maxValue, minValue);\n  let xAxis = d3.axisBottom(legendValueScale).tickValues(ticks).tickSize(2);\n\n  let colorRect = legendElem.find(':first-child');\n  let posY = getSvgElemHeight(legendElem) + 2;\n  let posX = getSvgElemX(colorRect);\n\n  d3.select(legendElem.get(0))\n    .append('g')\n    .attr('class', 'axis')\n    .attr('transform', 'translate(' + posX + ',' + posY + ')')\n    .call(xAxis);\n\n  legend.select('.axis').select('.domain').remove();\n}\n\nfunction drawDiscreteLegendValues(elem, colorOptions, legendWidth) {\n  let thresholds = colorOptions.thresholds;\n\n  let legendElem = $(elem).find('svg');\n  let legend = d3.select(legendElem.get(0));\n\n  if (legendWidth <= 0 || legendElem.get(0).childNodes.length === 0) {\n    return;\n  }\n\n  let valuesNumber = thresholds.length;\n  let rangeStep = Math.floor(legendWidth / valuesNumber);\n  //let valuesRange = d3.range(0, legendWidth, rangeStep);\n\n  let legendValueScale = d3.scaleLinear().domain([0, valuesNumber]).range([0, legendWidth]);\n\n  let thresholdValues = [];\n  let thresholdTooltips = [];\n  for (let i = 0; i < thresholds.length; i++) {\n    thresholdValues.push(thresholds[i].value);\n    thresholdTooltips.push(thresholds[i].tooltip);\n  }\n\n  let xAxis = d3\n    .axisBottom(legendValueScale)\n    .tickValues(d3.range(0, valuesNumber, 1)) //thresholdValues)\n    .tickSize(2)\n    .tickFormat(t => {\n      let i = Math.floor(t.valueOf());\n      let v = thresholdTooltips[i];\n      if (v !== undefined) {\n        return '' + v;\n      } else {\n        v = thresholdValues[i];\n        if (v !== undefined) {\n          return '' + v;\n        } else {\n          return 'n/a';\n        }\n      }\n    });\n\n  let colorRect = legendElem.find(':first-child');\n  let posY = getSvgElemHeight(legendElem) + 2;\n  let posX = getSvgElemX(colorRect) + Math.floor(rangeStep / 2);\n\n  d3.select(legendElem.get(0))\n    .append('g')\n    .attr('class', 'axis')\n    .attr('transform', 'translate(' + posX + ',' + posY + ')')\n    .call(xAxis);\n\n  legend.select('.axis').select('.domain').remove();\n}\n\nfunction drawSimpleColorLegend(elem, colorScale) {\n  let legendElem = $(elem).find('svg');\n  let legend = d3.select(legendElem.get(0));\n  clearLegend(elem);\n\n  let legendWidth = Math.floor(legendElem.outerWidth());\n  let legendHeight = legendElem.attr('height');\n\n  if (legendWidth) {\n    let valuesRange = d3.range(0, legendWidth, LEGEND_STEP_WIDTH);\n\n    legend\n      .selectAll('.status-heatmap-color-legend-rect')\n      .data(valuesRange)\n      .enter()\n      .append('rect')\n      .attr('x', d => d)\n      .attr('y', 0)\n      .attr('width', LEGEND_STEP_WIDTH + 1) // Overlap rectangles to prevent gaps\n      .attr('height', legendHeight)\n      .attr('stroke-width', 0)\n      .attr('fill', d => colorScale(d));\n  }\n}\n\nfunction drawSimpleOpacityLegend(elem, options) {\n  let legendElem = $(elem).find('svg');\n  let legend = d3.select(legendElem.get(0));\n  clearLegend(elem);\n\n  let legendWidth = Math.floor(legendElem.outerWidth());\n  let legendHeight = legendElem.attr('height');\n\n  if (legendWidth) {\n    let legendOpacityScale;\n    if (options.colorScale === 'linear') {\n      legendOpacityScale = d3.scaleLinear().domain([0, legendWidth]).range([0, 1]);\n    } else if (options.colorScale === 'sqrt') {\n      legendOpacityScale = d3.scalePow().exponent(options.exponent).domain([0, legendWidth]).range([0, 1]);\n    }\n\n    let valuesRange = d3.range(0, legendWidth, LEGEND_STEP_WIDTH);\n\n    legend\n      .selectAll('.status-heatmap-opacity-legend-rect')\n      .data(valuesRange)\n      .enter()\n      .append('rect')\n      .attr('x', d => d)\n      .attr('y', 0)\n      .attr('width', LEGEND_STEP_WIDTH + 1)\n      .attr('height', legendHeight)\n      .attr('stroke-width', 0)\n      .attr('fill', options.cardColor)\n      .style('opacity', d => legendOpacityScale(d));\n  }\n}\n\nfunction clearLegend(elem) {\n  let legendElem = $(elem).find('svg');\n  legendElem.empty();\n}\n\nfunction getColorScale(colorScheme, maxValue, minValue = 0) {\n  let colorInterpolator = d3ScaleChromatic[colorScheme.value];\n  let colorScaleInverted =\n    colorScheme.invert === 'always' || (colorScheme.invert === 'dark' && !contextSrv.user.lightTheme);\n\n  let start = colorScaleInverted ? maxValue : minValue;\n  let end = colorScaleInverted ? minValue : maxValue;\n\n  return d3.scaleSequential(colorInterpolator).domain([start, end]);\n}\n\nfunction getOpacityScale(options, maxValue, minValue = 0) {\n  let legendOpacityScale;\n  if (options.colorScale === 'linear') {\n    legendOpacityScale = d3.scaleLinear().domain([minValue, maxValue]).range([0, 1]);\n  } else if (options.colorScale === 'sqrt') {\n    legendOpacityScale = d3.scalePow().exponent(options.exponent).domain([minValue, maxValue]).range([0, 1]);\n  }\n  return legendOpacityScale;\n}\n\nfunction getSvgElemX(elem) {\n  let svgElem = elem.get(0);\n  if (svgElem && svgElem.x && svgElem.x.baseVal) {\n    return svgElem.x.baseVal.value;\n  } else {\n    return 0;\n  }\n}\n\nfunction getSvgElemHeight(elem) {\n  let svgElem = elem.get(0);\n  if (svgElem && svgElem.height && svgElem.height.baseVal) {\n    return svgElem.height.baseVal.value;\n  } else {\n    return 0;\n  }\n}\n\nfunction buildLegendTicks(rangeFrom, rangeTo, maxValue, minValue) {\n  let range = rangeTo - rangeFrom;\n  let tickStepSize = tickStep(rangeFrom, rangeTo, 3);\n  let ticksNum = Math.round(range / tickStepSize);\n  let ticks: any = [];\n\n  for (let i = 0; i < ticksNum; i++) {\n    let current = tickStepSize * i + rangeFrom;\n    // Add user-defined min and max if it had been set\n    if (isValueCloseTo(minValue, current, tickStepSize)) {\n      ticks.push(minValue);\n      continue;\n    } else if (minValue < current) {\n      ticks.push(minValue);\n    }\n    if (isValueCloseTo(maxValue, current, tickStepSize)) {\n      ticks.push(maxValue);\n      continue;\n    } else if (maxValue < current) {\n      ticks.push(maxValue);\n    }\n    ticks.push(current);\n  }\n  if (!isValueCloseTo(maxValue, rangeTo, tickStepSize)) {\n    ticks.push(maxValue);\n  }\n  ticks.push(rangeTo);\n  ticks = _.sortBy(_.uniq(ticks));\n  return ticks;\n}\n\nfunction isValueCloseTo(val, valueTo, step) {\n  let diff = Math.abs(val - valueTo);\n  return diff < step * 0.3;\n}\n","import kbn from 'grafana/app/core/utils/kbn';\nimport { StatusHeatmapCtrl } from './module';\n\nexport class StatusHeatmapOptionsEditorCtrl {\n  panel: any;\n  panelCtrl: StatusHeatmapCtrl;\n  unitFormats: any;\n\n  /** @ngInject */\n  constructor($scope: any) {\n    $scope.editor = this;\n    this.panelCtrl = $scope.ctrl as StatusHeatmapCtrl;\n    this.panel = this.panelCtrl.panel;\n\n    this.unitFormats = kbn.getUnitFormats();\n  }\n\n  setUnitFormat(subItem) {\n    this.panel.data.unitFormat = subItem.value;\n    this.panelCtrl.render();\n  }\n\n  render() {\n    this.panelCtrl.render();\n  }\n\n  onAddThreshold() {\n    this.panel.color.thresholds.push({ color: this.panel.defaultColor });\n    this.render();\n  }\n\n  onRemoveThreshold(index: number) {\n    this.panel.color.thresholds.splice(index, 1);\n    this.render();\n  }\n\n  onRemoveThresholds() {\n    this.panel.color.thresholds = [];\n    this.render();\n  }\n\n  onAddThreeLights() {\n    this.panel.color.thresholds.push({ color: 'red', value: 2, tooltip: 'error' });\n    this.panel.color.thresholds.push({ color: 'yellow', value: 1, tooltip: 'warning' });\n    this.panel.color.thresholds.push({ color: 'green', value: 0, tooltip: 'ok' });\n    this.render();\n  }\n\n  /* https://ethanschoonover.com/solarized/ */\n  onAddSolarized() {\n    this.panel.color.thresholds.push({ color: '#b58900', value: 0, tooltip: 'yellow' });\n    this.panel.color.thresholds.push({ color: '#cb4b16', value: 1, tooltip: 'orange' });\n    this.panel.color.thresholds.push({ color: '#dc322f', value: 2, tooltip: 'red' });\n    this.panel.color.thresholds.push({ color: '#d33682', value: 3, tooltip: 'magenta' });\n    this.panel.color.thresholds.push({ color: '#6c71c4', value: 4, tooltip: 'violet' });\n    this.panel.color.thresholds.push({ color: '#268bd2', value: 5, tooltip: 'blue' });\n    this.panel.color.thresholds.push({ color: '#2aa198', value: 6, tooltip: 'cyan' });\n    this.panel.color.thresholds.push({ color: '#859900', value: 7, tooltip: 'green' });\n    this.render();\n  }\n}\n\n/** @ngInject */\nexport function optionsEditorCtrl() {\n  'use strict';\n  return {\n    restrict: 'E',\n    scope: true,\n    templateUrl: 'public/plugins/flant-statusmap-panel/partials/options_editor.html',\n    controller: StatusHeatmapOptionsEditorCtrl,\n  };\n}\n","import { StatusHeatmapCtrl } from './module';\n\nlet emptyTooltipItem = {\n  urlText: '',\n  urlTemplate: '',\n  urlIcon: 'external-link',\n  urlToLowerCase: true,\n  valueDateFormat: '',\n};\n\nexport class TooltipEditorCtrl {\n  panel: any;\n  panelCtrl: StatusHeatmapCtrl;\n\n  /** @ngInject */\n  constructor($scope: any) {\n    $scope.editor = this;\n    this.panelCtrl = $scope.ctrl as StatusHeatmapCtrl;\n    this.panel = this.panelCtrl.panel;\n  }\n\n  render() {\n    this.panelCtrl.render();\n  }\n\n  onAddUrl() {\n    this.panel.tooltip.items.push(Object.assign({}, emptyTooltipItem));\n    this.render();\n  }\n\n  onRemoveUrl(index: number) {\n    this.panel.tooltip.items.splice(index, 1);\n    this.render();\n  }\n\n  onRemoveUrls() {\n    this.panel.tooltip.items = [];\n    this.render();\n  }\n\n  getFAIconClasses() {\n    return ['external-link', 'plus', 'anchor', 'ban', 'globe', 'gear', 'cloud', 'download', 'cloud-download'];\n  }\n\n  getValueDateFormats() {\n    return ['YYYY/MM/DD/HH_mm_ss', 'YYYYMMDDHHmmss', 'YYYY-MM-DD-HH-mm-ss'];\n  }\n}\n\nexport function tooltipEditorCtrl() {\n  'use strict';\n  return {\n    restrict: 'E',\n    scope: true,\n    templateUrl: 'public/plugins/flant-statusmap-panel/partials/tooltip_editor.html',\n    controller: TooltipEditorCtrl,\n  };\n}\n","import _ from 'lodash';\n\nfunction migrate_V0_V1(panel: any) {\n  // Remove unused fields.\n  if (_.has(panel, 'xAxis.labelFormat')) {\n    delete panel.xAxis.labelFormat;\n  }\n  if (_.has(panel, 'xAxis.minBucketWidthToShowWeekends')) {\n    delete panel.xAxis.minBucketWidthToShowWeekends;\n  }\n  if (_.has(panel, 'xAxis.showCrosshair')) {\n    delete panel.xAxis.showCrosshair;\n  }\n  if (_.has(panel, 'xAxis.showWeekends')) {\n    delete panel.xAxis.showWeekends;\n  }\n  if (_.has(panel, 'yAxis.showCrosshair')) {\n    delete panel.yAxis.showCrosshair;\n  }\n  if (_.has(panel, 'data.unitFormat')) {\n    delete panel.data;\n  }\n\n  // Migrate cardSpacing value. Seems rare (update from version 0.0.2).\n  if (_.has(panel, 'cards.cardSpacing')) {\n    if (!_.has(panel, 'cards.cardVSpacing')) {\n      if (panel.cards.cardSpacing) {\n        panel.cards.cardVSpacing = panel.cards.cardSpacing;\n        panel.cards.cardHSpacing = panel.cards.cardSpacing;\n      }\n    }\n    delete panel.cards.cardSpacing;\n  }\n\n  // Migrate initial config for urls in tooltip (pull/86).\n  // 'usingUrl' was used to show tooltip with urls on click or not.\n  if (_.has(panel, 'usingUrl')) {\n    if (!_.has(panel, 'tooltip.freezeOnClick')) {\n      panel.tooltip.freezeOnClick = panel.usingUrl;\n    }\n    delete panel.usingUrl;\n  }\n\n  // 'urls' array is now tooltip.items array. Also items are changed.\n  if (_.has(panel, 'urls')) {\n    if (!_.has(panel, 'tooltip.items')) {\n      panel.tooltip.items = [];\n      let hasRealItems = true;\n      if (panel.urls.length === 0) {\n        hasRealItems = false;\n      }\n      if (panel.urls.length === 1) {\n        let url = panel.urls[0];\n        if (url.base_url === '' && url.label === '') {\n          hasRealItems = false;\n        }\n      }\n      if (hasRealItems) {\n        panel.tooltip.showItems = true;\n        for (let url of panel.urls) {\n          let item = {\n            urlTemplate: _.toString(url.base_url),\n            urlText: _.toString(url.label),\n            urlIcon: _.toString(url.icon_fa),\n            urlToLowerCase: url.forcelowercase,\n            valueDateFormat: '',\n          };\n          // replace $vars with new ${__vars} if url template is not empty\n          if (item.urlTemplate !== '') {\n            // $time was a graph time with prepended &\n            item.urlTemplate = _.replace(url.base_url, /\\$time/g, '&${__url_time_range}');\n            // $series_label was a y axis label\n            item.urlTemplate = _.replace(item.urlTemplate, /\\$series_label/, '${__y_label}');\n            // $series_extra was a value from bucket. This value has format options and index.\n            let valueVar = '__value';\n            if (url.useExtraSeries === true) {\n              // index?\n              if (url.extraSeries.index > -1) {\n                valueVar += '_' + url.extraSeries.index;\n              }\n\n              let format = _.toString(url.extraSeries.format);\n              if (format === 'YYYY/MM/DD/HH_mm_ss') {\n                valueVar += '_date';\n                item.valueDateFormat = format;\n              }\n            }\n\n            item.urlTemplate = _.replace(item.urlTemplate, /\\$series_extra/, `\\${${valueVar}}`);\n          }\n          panel.tooltip.items.push(item);\n        }\n      }\n    }\n    delete panel.urls;\n  }\n\n  // create statusmap metadata\n  panel.statusmap = {\n    ConfigVersion: 'v1',\n  };\n}\n\nexport function migratePanelConfig(panel: any) {\n  if (_.has(panel, 'statusmap')) {\n    if (panel.statusmap.ConfigVersion === 'v1') {\n      return;\n    }\n  } else {\n    migrate_V0_V1(panel);\n  }\n  return;\n}\n","// A holder of a group of values\nclass Bucket {\n  // uniq id\n  id = 0;\n  // Array of values in this bucket\n  values: any[] = [];\n  columns: any[] = []; // From pr/86\n  // a bucket has multiple values\n  multipleValues = false;\n  // a bucket has values that has no mapped color\n  noColorDefined = false;\n  // y label\n  y = '';\n  yLabel = '';\n  pLabels: string[] = [];\n\n  // This value can be used to calculate a x coordinate on a graph\n  x = 0;\n  xid = 0;\n  // a time range of this bucket\n  from = 0;\n  to = 0;\n  // to and from relative to real \"from\"\n  relFrom = 0;\n  relTo = 0;\n\n  mostRecent = false;\n\n  // Saved minimum and maximum of values in this bucket\n  minValue = 0;\n  maxValue = 0;\n  // A value if multiple values is not allowed\n  value = 0;\n\n  constructor() {}\n\n  belong(ts: number): boolean {\n    return ts >= this.from && ts <= this.to;\n  }\n\n  put(value: any) {\n    this.values.push(value);\n  }\n\n  done() {\n    // calculate min, max, value\n  }\n\n  isEmpty(): boolean {\n    return this.values.length === 0;\n  }\n}\n\nclass BucketMatrix {\n  // buckets for each y label\n  buckets: { [yLabel: string]: Bucket[] } = {};\n  maxValue = 0;\n  minValue = 0;\n  multipleValues = false;\n  noColorDefined = false;\n  // a flag that indicate that buckets has stub values\n  noDatapoints = false;\n\n  // An array of row labels\n  targets: string[] = [];\n  pLabels: { [target: string]: string[] } = {};\n  rangeMs = 0;\n  intervalMs = 0;\n\n  xBucketSize = 0; // TODO remove: a transition from CardsData\n\n  constructor() {}\n\n  get(yid: string, xid: number): Bucket {\n    if (yid in this.buckets) {\n      if (xid in this.buckets[yid]) {\n        return this.buckets[yid][xid];\n      }\n    }\n    return new Bucket();\n  }\n\n  hasData(): boolean {\n    let hasData = false;\n    if (this.targets.length > 0) {\n      this.targets.map((target: string) => {\n        if (this.buckets[target].length > 0) {\n          hasData = true;\n        }\n      });\n    }\n    return hasData;\n  }\n}\n\nexport var pagerChanged: any = { name: 'statusmap-pager-changed' };\n\nclass BucketMatrixPager {\n  bucketMatrix: BucketMatrix;\n  enable: boolean;\n  defaultPageSize = -1;\n  pageSize = -1;\n  currentPage = 0;\n\n  constructor() {\n    let m = new BucketMatrix();\n\n    this.bucketMatrix = m;\n  }\n\n  // An array of row labels for current page.\n  targets(): string[] {\n    if (!this.enable) {\n      return this.bucketMatrix.targets;\n    }\n\n    return this.bucketMatrix.targets.slice(this.pageSize * this.currentPage, this.pageSize * (this.currentPage + 1));\n  }\n\n  buckets(): { [yLabel: string]: Bucket[] } {\n    if (!this.enable) {\n      return this.bucketMatrix.buckets;\n    }\n\n    let buckets: { [yLabel: string]: Bucket[] } = {};\n    let me = this;\n\n    this.targets().map(function (rowLabel) {\n      buckets[rowLabel] = me.bucketMatrix.buckets[rowLabel];\n    });\n\n    return buckets;\n  }\n\n  setEnable(enable: boolean) {\n    this.enable = enable;\n  }\n\n  setCurrent(num: number): void {\n    this.currentPage = num;\n  }\n\n  setDefaultPageSize(num: number): void {\n    this.defaultPageSize = num;\n  }\n\n  setPageSize(num: number): void {\n    this.pageSize = num;\n  }\n\n  pages(): number {\n    return Math.ceil(this.totalRows() / this.pageSize);\n  }\n\n  totalRows(): number {\n    return this.bucketMatrix.targets.length;\n  }\n\n  pageStartRow(): number {\n    if (!this.enable) {\n      return 1;\n    }\n    return this.pageSize * this.currentPage + 1;\n  }\n\n  pageEndRow(): number {\n    if (!this.enable) {\n      return this.totalRows();\n    }\n\n    let last = this.pageSize * (this.currentPage + 1);\n    if (last > this.totalRows()) {\n      return this.totalRows();\n    }\n\n    return last;\n  }\n\n  hasNext(): boolean {\n    if (!this.enable) {\n      return false;\n    }\n\n    if ((this.currentPage + 1) * this.pageSize >= this.totalRows()) {\n      return false;\n    }\n\n    return true;\n    // currentPage >= ctrl.bucketMatrix.targets.length/ctrl.pageSizeViewer - 1 || ctrl.numberOfPages == 0\n  }\n\n  hasPrev(): boolean {\n    if (!this.enable) {\n      return false;\n    }\n\n    return this.currentPage > 0;\n  }\n\n  switchToNext() {\n    if (this.hasNext()) {\n      this.currentPage = this.currentPage + 1;\n    }\n  }\n\n  switchToPrev() {\n    if (this.hasPrev()) {\n      this.currentPage = this.currentPage - 1;\n    }\n  }\n}\n\nexport { Bucket, BucketMatrix, BucketMatrixPager };\n","import * as d3 from 'd3';\nimport $ from 'jquery';\nimport _ from 'lodash';\n\nimport { StatusHeatmapCtrl } from './module';\n\nlet TOOLTIP_PADDING_X = 30;\nlet TOOLTIP_PADDING_Y = 5;\n\n// TODO rename file to tooltip_ctrl.ts\n// TODO move DefaultValueDateFormat into tooltip.ts, as it used in several places (migration, partial and tooltip render)\nlet DefaultValueDateFormat = 'YYYY/MM/DD/HH_mm_ss';\n\nexport class StatusmapTooltip {\n  tooltip: any;\n  scope: any;\n  dashboard: any;\n  panelCtrl: StatusHeatmapCtrl;\n  panel: any;\n  panelElem: any;\n  mouseOverBucket: any;\n  originalFillColor: any;\n\n  tooltipWidth: number;\n  tooltipFrozen: any;\n\n  constructor(elem: any, scope: any) {\n    this.scope = scope;\n    this.dashboard = scope.ctrl.dashboard;\n    this.panelCtrl = scope.ctrl;\n    this.panel = scope.ctrl.panel;\n    this.panelElem = elem;\n    this.mouseOverBucket = false;\n    this.originalFillColor = null;\n\n    elem.on('mouseover', this.onMouseOver.bind(this));\n    elem.on('mouseleave', this.onMouseLeave.bind(this));\n  }\n\n  onMouseOver(e) {\n    if (!this.panel.tooltip.show || !this.scope.ctrl.data || _.isEmpty(this.scope.ctrl.data)) {\n      return;\n    }\n\n    if (!this.tooltip) {\n      this.add();\n      this.move(e, this.tooltip);\n    }\n  }\n\n  onMouseLeave() {\n    this.destroy();\n  }\n\n  onMouseMove(e) {\n    if (!this.panel.tooltip.show) {\n      return;\n    }\n\n    this.move(e, this.tooltip);\n  }\n\n  add() {\n    this.tooltip = d3.select('body').append('div').attr('class', 'graph-tooltip statusmap-tooltip');\n  }\n\n  destroy() {\n    if (this.tooltip) {\n      this.tooltip.remove();\n    }\n\n    this.tooltip = null;\n  }\n\n  removeFrozen() {\n    if (this.tooltipFrozen) {\n      this.tooltipFrozen.remove();\n      this.tooltipFrozen = null;\n    }\n  }\n\n  showFrozen(pos: any) {\n    this.removeFrozen();\n    this.tooltipFrozen = d3\n      .select(this.panelElem[0])\n      .append('div')\n      .attr('class', 'graph-tooltip statusmap-tooltip statusmap-tooltip-frozen');\n    this.displayTooltip(pos, this.tooltipFrozen, true);\n    this.moveRelative(pos, this.tooltipFrozen);\n  }\n\n  show(pos: any) {\n    if (!this.panel.tooltip.show || !this.tooltip) {\n      return;\n    }\n\n    // TODO support for shared tooltip mode\n    if (pos.panelRelY) {\n      return;\n    }\n\n    this.displayTooltip(pos, this.tooltip, false);\n\n    this.move(pos, this.tooltip);\n  }\n\n  // Retrieve bucket and create html content inside tooltips div element.\n  displayTooltip(pos: any, tooltip: any, frozen: boolean) {\n    let cardEl = d3.select(pos.target);\n    let yid = cardEl.attr('yid');\n    let xid = cardEl.attr('xid');\n    // @ts-ignore\n    let bucket = this.panelCtrl.bucketMatrix.get(yid, xid); // TODO string-to-number conversion for xid\n    if (!bucket || bucket.isEmpty()) {\n      this.destroy();\n      return;\n    }\n\n    let timestamp = bucket.to;\n    let yLabel = bucket.yLabel;\n    let pLabels = bucket.pLabels;\n    let value = bucket.value;\n    let values = bucket.values;\n    // TODO create option for this formatting.\n    let tooltipTimeFormat = 'YYYY-MM-DD HH:mm:ss';\n    let time: Date = this.dashboard.formatDate(+timestamp, tooltipTimeFormat);\n\n    // Close button for the frozen tooltip.\n    let tooltipClose = ``;\n    if (frozen) {\n      tooltipClose = `\n<a class=\"pointer pull-right small tooltip-close\">\n      <i class=\"fa fa-remove\"></i>\n</a>\n`;\n    }\n\n    let tooltipHtml = `<div class=\"graph-tooltip-time\">${time}${tooltipClose}</div>`;\n\n    if (this.panel.color.mode === 'discrete') {\n      let statuses;\n      if (this.panel.seriesFilterIndex >= 0) {\n        statuses = this.panelCtrl.discreteExtraSeries.convertValueToTooltips(value);\n      } else {\n        statuses = this.panelCtrl.discreteExtraSeries.convertValuesToTooltips(values);\n      }\n\n      let statusTitle = 'status:';\n      if (statuses.length > 1) {\n        statusTitle = 'statuses:';\n      }\n      tooltipHtml += `\n      <div>\n        name: <b>${yLabel}</b>\n        <br>\n        <span>${statusTitle}</span>\n        <ul>\n          ${_.join(\n            _.map(\n              statuses,\n              v => `<li style=\"background-color: ${v.color}; text-align:center\" class=\"discrete-item\">${v.tooltip}</li>`\n            ),\n            ''\n          )}\n        </ul>\n      </div>`;\n    } else {\n      if (values.length === 1) {\n        tooltipHtml += `<div>\n      name: <b>${yLabel}</b> <br>\n      value: <b>${value}</b> <br>\n      </div>`;\n      } else {\n        tooltipHtml += `<div>\n      name: <b>${yLabel}</b> <br>\n      values:\n      <ul>\n        ${_.join(\n          _.map(values, v => `<li>${v}</li>`),\n          ''\n        )}\n      </ul>\n      </div>`;\n      }\n    }\n\n    tooltipHtml += `<div class=\"statusmap-histogram\"></div>`;\n\n    if (this.panel.tooltip.showItems) {\n      // Additional information: urls, etc.\n      // Clone additional items\n      let items: any = JSON.parse(JSON.stringify(this.panel.tooltip.items));\n\n      let scopedVars = {};\n\n      let valueVar;\n      for (let i = 0; i < bucket.values.length; i++) {\n        valueVar = `__value_${i}`;\n        scopedVars[valueVar] = { value: bucket.values[i] };\n      }\n      scopedVars['__value'] = { value: bucket.value };\n      scopedVars['__y_label'] = { value: yLabel };\n      scopedVars['__y_label_trim'] = { value: yLabel.trim() };\n      // Grafana 7.0 compatible\n      scopedVars['__url_time_range'] = { value: this.panelCtrl.retrieveTimeVar() };\n\n      //New vars based on partialLabels:\n      for (let i in pLabels) {\n        scopedVars[`__y_label_${i}`] = { value: pLabels[i] };\n      }\n\n      let bucketRangeExtension = Math.ceil((bucket.to - bucket.from) * 0.012);\n      scopedVars[`__bucket_from`] = { value: bucket.from - bucketRangeExtension };\n      scopedVars[`__bucket_to`] = { value: bucket.to + bucketRangeExtension };\n\n      for (let item of items) {\n        if (_.isEmpty(item.urlTemplate)) {\n          item.link = '#';\n        } else {\n          let dateFormat = item.valueDateFormat;\n          if (dateFormat === '') {\n            dateFormat = DefaultValueDateFormat;\n          }\n          let valueDateVar;\n          for (let i = 0; i < bucket.values.length; i++) {\n            valueDateVar = `__value_${i}_date`;\n            scopedVars[valueDateVar] = { value: this.dashboard.formatDate(+bucket.values[i], dateFormat) };\n          }\n          scopedVars['__value_date'] = { value: this.dashboard.formatDate(+bucket.value, dateFormat) };\n\n          item.link = this.panelCtrl.templateSrv.replace(item.urlTemplate, scopedVars);\n\n          // Force lowercase for link\n          if (item.urlToLowerCase) {\n            item.link = item.link.toLowerCase();\n          }\n        }\n\n        item.label = item.urlText;\n        if (_.isEmpty(item.label)) {\n          item.label = _.isEmpty(item.urlTemplate) ? 'Empty URL' : _.truncate(item.link);\n        }\n      }\n\n      if (this.panel.tooltip.showCustomContent) {\n        let customContent: string = this.panelCtrl.templateSrv.replace(this.panel.tooltip.customContent, scopedVars);\n        tooltipHtml += `<div>${customContent}</div>`;\n      }\n\n      tooltipHtml += _.join(\n        _.map(\n          items,\n          v => `\n          <div>\n            <a href=\"${v.link}\" target=\"_blank\">\n            <div class=\"dashlist-item\">\n            <p class=\"dashlist-link dashlist-link-dash-db\">\n              <span style=\"word-wrap: break-word;\" class=\"dash-title\">${v.label}</span><span class=\"dashlist-star\">\n              <i class=\"fa fa-${v.urlIcon}\"></i>\n            </span></p> </div></a><div>`\n        ),\n        '\\n'\n      );\n    }\n\n    // Ambiguous state: there multiple values in bucket!\n    // TODO rename useMax to expectMultipleValues\n    if (!this.panel.useMax && bucket.multipleValues) {\n      tooltipHtml += `<div><b>Error:</b> ${this.panelCtrl.dataWarnings.multipleValues.title}</div>`;\n    }\n\n    // Discrete mode errors\n    if (this.panel.color.mode === 'discrete') {\n      if (bucket.noColorDefined) {\n        let badValues = this.panelCtrl.discreteExtraSeries.getNotColoredValues(values);\n        tooltipHtml += `<div><b>Error:</b> ${this.panelCtrl.dataWarnings.noColorDefined.title}\n        <br>not colored values:\n        <ul>\n          ${_.join(\n            _.map(badValues, v => `<li>${v}</li>`),\n            ''\n          )}\n        </ul>\n        </div>`;\n      }\n    }\n\n    tooltip.html(tooltipHtml);\n\n    // Assign mouse event handlers for \"frozen\" tooltip.\n    if (frozen) {\n      // Stop propagation mouse events up to parents to allow interaction with frozen tooltips elements.\n      tooltip\n        .on('click', function () {\n          // @ts-ignore\n          d3.event.stopPropagation();\n        })\n        .on('mousedown', function () {\n          // @ts-ignore\n          d3.event.stopPropagation();\n        })\n        .on('mouseup', function () {\n          // @ts-ignore\n          d3.event.stopPropagation();\n        });\n\n      // Activate close button\n      tooltip.select('a.tooltip-close').on('click', this.removeFrozen.bind(this));\n    }\n  }\n\n  // Move tooltip as absolute positioned element.\n  move(pos, tooltip) {\n    if (!tooltip) {\n      return;\n    }\n\n    let elem = $(tooltip.node())[0];\n    let tooltipWidth = elem.clientWidth;\n    this.tooltipWidth = tooltipWidth;\n    let tooltipHeight = elem.clientHeight;\n\n    let left = pos.pageX + TOOLTIP_PADDING_X;\n    let top = pos.pageY + TOOLTIP_PADDING_Y;\n\n    if (pos.pageX + tooltipWidth + 40 > window.innerWidth) {\n      left = pos.pageX - tooltipWidth - TOOLTIP_PADDING_X;\n    }\n\n    if (pos.pageY - window.pageYOffset + tooltipHeight + 20 > window.innerHeight) {\n      top = pos.pageY - tooltipHeight - TOOLTIP_PADDING_Y;\n    }\n\n    return tooltip.style('left', left + 'px').style('top', top + 'px');\n  }\n\n  // Move tooltip relative to svg element of panel.\n  moveRelative(pos, tooltip) {\n    if (!tooltip) {\n      return;\n    }\n\n    let panelX = pos.pageX - this.panelElem.offset().left;\n    let panelY = pos.pageY - this.panelElem.offset().top;\n    let panelWidth = this.panelElem.width();\n    let panelHeight = this.panelElem.height();\n\n    // 'position: relative' sets tooltips width to 100% of panel element.\n    // Restore width from floating tooltip and add more space for 'Close' button.\n    let tooltipWidth = this.tooltipWidth + 25;\n\n    // Left property is clamped so tooltip stays inside panel bound box.\n    let tooltipLeft = panelX + TOOLTIP_PADDING_X;\n    if (tooltipLeft + tooltipWidth > panelWidth) {\n      tooltipLeft = panelWidth - tooltipWidth;\n    }\n    if (tooltipLeft < 0) {\n      tooltipLeft = 0;\n    }\n\n    // Frozen tooltips root element is appended next to panels svg element,\n    // so top property is adjusted to move tooltips root element\n    // up to the mouse pointer position.\n    let tooltipTop = -(panelHeight - panelY + TOOLTIP_PADDING_Y);\n\n    return tooltip\n      .style('left', tooltipLeft + 'px')\n      .style('top', tooltipTop + 'px')\n      .style('width', tooltipWidth + 'px');\n  }\n}\n","import * as d3 from 'd3';\nimport $ from 'jquery';\nimport _ from 'lodash';\n\nlet TOOLTIP_PADDING_X = 30;\nlet TOOLTIP_PADDING_Y = 10;\n\nexport class AnnotationTooltip {\n  scope: any;\n  dashboard: any;\n  panelCtrl: any;\n  panel: any;\n  mouseOverAnnotationTick: boolean;\n\n  tooltipBase: any;\n  tooltip: any;\n\n  constructor(elem, scope) {\n    this.scope = scope;\n    this.dashboard = scope.ctrl.dashboard;\n    this.panelCtrl = scope.ctrl;\n    this.panel = scope.ctrl.panel;\n    this.mouseOverAnnotationTick = false;\n\n    elem.on('mouseover', this.onMouseOver.bind(this));\n    elem.on('mouseleave', this.onMouseLeave.bind(this));\n  }\n\n  onMouseOver(e) {\n    if (!this.panel.tooltip.show || !this.scope.ctrl.data || _.isEmpty(this.scope.ctrl.data)) {\n      return;\n    }\n\n    if (!this.tooltip) {\n      this.add();\n      this.move(e);\n    }\n  }\n\n  onMouseLeave() {\n    this.destroy();\n  }\n\n  onMouseMove(e) {\n    if (!this.panel.tooltip.show) {\n      return;\n    }\n\n    this.move(e);\n  }\n\n  add() {\n    this.tooltipBase = d3\n      .select('body')\n      .append('div')\n      .attr(\n        'class',\n        'statusmap-annotation-tooltip drop drop-popover drop-popover--annotation drop-element drop-enabled drop-target-attached-center drop-open drop-open-transitionend drop-after-open'\n      )\n      .style('position', 'absolute');\n    this.tooltip = this.tooltipBase\n      .append('div')\n      .attr('class', 'drop-content')\n      .append('div')\n      .append('annotation-tooltip')\n      .append('div')\n      .attr('class', 'graph-annotation');\n  }\n\n  destroy() {\n    if (this.tooltip) {\n      this.tooltip.remove();\n    }\n\n    this.tooltip = null;\n\n    if (this.tooltipBase) {\n      this.tooltipBase.remove();\n    }\n\n    this.tooltipBase = null;\n  }\n\n  show(pos) {\n    if (!this.panel.tooltip.show || !this.tooltip) {\n      return;\n    }\n    // shared tooltip mode\n    //if (pos.panelRelY) {\n    //  return;\n    //}\n\n    let annoId = d3.select(pos.target).attr('annoId');\n    if (!annoId) {\n      this.destroy();\n      return;\n    }\n\n    let anno = this.panelCtrl.annotations[annoId];\n    if (!anno) {\n      this.destroy();\n      return;\n    }\n\n    let annoTitle = '';\n\n    let tooltipTimeFormat = 'YYYY-MM-DD HH:mm:ss';\n    let annoTime = this.dashboard.formatDate(anno.time, tooltipTimeFormat);\n    let annoText = anno.text;\n    let annoTags: any = [];\n    if (anno.tags) {\n      annoTags = _.map(anno.tags, t => ({ text: t, backColor: 'rgb(63, 43, 91)', borderColor: 'rgb(101, 81, 129)' }));\n    }\n\n    let tooltipHtml = `<div class=\"graph-annotation__header\">\n      <span class=\"graph-annotation__title\">${annoTitle}</span>\n    <span class=\"graph-annotation__time\">${annoTime}</span></div>\n    <div class=\"graph-annotation__body\">\n      <div>${annoText}</div>\n      ${_.join(\n        _.map(\n          annoTags,\n          t =>\n            `<span class=\"label label-tag small\" style=\"background-color: ${t.backColor}; border-color: ${t.borderColor}\">${t.text}</span>`\n        ),\n        ''\n      )}\n    </div>\n      <div class=\"statusmap-histogram\"></div>`;\n\n    this.tooltip.html(tooltipHtml);\n\n    this.move(pos);\n  }\n\n  move(pos) {\n    if (!this.tooltipBase) {\n      return;\n    }\n\n    let elem = $(this.tooltipBase.node())[0];\n    let tooltipWidth = elem.clientWidth;\n    let tooltipHeight = elem.clientHeight;\n\n    let left = pos.pageX - tooltipWidth / 2;\n    let top = pos.pageY + TOOLTIP_PADDING_Y;\n\n    if (pos.pageX + tooltipWidth / 2 + 10 > window.innerWidth) {\n      left = pos.pageX - tooltipWidth - TOOLTIP_PADDING_X;\n    }\n\n    if (pos.pageY - window.pageYOffset + tooltipHeight + 20 > window.innerHeight) {\n      top = pos.pageY - tooltipHeight - TOOLTIP_PADDING_Y;\n    }\n\n    return this.tooltipBase.style('left', left + 'px').style('top', top + 'px');\n  }\n}\n","import { eventFactory } from '@grafana/data';\n\nexport interface GraphHoverPayload {\n  pos: any;\n  panel: {\n    id: number;\n  };\n}\n\nexport const graphHover = eventFactory<GraphHoverPayload>('statusmap-graph-hover');\nexport const graphHoverClear = eventFactory('statusmap-graph-hover-clear');\nexport const renderComplete = eventFactory('statusmap-render-complete');\n","import _ from 'lodash';\nimport $ from 'jquery';\n\n// TODO moment is used instead of @grafana/data to run in 6.2 and earlier.\n/* eslint-disable id-blacklist, no-restricted-imports, @typescript-eslint/ban-types */\nimport moment from 'moment';\n\nimport kbn from 'grafana/app/core/utils/kbn';\nimport { appEvents, contextSrv } from 'grafana/app/core/core';\nimport * as d3 from 'd3';\nimport { d3ScaleChromatic } from './util/d3/d3-scale-chromatic';\nimport { StatusmapTooltip } from './tooltip';\nimport { AnnotationTooltip } from './annotations';\nimport { Bucket, BucketMatrix, BucketMatrixPager } from './statusmap_data';\nimport { StatusHeatmapCtrl } from './module';\nimport { CoreEvents } from './util/grafana/events/index';\nimport { PanelEvents } from '@grafana/data';\n\nlet MIN_CARD_SIZE = 5,\n  CARD_H_SPACING = 2,\n  CARD_V_SPACING = 2,\n  CARD_ROUND = 0,\n  DATA_RANGE_WIDING_FACTOR = 1.2,\n  DEFAULT_X_TICK_SIZE_PX = 100,\n  // @ts-ignore\n  DEFAULT_Y_TICK_SIZE_PX = 50,\n  X_AXIS_TICK_PADDING = 10,\n  Y_AXIS_TICK_PADDING = 5,\n  MIN_SELECTION_WIDTH = 2;\n\nexport default function rendering(scope: any, elem: any, attrs: any, ctrl: any) {\n  return new StatusmapRenderer(scope, elem, attrs, ctrl);\n}\n\n// @ts-ignore\nclass Statusmap {\n  $svg: any;\n  svg: any;\n  bucketMatrix: BucketMatrix;\n\n  timeRange: { from: number; to: number } = { from: 0, to: 0 };\n\n  constructor() {}\n}\n\nexport class StatusmapRenderer {\n  width = 0;\n  height = 0;\n  yScale: any;\n  xScale: any;\n  chartWidth = 0;\n  chartHeight = 0;\n  chartTop = 0;\n  chartBottom = 0;\n  yAxisWidth = 0;\n  xAxisHeight = 0;\n  cardVSpacing = 0;\n  cardHSpacing = 0;\n  cardRound = 0;\n  cardWidth = 0;\n  cardHeight = 0;\n  colorScale: any;\n  opacityScale: any;\n  mouseUpHandler: any;\n  xGridSize = 0;\n  yGridSize = 0;\n\n  bucketMatrix: BucketMatrix;\n  bucketMatrixPager: BucketMatrixPager;\n  panel: any;\n  $heatmap: any;\n  tooltip: StatusmapTooltip;\n  annotationTooltip: AnnotationTooltip;\n  heatmap: any;\n  timeRange: any;\n\n  yOffset: number;\n  selection: any;\n  padding: any;\n  margin: any;\n  dataRangeWidingFactor: number = DATA_RANGE_WIDING_FACTOR;\n\n  constructor(private scope: any, private elem: any, attrs: any, private ctrl: StatusHeatmapCtrl) {\n    // $heatmap is JQuery object, but heatmap is D3\n    this.$heatmap = this.elem.find('.statusmap-panel');\n    this.tooltip = new StatusmapTooltip(this.$heatmap, this.scope);\n    this.annotationTooltip = new AnnotationTooltip(this.$heatmap, this.scope);\n\n    this.yOffset = 0;\n\n    this.selection = {\n      active: false,\n      x1: -1,\n      x2: -1,\n    };\n\n    this.padding = { left: 0, right: 0, top: 0, bottom: 0 };\n    this.margin = { left: 25, right: 15, top: 10, bottom: 20 };\n\n    this.ctrl.events.on(PanelEvents.render, this.onRender.bind(this));\n\n    // @ts-ignore\n    this.ctrl.tickValueFormatter = this.tickValueFormatter.bind(this);\n\n    /////////////////////////////\n    // Selection and crosshair //\n    /////////////////////////////\n\n    // Shared crosshair and tooltip    this.empty = true;\n\n    appEvents.on(CoreEvents.graphHover, this.onGraphHover.bind(this), this.scope);\n\n    appEvents.on(CoreEvents.graphHoverClear, this.onGraphHoverClear.bind(this), this.scope);\n\n    // Register selection listeners\n    this.$heatmap.on('mousedown', this.onMouseDown.bind(this));\n    this.$heatmap.on('mousemove', this.onMouseMove.bind(this));\n    this.$heatmap.on('mouseleave', this.onMouseLeave.bind(this));\n    this.$heatmap.on('click', this.onMouseClick.bind(this));\n  }\n\n  onGraphHoverClear() {\n    this.clearCrosshair();\n  }\n\n  onGraphHover(event: { pos: any }) {\n    this.drawSharedCrosshair(event.pos);\n  }\n\n  onRender() {\n    this.render();\n    this.ctrl.renderingCompleted();\n  }\n\n  setElementHeight(): boolean {\n    try {\n      var height = this.ctrl.height || this.panel.height || this.ctrl.row.height;\n      if (_.isString(height)) {\n        height = parseInt(height.replace('px', ''), 10);\n      }\n\n      if (this.panel.usingPagination) {\n        // TODO  get height of pagination controls.\n        // reserve height for legend and for a row of pagination controls.\n        height -= this.panel.legend.show ? 70 : 40; // bottom padding and space for legend. Change margin in .status-heatmap-color-legend !\n      } else {\n        // reserve height for legend\n        height -= this.panel.legend.show ? 32 : 4; // bottom padding and space for legend. Change margin in .status-heatmap-color-legend !\n      }\n\n      this.$heatmap.css('height', height + 'px');\n\n      return true;\n    } catch (e) {\n      // IE throws errors sometimes\n      return false;\n    }\n  }\n\n  getYAxisWidth(elem: any): number {\n    const axisText = elem.selectAll('.axis-y text').nodes();\n    const maxTextWidth = _.max(\n      _.map(axisText, text => {\n        // Use SVG getBBox method\n        return text.getBBox().width;\n      })\n    );\n\n    return Math.ceil(maxTextWidth);\n  }\n\n  getXAxisHeight(elem: any): number {\n    let axisLine = elem.select('.axis-x line');\n    if (!axisLine.empty()) {\n      let axisLinePosition = parseFloat(elem.select('.axis-x line').attr('y2'));\n      let canvasWidth = parseFloat(elem.attr('height'));\n      return canvasWidth - axisLinePosition;\n    } else {\n      // Default height\n      return 30;\n    }\n  }\n\n  addXAxis() {\n    // Scale timestamps to cards centers\n    //this.scope.xScale = this.xScale = d3.scaleTime()\n    //    .domain([this.timeRange.from, this.timeRange.to])\n    //    .range([this.xGridSize/2, this.chartWidth-this.xGridSize/2]);\n    // Buckets without the most recent\n    this.scope.xScale = this.xScale = d3\n      .scaleTime()\n      .domain([this.timeRange.from, this.timeRange.to])\n      .range([this.xGridSize / 2, this.chartWidth - this.xGridSize / 2]);\n\n    let ticks = this.chartWidth / DEFAULT_X_TICK_SIZE_PX;\n    let grafanaTimeFormatter = grafanaTimeFormat(ticks, this.timeRange.from, this.timeRange.to);\n    let timeFormat;\n    let dashboardTimeZone = this.ctrl.dashboard.getTimezone();\n    if (dashboardTimeZone === 'utc') {\n      timeFormat = d3.utcFormat(grafanaTimeFormatter);\n    } else {\n      timeFormat = d3.timeFormat(grafanaTimeFormatter);\n    }\n\n    let xAxis = d3\n      .axisBottom(this.xScale)\n      .ticks(ticks)\n      .tickFormat(timeFormat)\n      .tickPadding(X_AXIS_TICK_PADDING)\n      .tickSize(this.chartHeight);\n\n    let posY = this.chartTop; // this.margin.top !\n    let posX = this.yAxisWidth;\n\n    this.heatmap\n      .append('g')\n      .attr('class', 'axis axis-x')\n      .attr('transform', 'translate(' + posX + ',' + posY + ')')\n      .call(xAxis);\n\n    // Remove horizontal line in the top of axis labels (called domain in d3)\n    this.heatmap.select('.axis-x').select('.domain').remove();\n  }\n\n  // divide chart height by ticks for cards drawing\n  getYScale(ticks: any[]) {\n    let range: any[] = [];\n    let step = this.chartHeight / ticks.length;\n    // svg has y=0 on the top, so top card should have a minimal value in range\n    range.push(step);\n    for (let i = 1; i < ticks.length; i++) {\n      range.push(step * (i + 1));\n    }\n    return d3.scaleOrdinal().domain(ticks).range(range);\n  }\n\n  // divide chart height by ticks with offset for ticks drawing\n  getYAxisScale(ticks: any[]) {\n    let range: any[] = [];\n    let step = this.chartHeight / ticks.length;\n    // svg has y=0 on the top, so top tick should have a minimal value in range\n    range.push(this.yOffset);\n    for (let i = 1; i < ticks.length; i++) {\n      range.push(step * i + this.yOffset);\n    }\n    return d3.scaleOrdinal().domain(ticks).range(range);\n  }\n\n  addYAxis() {\n    let ticks = this.bucketMatrixPager.targets();\n\n    // TODO move sorting into bucketMatrixPager.\n    if (this.panel.yAxisSort === 'a  z') {\n      ticks.sort((a, b) => a.localeCompare(b, 'en', { ignorePunctuation: false, numeric: true }));\n    } else if (this.panel.yAxisSort === 'z  a') {\n      ticks.sort((b, a) => a.localeCompare(b, 'en', { ignorePunctuation: false, numeric: true }));\n    }\n\n    let yAxisScale = this.getYAxisScale(ticks);\n    this.scope.yScale = this.yScale = this.getYScale(ticks);\n\n    let yAxis = d3\n      // @ts-ignore\n      .axisLeft(yAxisScale)\n      .tickValues(ticks)\n      .tickSizeInner(0 - this.width)\n      .tickPadding(Y_AXIS_TICK_PADDING);\n\n    this.heatmap.append('g').attr('class', 'axis axis-y').call(yAxis);\n\n    // Calculate Y axis width first, then move axis into visible area\n    let posY = this.margin.top;\n    let posX = this.getYAxisWidth(this.heatmap) + Y_AXIS_TICK_PADDING;\n    this.heatmap.select('.axis-y').attr('transform', 'translate(' + posX + ',' + posY + ')');\n\n    // Remove vertical line in the right of axis labels (called domain in d3)\n    this.heatmap.select('.axis-y').select('.domain').remove();\n    this.heatmap.select('.axis-y').selectAll('.tick line').remove();\n  }\n\n  // Wide Y values range and adjust to bucket size\n  wideYAxisRange(min: number, max: number, tickInterval: number) {\n    let y_widing = (max * (this.dataRangeWidingFactor - 1) - min * (this.dataRangeWidingFactor - 1)) / 2;\n    let y_min, y_max;\n\n    if (tickInterval === 0) {\n      y_max = max * this.dataRangeWidingFactor;\n      y_min = min - min * (this.dataRangeWidingFactor - 1);\n      tickInterval = (y_max - y_min) / 2;\n    } else {\n      y_max = Math.ceil((max + y_widing) / tickInterval) * tickInterval;\n      y_min = Math.floor((min - y_widing) / tickInterval) * tickInterval;\n    }\n\n    // Don't wide axis below 0 if all values are positive\n    if (min >= 0 && y_min < 0) {\n      y_min = 0;\n    }\n\n    return { y_min, y_max };\n  }\n\n  tickValueFormatter(decimals, scaledDecimals = null) {\n    let format = this.panel.yAxis.format;\n    return function (value) {\n      return kbn.valueFormats[format](value, decimals, scaledDecimals);\n    };\n  }\n\n  // Create svg element, add axes and\n  // calculate sizes for cards drawing\n  addStatusmapCanvas() {\n    let heatmap_elem = this.$heatmap[0];\n\n    this.width = Math.floor(this.$heatmap.width()) - this.padding.right;\n    this.height = Math.floor(this.$heatmap.height()) - this.padding.bottom;\n\n    if (this.heatmap) {\n      this.heatmap.remove();\n    }\n\n    // Insert svg as a first child into heatmap_elem\n    // as the frozen tooltip moving logi assumes that tooltip is the last child.\n    this.heatmap = d3\n      .select(heatmap_elem)\n      .insert('svg', ':first-child')\n      .attr('width', this.width)\n      .attr('height', this.height);\n\n    this.chartHeight = this.height - this.margin.top - this.margin.bottom;\n    this.chartTop = this.margin.top;\n    this.chartBottom = this.chartTop + this.chartHeight;\n\n    this.cardHSpacing = this.panel.cards.cardHSpacing !== null ? this.panel.cards.cardHSpacing : CARD_H_SPACING;\n    this.cardVSpacing = this.panel.cards.cardVSpacing !== null ? this.panel.cards.cardVSpacing : CARD_V_SPACING;\n    this.cardRound = this.panel.cards.cardRound !== null ? this.panel.cards.cardRound : CARD_ROUND;\n\n    // calculate yOffset for YAxis\n    this.yGridSize = this.chartHeight;\n    if (this.bucketMatrixPager.targets().length > 0) {\n      this.yGridSize = Math.floor(this.chartHeight / this.bucketMatrixPager.targets().length);\n    }\n    this.cardHeight = this.yGridSize ? this.yGridSize - this.cardVSpacing : 0;\n    this.yOffset = this.cardHeight / 2;\n\n    this.addYAxis();\n\n    this.yAxisWidth = this.getYAxisWidth(this.heatmap) + Y_AXIS_TICK_PADDING;\n    this.chartWidth = this.width - this.yAxisWidth - this.margin.right;\n\n    // TODO allow per-y cardWidth!\n    // we need to fill chartWidth with xBucketSize cards.\n    this.xGridSize = this.chartWidth / (this.bucketMatrix.xBucketSize + 1);\n    this.cardWidth = this.xGridSize - this.cardHSpacing;\n\n    this.addXAxis();\n    this.xAxisHeight = this.getXAxisHeight(this.heatmap);\n\n    if (!this.panel.yAxis.show) {\n      this.heatmap.select('.axis-y').selectAll('line').style('opacity', 0);\n    }\n\n    if (!this.panel.xAxis.show) {\n      this.heatmap.select('.axis-x').selectAll('line').style('opacity', 0);\n    }\n  }\n\n  addStatusmap(): void {\n    let maxValue = this.panel.color.max != null ? this.panel.color.max : this.bucketMatrix.maxValue;\n    let minValue = this.panel.color.min != null ? this.panel.color.min : this.bucketMatrix.minValue;\n\n    if (this.panel.color.mode !== 'discrete') {\n      this.colorScale = this.getColorScale(maxValue, minValue);\n    }\n    this.setOpacityScale(maxValue);\n\n    // Draw cards from buckets.\n    this.heatmap\n      .selectAll('.statusmap-cards-row')\n      .data(this.bucketMatrixPager.targets())\n      .enter()\n      .selectAll('.statustmap-card')\n      .data((target: string) => this.bucketMatrix.buckets[target])\n      .enter()\n      .append('rect')\n      .attr('cardId', (b: Bucket) => b.id)\n      .attr('xid', (b: Bucket) => b.xid)\n      .attr('yid', (b: Bucket) => b.yLabel)\n      .attr('x', this.getCardX.bind(this))\n      .attr('width', this.getCardWidth.bind(this))\n      .attr('y', this.getCardY.bind(this))\n      .attr('height', this.getCardHeight.bind(this))\n      .attr('rx', this.cardRound)\n      .attr('ry', this.cardRound)\n      .attr('class', (b: Bucket) => (b.isEmpty() ? 'empty-card' : 'bordered statusmap-card'))\n      .style('fill', this.getCardColor.bind(this))\n      .style('stroke', this.getCardColor.bind(this))\n      .style('stroke-width', 0)\n      //.style('stroke-width', getCardStrokeWidth)\n      //.style('stroke-dasharray', '3,3')\n      .style('opacity', this.getCardOpacity.bind(this));\n\n    // Set mouse events on cards.\n    let $cards = this.$heatmap.find('.statusmap-card + .bordered');\n    $cards\n      .on('mouseenter', event => {\n        this.tooltip.mouseOverBucket = true;\n        this.highlightCard(event);\n      })\n      .on('mouseleave', event => {\n        this.tooltip.mouseOverBucket = false;\n        this.resetCardHighLight(event);\n      });\n\n    this._renderAnnotations();\n\n    this.ctrl.events.emit(CoreEvents.renderComplete, {\n      chartWidth: this.chartWidth,\n    });\n  }\n\n  highlightCard(event) {\n    const color = d3.select(event.target).style('fill');\n    const highlightColor = d3.color(color).darker(2);\n    const strokeColor = d3.color(color).brighter(4);\n    const current_card = d3.select(event.target);\n    this.tooltip.originalFillColor = color;\n    current_card\n      .style('fill', highlightColor.toString())\n      .style('stroke', strokeColor.toString())\n      .style('stroke-width', 1);\n  }\n\n  resetCardHighLight(event) {\n    d3.select(event.target)\n      .style('fill', this.tooltip.originalFillColor)\n      .style('stroke', this.tooltip.originalFillColor)\n      .style('stroke-width', 0);\n  }\n\n  getColorScale(maxValue, minValue = 0) {\n    let colorScheme = _.find(this.ctrl.colorSchemes, { value: this.panel.color.colorScheme });\n    // @ts-ignore\n    let colorInterpolator = d3ScaleChromatic[colorScheme.value];\n    let colorScaleInverted =\n      // @ts-ignore\n      colorScheme.invert === 'always' || (colorScheme.invert === 'dark' && !contextSrv.user.lightTheme);\n\n    if (maxValue === minValue) {\n      maxValue = minValue + 1;\n    }\n\n    let start = colorScaleInverted ? maxValue : minValue;\n    let end = colorScaleInverted ? minValue : maxValue;\n\n    return d3.scaleSequential(colorInterpolator).domain([start, end]);\n  }\n\n  setOpacityScale(maxValue) {\n    if (this.panel.color.colorScale === 'linear') {\n      this.opacityScale = d3.scaleLinear().domain([0, maxValue]).range([0, 1]);\n    } else if (this.panel.color.colorScale === 'sqrt') {\n      this.opacityScale = d3.scalePow().exponent(this.panel.color.exponent).domain([0, maxValue]).range([0, 1]);\n    }\n  }\n\n  getCardX(b: Bucket) {\n    let x;\n    // cx is the center of the card. Card should be placed to the left.\n    //let cx = this.xScale(d.x);\n    let rightX = (b.relTo / this.bucketMatrix.rangeMs) * this.chartWidth;\n    let cx = rightX - this.cardWidth / 2;\n\n    if (cx - this.cardWidth / 2 < 0) {\n      x = this.yAxisWidth + this.cardHSpacing / 2;\n    } else {\n      x = this.yAxisWidth + cx - this.cardWidth / 2;\n    }\n\n    return x;\n  }\n\n  // xScale returns card center. Adjust cardWidth in case of overlaping.\n  getCardWidth(b: Bucket) {\n    //return 20;\n    let w;\n\n    let rightX = (b.relTo / this.bucketMatrix.rangeMs) * this.chartWidth;\n    let cx = rightX - this.cardWidth / 2;\n    //let cx = this.xScale(d.x);\n\n    if (cx < this.cardWidth / 2) {\n      // Center should not exceed half of card.\n      // Cut card to the left to prevent overlay of y axis.\n      let cutted_width = cx - this.cardHSpacing / 2 + this.cardWidth / 2;\n      w = cutted_width > 0 ? cutted_width : 0;\n    } else if (this.chartWidth - cx < this.cardWidth / 2) {\n      // Cut card to the right to prevent overlay of right graph edge.\n      w = this.cardWidth / 2 + (this.chartWidth - cx - this.cardHSpacing / 2);\n    } else {\n      w = this.cardWidth;\n    }\n\n    // Card width should be MIN_CARD_SIZE at least\n    w = Math.max(w, MIN_CARD_SIZE);\n\n    if (this.cardHSpacing === 0) {\n      w = w + 1;\n    }\n\n    return w;\n  }\n\n  // Top y for card.\n  // yScale gives ???\n  getCardY(b: Bucket) {\n    return this.yScale(b.yLabel) + this.chartTop - this.cardHeight - this.cardVSpacing / 2;\n  }\n\n  getCardHeight(b: Bucket) {\n    //return 20;\n    let ys = this.yScale(b.yLabel);\n    let y = ys + this.chartTop - this.cardHeight - this.cardVSpacing / 2;\n    let h = this.cardHeight;\n\n    // Cut card height to prevent overlay\n    if (y < this.chartTop) {\n      h = ys - this.cardVSpacing / 2;\n    } else if (ys > this.chartBottom) {\n      h = this.chartBottom - y;\n    } else if (y + this.cardHeight > this.chartBottom) {\n      h = this.chartBottom - y;\n    }\n\n    // Height can't be more than chart height\n    h = Math.min(h, this.chartHeight);\n    // Card height should be MIN_CARD_SIZE at least\n    h = Math.max(h, MIN_CARD_SIZE);\n\n    if (this.cardVSpacing === 0) {\n      h = h + 1;\n    }\n\n    return h;\n  }\n\n  getCardColor(bucket: Bucket) {\n    if (this.panel.color.mode === 'opacity') {\n      return this.panel.color.cardColor;\n    } else if (this.panel.color.mode === 'spectrum') {\n      if (!bucket.value && this.panel.nullPointMode === 'as zero') {\n        // bucket.value === 0 falls here, but it is fine.\n        return this.colorScale(0);\n      }\n      return this.colorScale(bucket.value);\n    } else if (this.panel.color.mode === 'discrete') {\n      if (this.panel.seriesFilterIndex !== null && this.panel.seriesFilterIndex !== -1) {\n        return this.ctrl.discreteExtraSeries.getBucketColorSingle(bucket.values[this.panel.seriesFilterIndex]);\n      } else {\n        return this.ctrl.discreteExtraSeries.getBucketColor(bucket.values);\n      }\n    }\n  }\n\n  getCardOpacity(bucket: Bucket) {\n    if (this.panel.nullPointMode === 'as empty' && bucket.value == null) {\n      return 0;\n    }\n    if (this.panel.color.mode === 'opacity') {\n      return this.opacityScale(bucket.value);\n    } else {\n      return 1;\n    }\n  }\n\n  getCardStrokeWidth(b: Bucket) {\n    if (this.panel.color.mode === 'discrete') {\n      return '1';\n    }\n    return '0';\n  }\n\n  /////////////////////////////\n  // Selection and crosshair //\n  /////////////////////////////\n\n  getEventOffset(event) {\n    const elemOffset = this.$heatmap.offset();\n    const x = Math.floor(event.clientX - elemOffset.left);\n    const y = Math.floor(event.clientY - elemOffset.top);\n    return { x, y };\n  }\n\n  onMouseDown(event) {\n    const offset = this.getEventOffset(event);\n    this.selection.active = true;\n    this.selection.x1 = offset.x;\n\n    this.mouseUpHandler = () => {\n      this.onMouseUp();\n    };\n\n    $(document).one('mouseup', this.mouseUpHandler.bind(this));\n  }\n\n  onMouseUp() {\n    $(document).unbind('mouseup', this.mouseUpHandler.bind(this));\n    this.mouseUpHandler = null;\n    this.selection.active = false;\n\n    let selectionRange = Math.abs(this.selection.x2 - this.selection.x1);\n    if (this.selection.x2 >= 0 && selectionRange > MIN_SELECTION_WIDTH) {\n      let timeFrom = this.xScale.invert(\n        Math.min(this.selection.x1, this.selection.x2) - this.yAxisWidth - this.xGridSize / 2\n      );\n      let timeTo = this.xScale.invert(\n        Math.max(this.selection.x1, this.selection.x2) - this.yAxisWidth - this.xGridSize / 2\n      );\n\n      // TODO use toUtc method from moment wrapper in @grafana/data\n      this.ctrl.timeSrv.setTime({\n        from: moment.utc(timeFrom),\n        to: moment.utc(timeTo),\n      });\n    }\n\n    this.clearSelection();\n  }\n\n  onMouseLeave(e) {\n    appEvents.emit(CoreEvents.graphHoverClear);\n    this.clearCrosshair();\n    this.annotationTooltip.destroy();\n  }\n\n  onMouseMove(event: MouseEvent) {\n    if (!this.heatmap) {\n      return;\n    }\n\n    const offset = this.getEventOffset(event);\n    if (this.selection.active) {\n      // Clear crosshair and tooltip\n      this.clearCrosshair();\n      this.tooltip.destroy();\n      this.annotationTooltip.destroy();\n\n      this.selection.x2 = this.limitSelection(event.offsetX);\n      this.drawSelection(this.selection.x1, this.selection.x2);\n    } else {\n      //const pos = this.getEventPos(event, offset);\n      this.emitGraphHoverEvent(event);\n      this.drawCrosshair(offset.x);\n      this.tooltip.show(event);\n      this.annotationTooltip.show(event);\n    }\n  }\n\n  // TODO emit an event and move logic to panelCtrl\n  onMouseClick(e: MouseEvent) {\n    if (this.ctrl.panel.tooltip.freezeOnClick) {\n      this.tooltip.showFrozen(e);\n      this.tooltip.destroy();\n    }\n  }\n\n  getEventPos(event, offset) {\n    const x = this.xScale.invert(offset.x - this.yAxisWidth).valueOf();\n    const y = this.yScale.invert(offset.y - this.chartTop);\n    const pos = {\n      pageX: event.pageX,\n      pageY: event.pageY,\n      x: x,\n      x1: x,\n      y: y,\n      y1: y,\n      panelRelY: null,\n      offset,\n    };\n\n    return pos;\n  }\n\n  emitGraphHoverEvent(event) {\n    let x = this.xScale.invert(event.offsetX - this.yAxisWidth - this.xGridSize / 2).valueOf();\n    let y = this.yScale(event.offsetY);\n    let pos = {\n      pageX: event.pageX,\n      pageY: event.pageY,\n      x: x,\n      x1: x,\n      y: y,\n      y1: y,\n      panelRelY: 0,\n    };\n\n    // Set minimum offset to prevent showing legend from another panel\n    pos.panelRelY = Math.max(event.offsetY / this.height, 0.001);\n\n    // broadcast to other graph panels that we are hovering\n    appEvents.emit(CoreEvents.graphHover, { pos: pos, panel: this.panel });\n  }\n\n  limitSelection(x2) {\n    x2 = Math.max(x2, this.yAxisWidth);\n    x2 = Math.min(x2, this.chartWidth + this.yAxisWidth);\n    return x2;\n  }\n\n  drawSelection(posX1, posX2) {\n    if (this.heatmap) {\n      this.heatmap.selectAll('.status-heatmap-selection').remove();\n      let selectionX = Math.min(posX1, posX2);\n      let selectionWidth = Math.abs(posX1 - posX2);\n\n      if (selectionWidth > MIN_SELECTION_WIDTH) {\n        this.heatmap\n          .append('rect')\n          .attr('class', 'status-heatmap-selection')\n          .attr('x', selectionX)\n          .attr('width', selectionWidth)\n          .attr('y', this.chartTop)\n          .attr('height', this.chartHeight);\n      }\n    }\n  }\n\n  clearSelection() {\n    this.selection.x1 = -1;\n    this.selection.x2 = -1;\n\n    if (this.heatmap) {\n      this.heatmap.selectAll('.status-heatmap-selection').remove();\n    }\n  }\n\n  drawCrosshair(position) {\n    if (this.heatmap) {\n      this.heatmap.selectAll('.status-heatmap-crosshair').remove();\n\n      let posX = position;\n      posX = Math.max(posX, this.yAxisWidth);\n      posX = Math.min(posX, this.chartWidth + this.yAxisWidth);\n\n      this.heatmap\n        .append('g')\n        .attr('class', 'status-heatmap-crosshair')\n        .attr('transform', 'translate(' + posX + ',0)')\n        .append('line')\n        .attr('x1', 1)\n        .attr('y1', this.chartTop)\n        .attr('x2', 1)\n        .attr('y2', this.chartBottom)\n        .attr('stroke-width', 1);\n    }\n  }\n\n  // map time to X\n  drawSharedCrosshair(pos) {\n    if (this.heatmap && this.ctrl.dashboard.graphTooltip !== 0) {\n      const posX = this.xScale(pos.x) + this.yAxisWidth;\n      this.drawCrosshair(posX);\n    }\n  }\n\n  clearCrosshair() {\n    if (this.heatmap) {\n      this.heatmap.selectAll('.status-heatmap-crosshair').remove();\n    }\n  }\n\n  render() {\n    this.panel = this.ctrl.panel;\n    this.timeRange = this.ctrl.range;\n    this.bucketMatrix = this.ctrl.bucketMatrix;\n    this.bucketMatrixPager = this.ctrl.bucketMatrixPager;\n\n    if (!this.bucketMatrix || !this.setElementHeight()) {\n      return;\n    }\n\n    // Draw default axes and return if no data\n    this.addStatusmapCanvas();\n    if (this.bucketMatrix.noDatapoints) {\n      return;\n    }\n\n    this.addStatusmap();\n    this.scope.yAxisWidth = this.yAxisWidth;\n    this.scope.xAxisHeight = this.xAxisHeight;\n    this.scope.chartHeight = this.chartHeight;\n    this.scope.chartWidth = this.chartWidth;\n    this.scope.chartTop = this.chartTop;\n  }\n\n  _renderAnnotations() {\n    if (!this.ctrl.annotations || this.ctrl.annotations.length === 0) {\n      return;\n    }\n\n    if (!this.heatmap) {\n      return;\n    }\n\n    let annoData = _.map(this.ctrl.annotations, (d, i) => ({\n      // @ts-ignore\n      x: Math.floor(this.yAxisWidth + this.xScale(d.time)),\n      id: i,\n      // @ts-ignore\n      anno: d.source,\n    }));\n\n    //({\"ctrl_annotations\": this.ctrl.annotations, \"annoData\": annoData});\n\n    let anno = this.heatmap\n      .append('g')\n      .attr('class', 'statusmap-annotations')\n      .attr('transform', 'translate(0.5,0)')\n      .selectAll('.statusmap-annotations')\n      .data(annoData)\n      .enter()\n      .append('g');\n\n    anno\n      .append('line')\n      //.attr(\"class\", \"statusmap-annotation-tick\")\n      .attr('x1', d => d.x)\n      .attr('y1', this.chartTop)\n      .attr('x2', d => d.x)\n      .attr('y2', this.chartBottom)\n      .style('stroke', d => d.anno.iconColor)\n      .style('stroke-width', 1)\n      .style('stroke-dasharray', '3,3');\n\n    anno\n      .append('polygon')\n      .attr('points', d =>\n        [\n          [d.x, this.chartBottom + 1],\n          [d.x - 5, this.chartBottom + 6],\n          [d.x + 5, this.chartBottom + 6],\n        ].join(' ')\n      )\n      .style('stroke-width', 0)\n      .style('fill', d => d.anno.iconColor);\n\n    // Polygons didn't fire mouseevents\n    anno\n      .append('rect')\n      .attr('x', d => d.x - 5)\n      .attr('width', 10)\n      .attr('y', this.chartBottom + 1)\n      .attr('height', 5)\n      .attr('class', 'statusmap-annotation-tick')\n      .attr('annoId', d => d.id)\n      .style('opacity', 0);\n\n    let $ticks = this.$heatmap.find('.statusmap-annotation-tick');\n    $ticks\n      .on('mouseenter', event => {\n        this.annotationTooltip.mouseOverAnnotationTick = true;\n      })\n      .on('mouseleave', event => {\n        this.annotationTooltip.mouseOverAnnotationTick = false;\n      });\n  }\n}\n\nfunction grafanaTimeFormat(ticks, min, max) {\n  if (min && max && ticks) {\n    let range = max - min;\n    let secPerTick = range / ticks / 1000;\n    let oneDay = 86400000;\n    let oneYear = 31536000000;\n\n    if (secPerTick <= 45) {\n      return '%H:%M:%S';\n    }\n    if (secPerTick <= 7200 || range <= oneDay) {\n      return '%H:%M';\n    }\n    if (secPerTick <= 80000) {\n      return '%m/%d %H:%M';\n    }\n    if (secPerTick <= 2419200 || range <= oneYear) {\n      return '%m/%d';\n    }\n    return '%Y-%m';\n  }\n\n  return '%H:%M';\n}\n","import _ from 'lodash';\nimport { Bucket } from './statusmap_data';\nimport { StatusHeatmapCtrl } from './module';\n\ninterface Tooltip {\n  tooltip: string;\n  color: string;\n}\n\ndeclare class DiscreteColorThreshold {\n  color: string;\n  value: number;\n  tooltip: string;\n}\n\n// Extra Series methods to handle discrete color mode\nexport class ColorModeDiscrete {\n  scope: any;\n  panelCtrl: StatusHeatmapCtrl;\n  panel: any;\n\n  constructor(scope) {\n    this.scope = scope;\n    this.panelCtrl = scope.ctrl;\n    this.panel = scope.ctrl.panel;\n  }\n\n  // get tooltip for each value ordered by thresholds priority\n  convertValuesToTooltips(values: any[]): Tooltip[] {\n    let thresholds = this.panel.color.thresholds;\n    let tooltips: Tooltip[] = [];\n\n    for (let i = 0; i < thresholds.length; i++) {\n      for (let j = 0; j < values.length; j++) {\n        if (this.isEqualValues(values[j], thresholds[i].value)) {\n          tooltips.push({\n            tooltip: thresholds[i].tooltip ? thresholds[i].tooltip : values[j],\n            color: thresholds[i].color,\n          });\n        }\n      }\n    }\n    return tooltips;\n  }\n\n  convertValueToTooltips(value) {\n    let thresholds = this.panel.color.thresholds;\n    let tooltips = [];\n\n    for (let i = 0; i < thresholds.length; i++) {\n      if (this.isEqualValues(value, thresholds[i].value)) {\n        tooltips.push({\n          tooltip: thresholds[i].tooltip ? thresholds[i].tooltip : value,\n          color: thresholds[i].color,\n        });\n      }\n    }\n    return tooltips;\n  }\n\n  getNotMatchedValues(values: any[]) {\n    let notMatched: any[] = [];\n    for (let j = 0; j < values.length; j++) {\n      if (!this.getMatchedThreshold(values[j])) {\n        notMatched.push(values[j]);\n      }\n    }\n    return notMatched;\n  }\n\n  getNotColoredValues(values: any[]) {\n    let notMatched: any[] = [];\n    for (let j = 0; j < values.length; j++) {\n      let threshold = this.getMatchedThreshold(values[j]);\n      if (!threshold || !threshold.color || threshold.color === '') {\n        notMatched.push(values[j]);\n      }\n    }\n    return notMatched;\n  }\n\n  getDiscreteColor(index) {\n    let color = this.getThreshold(index).color;\n    if (!color || color === '') {\n      return 'rgba(0,0,0,1)';\n    }\n    return color;\n  }\n\n  getBucketColorSingle(value) {\n    //let thresholds = this.panel.color.thresholds;\n    if (value == null) {\n      // treat as null value\n      return 'rgba(0,0,0,1)';\n      //return this.getMatchedThreshold(null).color;\n    }\n    let threshold = this.getMatchedThreshold(value);\n\n    if (!threshold || !threshold.color || threshold.color === '') {\n      return 'rgba(0,0,0,1)';\n    } else {\n      return threshold.color;\n    }\n  }\n\n  // returns color from first matched thresold in order from 0 to thresholds.length\n  getBucketColor(values) {\n    let thresholds = this.panel.color.thresholds;\n\n    if (!values || values.length === 0) {\n      // treat as null value\n      return this.getMatchedThreshold(null).color;\n    }\n\n    if (values.length === 1) {\n      let threshold = this.getMatchedThreshold(values[0]);\n      if (!threshold || !threshold.color || threshold.color === '') {\n        return 'rgba(0,0,0,1)';\n      } else {\n        return threshold.color;\n      }\n    }\n\n    let isAllValuesNulls = true;\n    for (let j = 0; j < values.length; j++) {\n      if (values[j] != null) {\n        isAllValuesNulls = false;\n      }\n    }\n    if (isAllValuesNulls) {\n      return this.getMatchedThreshold(null).color;\n    }\n\n    for (let i = 0; i < thresholds.length; i++) {\n      for (let j = 0; j < values.length; j++) {\n        if (this.isEqualValues(values[j], thresholds[i].value)) {\n          return this.getDiscreteColor(i);\n        }\n      }\n    }\n    return 'rgba(0,0,0,1)';\n  }\n\n  updateCardsValuesHasColorInfoSingle() {\n    if (!this.panelCtrl.bucketMatrix) {\n      return;\n    }\n    this.panelCtrl.bucketMatrix.noColorDefined = false;\n\n    this.panelCtrl.bucketMatrix.targets.map((target: string) => {\n      this.panelCtrl.bucketMatrix.buckets[target].map((bucket: Bucket) => {\n        bucket.noColorDefined = false;\n        let threshold = this.getMatchedThreshold(bucket.value);\n        if (!threshold || !threshold.color || threshold.color === '') {\n          bucket.noColorDefined = true;\n          this.panelCtrl.bucketMatrix.noColorDefined = true;\n        }\n      });\n    });\n  }\n\n  updateCardsValuesHasColorInfo() {\n    if (!this.panelCtrl.bucketMatrix) {\n      return;\n    }\n    this.panelCtrl.bucketMatrix.noColorDefined = false;\n\n    this.panelCtrl.bucketMatrix.targets.map((target: string) => {\n      this.panelCtrl.bucketMatrix.buckets[target].map((bucket: Bucket) => {\n        bucket.noColorDefined = false;\n        for (let j = 0; j < bucket.values.length; j++) {\n          let threshold = this.getMatchedThreshold(bucket.values[j]);\n          if (!threshold || !threshold.color || threshold.color === '') {\n            bucket.noColorDefined = true;\n            this.panelCtrl.bucketMatrix.noColorDefined = true;\n            break;\n          }\n        }\n      });\n    });\n  }\n\n  getMatchedThreshold(value) {\n    if (value == null) {\n      if (this.panel.nullPointMode === 'as empty') {\n        // FIXME: make this explicit for user\n        // Right now this color never used because null as empty handles in getCardOpacity method.\n        return {\n          color: 'rgba(0,0,0,0)',\n          value: 'null',\n          tooltip: 'null',\n        };\n      } else {\n        value = 0;\n      }\n    }\n\n    let thresholds = this.panel.color.thresholds;\n    for (let k = 0; k < thresholds.length; k++) {\n      if (this.isEqualValues(value, thresholds[k].value)) {\n        return thresholds[k];\n      }\n    }\n    return null;\n  }\n\n  getThreshold(index) {\n    let thresholds = this.panel.color.thresholds;\n    if (index < 0 || index >= thresholds.length == null) {\n      return {\n        color: 'rgba(0,0,0,0)',\n        value: 'null',\n        tooltip: 'null',\n      };\n    }\n    return thresholds[index];\n  }\n\n  isEqualValues(val1, val2) {\n    // Relaxed equal operator here is important.\n    // threshold.value can be a number or a string and input value can be a number or a string.\n    /* eslint-disable eqeqeq */\n    return val1 == val2;\n  }\n\n  roundIntervalCeil(interval) {\n    switch (true) {\n      case interval <= 10:\n        return 10; // 0.01s\n      case interval <= 20:\n        return 20; // 0.02s\n      case interval <= 50:\n        return 50; // 0.05s\n      case interval <= 100:\n        return 100; // 0.1s\n      case interval <= 200:\n        return 200; // 0.2s\n      case interval <= 500:\n        return 500; // 0.5s\n      case interval <= 1000:\n        return 1000; // 1s\n      case interval <= 2000:\n        return 2000; // 2s\n      case interval <= 5000:\n        return 5000; // 5s\n      case interval <= 10000:\n        return 10000; // 10s\n      case interval <= 15000:\n        return 15000; // 15s\n      case interval <= 20000:\n        return 20000; // 20s\n      case interval <= 30000:\n        return 30000; // 30s\n      case interval <= 60000:\n        return 60000; // 1m\n      case interval <= 120000:\n        return 120000; // 2m\n      case interval <= 300000:\n        return 300000; // 5m\n      case interval <= 600000:\n        return 600000; // 10m\n      case interval <= 900000:\n        return 900000; // 15m\n      case interval <= 1200000:\n        return 1200000; // 20m\n      case interval <= 1800000:\n        return 1800000; // 30m\n      case interval <= 3600000:\n        return 3600000; // 1h\n      case interval <= 7200000:\n        return 7200000; // 2h\n      case interval <= 10800000:\n        return 10800000; // 3h\n      case interval <= 21600000:\n        return 21600000; // 6h\n      case interval <= 43200000:\n        return 43200000; // 12h\n      case interval <= 86400000:\n        return 86400000; // 1d\n      case interval <= 604800000:\n        return 604800000; // 1w\n      case interval <= 2592000000:\n        return 2592000000; // 30d\n      default:\n        return 31536000000; // 1y\n    }\n  }\n}\n","// Libraries\nimport _ from 'lodash';\nimport { auto } from 'angular';\n\nimport { PanelEvents, DataFrame } from '@grafana/data';\nimport TimeSeries from 'grafana/app/core/time_series2';\n\nimport { config } from '@grafana/runtime';\nimport { DataProcessor } from './data_processor';\n\n// Components\nimport './color_legend';\nimport { optionsEditorCtrl } from './options_editor';\nimport { tooltipEditorCtrl } from './tooltip_editor';\nimport { migratePanelConfig } from './panel_config_migration';\n\n// Utils\nimport kbn from 'grafana/app/core/utils/kbn';\nimport { loadPluginCss, MetricsPanelCtrl } from 'grafana/app/plugins/sdk';\n\n// Types\nimport { AnnotationsSrv } from 'grafana/app/features/annotations/annotations_srv';\nimport { Bucket, BucketMatrix, BucketMatrixPager } from './statusmap_data';\nimport rendering from './rendering';\n\nimport { ColorModeDiscrete } from './color_mode_discrete';\nimport { CoreEvents } from './util/grafana/events';\n\nconst VALUE_INDEX = 0,\n  TIME_INDEX = 1;\n\nconst colorSchemes = [\n  // Diverging\n  { name: 'Spectral', value: 'interpolateSpectral', invert: 'always' },\n  { name: 'RdYlGn', value: 'interpolateRdYlGn', invert: 'always' },\n  { name: 'GnYlRd', value: 'interpolateGnYlRd', invert: 'always' },\n\n  // Sequential (Single Hue)\n  { name: 'Blues', value: 'interpolateBlues', invert: 'dark' },\n  { name: 'Greens', value: 'interpolateGreens', invert: 'dark' },\n  { name: 'Greys', value: 'interpolateGreys', invert: 'dark' },\n  { name: 'Oranges', value: 'interpolateOranges', invert: 'dark' },\n  { name: 'Purples', value: 'interpolatePurples', invert: 'dark' },\n  { name: 'Reds', value: 'interpolateReds', invert: 'dark' },\n\n  // Sequential (Multi-Hue)\n  { name: 'BuGn', value: 'interpolateBuGn', invert: 'dark' },\n  { name: 'BuPu', value: 'interpolateBuPu', invert: 'dark' },\n  { name: 'GnBu', value: 'interpolateGnBu', invert: 'dark' },\n  { name: 'OrRd', value: 'interpolateOrRd', invert: 'dark' },\n  { name: 'PuBuGn', value: 'interpolatePuBuGn', invert: 'dark' },\n  { name: 'PuBu', value: 'interpolatePuBu', invert: 'dark' },\n  { name: 'PuRd', value: 'interpolatePuRd', invert: 'dark' },\n  { name: 'RdPu', value: 'interpolateRdPu', invert: 'dark' },\n  { name: 'YlGnBu', value: 'interpolateYlGnBu', invert: 'dark' },\n  { name: 'YlGn', value: 'interpolateYlGn', invert: 'dark' },\n  { name: 'YlOrBr', value: 'interpolateYlOrBr', invert: 'dark' },\n  { name: 'YlOrRd', value: 'interpolateYlOrRd', invert: 'dark' },\n];\n\nlet colorModes = ['opacity', 'spectrum', 'discrete'];\nlet opacityScales = ['linear', 'sqrt'];\n\nloadPluginCss({\n  dark: 'plugins/flant-statusmap-panel/styles/dark.css',\n  light: 'plugins/flant-statusmap-panel/styles/light.css',\n});\n\nclass StatusHeatmapCtrl extends MetricsPanelCtrl {\n  static templateUrl = 'module.html';\n\n  data: any;\n  bucketMatrix: BucketMatrix;\n  bucketMatrixPager: BucketMatrixPager;\n\n  graph: any;\n  opacityScales: any = [];\n  colorModes: any = [];\n  colorSchemes: any = [];\n  unitFormats: any;\n\n  dataWarnings: { [warningId: string]: { title: string; tip: string } } = {};\n  multipleValues: boolean;\n  noColorDefined: boolean;\n  noDatapoints: boolean;\n\n  discreteExtraSeries: ColorModeDiscrete;\n\n  annotations: object[] = [];\n  annotationsPromise: any;\n\n  // TODO remove this transient variable: use ng-model-options=\"{ getterSetter: true }\"\n  pageSizeViewer = 15;\n\n  panelDefaults: any = {\n    // datasource name, null = default datasource\n    datasource: null,\n    // color mode\n    color: {\n      mode: 'spectrum',\n      cardColor: '#b4ff00',\n      colorScale: 'sqrt',\n      exponent: 0.5,\n      colorScheme: 'interpolateGnYlRd',\n      // discrete mode settings\n      defaultColor: '#757575',\n      thresholds: [], // manual colors\n    },\n    // buckets settings\n    cards: {\n      cardMinWidth: 5,\n      cardVSpacing: 2,\n      cardHSpacing: 2,\n      cardRound: null,\n    },\n    xAxis: {\n      show: true,\n    },\n    yAxis: {\n      show: true,\n      minWidth: -1,\n      maxWidth: -1,\n    },\n    tooltip: {\n      show: true,\n      freezeOnClick: true,\n      showItems: false,\n      items: [], // see tooltip_editor.ts\n      showExtraInfo: false,\n      extraInfo: '',\n    },\n    legend: {\n      show: true,\n    },\n    yLabel: {\n      usingSplitLabel: false,\n      delimiter: '',\n      labelTemplate: '',\n    },\n    // how null points should be handled\n    nullPointMode: 'as empty',\n    yAxisSort: 'metrics',\n    highlightCards: true,\n    useMax: true,\n\n    seriesFilterIndex: -1,\n\n    // Pagination options\n    usingPagination: false,\n    pageSize: 15,\n\n    // Branding flag.\n    hideBranding: false,\n  };\n\n  processor?: DataProcessor;\n\n  /** @ngInject */\n  constructor($scope: any, $injector: auto.IInjectorService, private annotationsSrv: AnnotationsSrv) {\n    super($scope, $injector);\n\n    // Grafana 7.2 workaround\n    if (typeof kbn['intervalToMs'] === 'function') {\n      kbn.interval_to_ms = kbn.intervalToMs;\n    }\n\n    migratePanelConfig(this.panel);\n    _.defaultsDeep(this.panel, this.panelDefaults);\n\n    this.bucketMatrix = new BucketMatrix();\n\n    // Create pager for bucketMatrix and restore page size.\n    this.bucketMatrixPager = new BucketMatrixPager();\n    this.bucketMatrixPager.setEnable(this.panel.usingPagination);\n    this.bucketMatrixPager.setDefaultPageSize(this.panel.pageSize);\n    this.bucketMatrixPager.setPageSize(this.panel.pageSize);\n    $scope.pager = this.bucketMatrixPager;\n\n    this.opacityScales = opacityScales;\n    this.colorModes = colorModes;\n    this.colorSchemes = colorSchemes;\n\n    // default graph width for discrete card width calculation\n    this.graph = {\n      chartWidth: -1,\n    };\n\n    this.multipleValues = false;\n    this.noColorDefined = false;\n\n    this.discreteExtraSeries = new ColorModeDiscrete($scope);\n\n    this.dataWarnings = {\n      noColorDefined: {\n        title: 'Data has value with undefined color',\n        tip: 'Check metric values, color values or define a new color',\n      },\n      multipleValues: {\n        title: 'Data has multiple values for one target',\n        tip: 'Change targets definitions or set \"use max value\"',\n      },\n      noDatapoints: {\n        title: 'No data points',\n        tip: 'No datapoints returned from data query',\n      },\n    };\n\n    this.annotations = [];\n    this.annotationsSrv = annotationsSrv;\n\n    this.events.on(PanelEvents.render, this.onRender.bind(this));\n    this.events.on(PanelEvents.dataError, this.onDataError.bind(this));\n    this.events.on(PanelEvents.editModeInitialized, this.onInitEditMode.bind(this));\n    this.events.on(PanelEvents.refresh, this.postRefresh.bind(this));\n    // custom event from rendering.js\n    this.events.on(CoreEvents.renderComplete, this.onRenderComplete.bind(this));\n\n    this.onCardColorChange = this.onCardColorChange.bind(this);\n\n    console.log('Grafana buildInfo:', config.buildInfo);\n\n    const majorVersion = parseInt(config.buildInfo.version.split('.', 2)[0], 10);\n    if (majorVersion >= 7) {\n      // Support data frames for 7.0+\n      (this as any).useDataFrames = true;\n      this.events.on(PanelEvents.dataFramesReceived, this.onDataFramesReceived.bind(this));\n      this.events.on(PanelEvents.dataSnapshotLoad, this.onDataFramesReceived.bind(this));\n      this.processor = new DataProcessor(this.panel, majorVersion);\n    } else {\n      // Fallback to support only timeseries data format.\n      this.events.on(PanelEvents.dataReceived, this.onDataReceived.bind(this));\n      this.events.on(PanelEvents.dataSnapshotLoad, this.onDataReceived.bind(this));\n    }\n  }\n\n  onRenderComplete(data: any): void {\n    this.graph.chartWidth = data.chartWidth;\n    this.renderingCompleted();\n  }\n\n  changeDefaultPaginationSize(defaultPageSize: number): void {\n    this.bucketMatrixPager.setDefaultPageSize(defaultPageSize);\n    this.bucketMatrixPager.setPageSize(defaultPageSize);\n    this.pageSizeViewer = defaultPageSize;\n\n    this.render();\n    this.refresh();\n  }\n\n  onChangePageSize(): void {\n    if (this.pageSizeViewer <= 0) {\n      this.pageSizeViewer = this.bucketMatrixPager.defaultPageSize;\n    }\n    this.bucketMatrixPager.setPageSize(this.pageSizeViewer);\n    this.bucketMatrixPager.setCurrent(0);\n\n    this.render();\n    this.refresh();\n  }\n\n  onPrevPage(): void {\n    this.bucketMatrixPager.switchToPrev();\n    this.render();\n  }\n\n  onNextPage(): void {\n    this.bucketMatrixPager.switchToNext();\n    this.render();\n  }\n\n  // getChartWidth returns an approximation of chart canvas width or\n  // a saved value calculated during a render.\n  getChartWidth(): number {\n    if (this.graph.chartWidth > 0) {\n      return this.graph.chartWidth;\n    }\n\n    const wndWidth = $(window).width();\n    // gripPos.w is a width in grid's measurements. Grid size in Grafana is 24.\n    const panelWidthFactor = this.panel.gridPos.w / 24;\n    const panelWidth = Math.ceil(wndWidth * panelWidthFactor);\n    // approximate width of the chart draw canvas:\n    // - y axis ticks are not rendered yet on first data receive,\n    //   so choose 200 as a decent value for y legend width\n    // - chartWidth can not be lower than the half of the panel width.\n    const chartWidth = _.max([panelWidth - 200, panelWidth / 2]);\n\n    return chartWidth!;\n  }\n\n  // Quick workaround for 6.7 and 7.0+. There is no call to\n  // calculateInterval in updateTimeRange in those versions.\n  // TODO ts type has no argument for this method.\n  //\n  updateTimeRange(datasource?: any) {\n    // @ts-ignore\n    let ret = super.updateTimeRange(datasource);\n    this.calculateInterval();\n    return ret;\n  }\n\n  // calculateInterval is called on 'refresh' to calculate an interval\n  // for datasource.\n  // It is override of calculateInterval from MetricsPanelCtrl.\n  calculateInterval() {\n    let chartWidth = this.getChartWidth();\n\n    let minCardWidth = this.panel.cards.cardMinWidth;\n    let minSpacing = this.panel.cards.cardHSpacing;\n    let maxCardsCount = Math.ceil((chartWidth - minCardWidth) / (minCardWidth + minSpacing));\n\n    let intervalMs;\n    let rangeMs = this.range.to.valueOf() - this.range.from.valueOf();\n\n    // this is minimal interval! kbn.round_interval will lower it.\n    intervalMs = this.discreteExtraSeries.roundIntervalCeil(rangeMs / maxCardsCount);\n\n    // Calculate low limit of interval\n    let lowLimitMs = 1; // 1 millisecond default low limit\n\n    let intervalOverride = this.panel.interval;\n\n    // if no panel interval check datasource\n    if (intervalOverride) {\n      intervalOverride = this.templateSrv.replace(intervalOverride, this.panel.scopedVars);\n    } else if (this.datasource && this.datasource.interval) {\n      intervalOverride = this.datasource.interval;\n    }\n\n    if (intervalOverride) {\n      if (intervalOverride[0] === '>') {\n        intervalOverride = intervalOverride.slice(1);\n      }\n      lowLimitMs = kbn.interval_to_ms(intervalOverride);\n    }\n\n    if (lowLimitMs > intervalMs) {\n      intervalMs = lowLimitMs;\n    }\n    let interval = kbn.secondsToHms(intervalMs / 1000);\n\n    this.intervalMs = intervalMs;\n    this.interval = interval;\n\n    // Get final buckets count after interval is adjusted\n    // TODO is it needed?\n    //this.xBucketsCount = Math.floor(rangeMs / intervalMs);\n  }\n\n  issueQueries(datasource: any) {\n    // Grafana 8.1+: there is no updateTimeRange call before initial issueQueries.\n    // https://github.com/grafana/grafana/commit/6f38883583c4c43af149f68db482b39a3240ec95\n    if (!this.range) {\n      this.updateTimeRange(datasource);\n    }\n    this.annotationsPromise = this.annotationsSrv.getAnnotations({\n      dashboard: this.dashboard,\n      panel: this.panel,\n      range: this.range,\n    });\n\n    /* Wait for annotationSrv requests to get datasources to\n     * resolve before issuing queries. This allows the annotations\n     * service to fire annotations queries before graph queries\n     * (but not wait for completion). This resolves\n     * issue 11806.\n     */\n    // 5.x before 5.4 doesn't have datasourcePromises.\n    // @ts-ignore\n    if ('undefined' !== typeof this.annotationsSrv.datasourcePromises) {\n      // @ts-ignore\n      return this.annotationsSrv.datasourcePromises.then(r => {\n        return this.issueQueriesWithInterval(datasource, this.interval);\n      });\n    } else {\n      return this.issueQueriesWithInterval(datasource, this.interval);\n    }\n  }\n\n  // Grafana 6.2 (and older) is using this.interval for queries,\n  // but Grafana 6.3+ is calculating interval again in queryRunner,\n  // so we need to save-restore this.panel.interval.\n  issueQueriesWithInterval(datasource: any, interval: any) {\n    var origInterval = this.panel.interval;\n    this.panel.interval = interval;\n    var res = super.issueQueries(datasource);\n    this.panel.interval = origInterval;\n    return res;\n  }\n\n  onDataFramesReceived(data: DataFrame[]) {\n    const dataList = this.processor.getSeriesList({\n      dataList: data as DataFrame[],\n      range: this.range,\n    });\n    this.onDataReceived(dataList);\n  }\n\n  onDataReceived(dataList: TimeSeries[]) {\n    this.data = dataList;\n    // Quick workaround for 7.0+. There is no call to\n    // calculateInterval when enter Edit mode.\n    if (!this.intervalMs) {\n      this.calculateInterval();\n    }\n\n    let newBucketMatrix = this.convertDataToBuckets(\n      dataList,\n      this.range.from.valueOf(),\n      this.range.to.valueOf(),\n      this.intervalMs,\n      true\n    );\n\n    this.bucketMatrix = newBucketMatrix;\n    this.bucketMatrixPager.bucketMatrix = newBucketMatrix;\n    if (newBucketMatrix.targets.length !== this.bucketMatrix.targets.length) {\n      this.bucketMatrixPager.setCurrent(0);\n    }\n\n    this.noDatapoints = this.bucketMatrix.noDatapoints;\n\n    if (this.annotationsPromise) {\n      this.annotationsPromise.then(\n        (result: { alertState: any; annotations: any }) => {\n          this.loading = false;\n          //this.alertState = result.alertState;\n          if (result.annotations && result.annotations.length > 0) {\n            this.annotations = result.annotations;\n          } else {\n            this.annotations = [];\n          }\n          this.render();\n        },\n        () => {\n          this.loading = false;\n          this.annotations = [];\n          this.render();\n        }\n      );\n    } else {\n      this.loading = false;\n      this.annotations = [];\n      this.render();\n    }\n  }\n\n  onInitEditMode() {\n    this.addEditorTab('Options', optionsEditorCtrl, 2);\n    this.addEditorTab('Tooltip', tooltipEditorCtrl, 3);\n    this.addEditorTab('About', 'public/plugins/flant-statusmap-panel/partials/about_editor.html', 4);\n    this.unitFormats = kbn.getUnitFormats();\n  }\n\n  // onRender will be called before StatusmapRenderer.onRender.\n  // Decide if warning should be displayed over cards.\n  onRender() {\n    if (!this.range || !this.data) {\n      this.noDatapoints = true;\n      return;\n    }\n\n    this.multipleValues = false;\n    if (!this.panel.useMax) {\n      if (this.bucketMatrix) {\n        this.multipleValues = this.bucketMatrix.multipleValues;\n      }\n    }\n\n    this.noColorDefined = false;\n    if (this.panel.color.mode === 'discrete') {\n      if (this.panel.seriesFilterIndex === -1) {\n        this.discreteExtraSeries.updateCardsValuesHasColorInfo();\n      } else {\n        this.discreteExtraSeries.updateCardsValuesHasColorInfoSingle();\n      }\n      if (this.bucketMatrix) {\n        this.noColorDefined = this.bucketMatrix.noColorDefined;\n      }\n    }\n\n    this.noDatapoints = false;\n    if (this.bucketMatrix) {\n      this.noDatapoints = this.bucketMatrix.noDatapoints;\n    }\n  }\n\n  onCardColorChange(newColor) {\n    this.panel.color.cardColor = newColor;\n    this.render();\n  }\n\n  onDataError() {\n    this.data = [];\n    this.annotations = [];\n    this.render();\n  }\n\n  postRefresh() {\n    this.noColorDefined = false;\n  }\n\n  link(scope, elem, attrs, ctrl) {\n    rendering(scope, elem, attrs, ctrl);\n  }\n\n  // Compatible with Grafana 7.0 overrides feature.\n  retrieveTimeVar() {\n    var time = this.timeSrv.timeRangeForUrl();\n    return 'from=' + time.from + '&to=' + time.to;\n  }\n\n  // convertToBuckets groups values in data into buckets by target and timestamp.\n  //\n  // data is a result from datasource. It is an array of timeseries and tables:\n  /* [\n    // timeseries\n    {\n      target: \"query alias\",\n      refId: \"A\",\n      datapoints: [\n        [0, 1582681239911],\n        [3, 158....],\n        ...\n      ],\n      tags?:{key: value,...}\n    },\n    // table\n    {\n      name: \"table name\",\n      refId: \"B\",\n      columns: [\n        {text: \"id\"},\n        {text: \"info\"},\n        ...\n      ],\n      rows: [\n        [1, \"123\"],\n        [2, \"44411\"],\n        ...\n      ]\n    },\n...\n  ]\n\n  to and from  a time range of the panel.\n  intervalMs  a calculated interval. It is used to split a time range.\n  */\n  convertDataToBuckets(\n    data: any,\n    from: number,\n    to: number,\n    intervalMs: number,\n    mostRecentBucket: boolean\n  ): BucketMatrix {\n    let bucketMatrix = new BucketMatrix();\n    bucketMatrix.rangeMs = to - from;\n    bucketMatrix.intervalMs = intervalMs;\n\n    if (!data || data.length === 0) {\n      // Mimic heatmap and graph 'no data' labels.\n      bucketMatrix.targets = ['1.0', '0.0', '-1.0'];\n      bucketMatrix.buckets['1.0'] = [];\n      bucketMatrix.buckets['0.0'] = [];\n      bucketMatrix.buckets['-1.0'] = [];\n      bucketMatrix.xBucketSize = 42;\n      bucketMatrix.noDatapoints = true;\n      return bucketMatrix;\n    }\n\n    let targetIndex: { [target: string]: number[] } = {};\n    let targetPartials: { [target: string]: string[] } = {};\n\n    // Group indicies of elements in data by target (y label).\n\n    // lodash version:\n    //_.map(data, (d, i) => {\n    //  targetIndex[d.target] = _.concat(_.toArray(targetIndex[d.target]), i);\n    //});\n\n    data.map((queryResult: any, i: number) => {\n      // Init yLabel as the query target\n      let yLabel = queryResult.target;\n\n      // Check if there is some labelTemplate configured\n      if (this.panel.yLabel.usingSplitLabel && this.panel.yLabel.delimiter !== '') {\n        let pLabels = queryResult.target.split(this.panel.yLabel.delimiter);\n\n        // Load all possible values as scoped vars and load them into targetPartials\n        // to be used on different components as Bucket and BucketMatrix props\n        let scopedVars = [];\n        scopedVars[`__y_label`] = { value: yLabel };\n        for (let i in pLabels) {\n          scopedVars[`__y_label_${i}`] = { value: pLabels[i] };\n        }\n\n        if (this.panel.yLabel.labelTemplate !== '') {\n          yLabel = this.templateSrv.replace(this.panel.yLabel.labelTemplate, scopedVars);\n        }\n\n        targetPartials[yLabel] = pLabels;\n      }\n\n      //reset if it already exists\n      if (!targetIndex.hasOwnProperty(yLabel)) {\n        targetIndex[yLabel] = [];\n      }\n      targetIndex[yLabel].push(i);\n    });\n\n    let targetKeys = _.keys(targetIndex);\n\n    //console.log (\"targetIndex: \", targetIndex, \"targetKeys: \", targetKeys);\n\n    let targetTimestampRanges: { [target: string]: { [timestamp: number]: number[] } } = {};\n\n    // Collect all timestamps for each target.\n    // Make map timestamp => [from, to]. from == previous ts, to == ts from datapoint.\n    targetKeys.map(target => {\n      let targetTimestamps: any[] = [];\n\n      for (let si = 0; si < targetIndex[target].length; si++) {\n        let s = data[targetIndex[target][si]];\n        _.map(s.datapoints, (datapoint, idx) => {\n          targetTimestamps.push(datapoint[TIME_INDEX] - from);\n        });\n      }\n\n      //console.log(\"timestamps['\"+target+\"'] = \", targetTimestamps);\n\n      targetTimestamps = _.uniq(targetTimestamps);\n\n      //console.log(\"uniq timestamps['\"+target+\"'] = \", targetTimestamps);\n\n      targetTimestampRanges[target] = [];\n      for (let i = targetTimestamps.length - 1; i >= 0; i--) {\n        let tsTo = targetTimestamps[i];\n        let tsFrom = 0;\n        if (tsTo < 0) {\n          tsFrom = tsTo - intervalMs;\n        } else {\n          if (i - 1 >= 0) {\n            // Set from to previous timestamp + 1ms;\n            tsFrom = targetTimestamps[i - 1] + 1;\n            // tfTo - tfFrom should not be more than intervalMs\n            let minFrom = tsTo - intervalMs;\n            if (tsFrom < minFrom) {\n              tsFrom = minFrom;\n            }\n          }\n        }\n        targetTimestampRanges[target][tsTo] = [tsFrom, tsTo];\n      }\n    });\n\n    // console.log (\"targetTimestampRanges: \", targetTimestampRanges);\n\n    // Create empty buckets using intervalMs to calculate ranges.\n    // If mostRecentBucket is set, create a bucket with a range \"to\":\"to\"\n    // to store most recent values.\n    targetKeys.map(target => {\n      let targetEmptyBuckets: any[] = [];\n\n      let lastTs = to - from;\n\n      if (mostRecentBucket) {\n        let topBucket = new Bucket();\n        topBucket.yLabel = target;\n        topBucket.relTo = lastTs;\n        topBucket.relFrom = lastTs;\n        topBucket.values = [];\n        topBucket.mostRecent = true;\n        if (targetTimestampRanges[target].hasOwnProperty(lastTs)) {\n          topBucket.relFrom = targetTimestampRanges[target][lastTs][0];\n          lastTs = topBucket.relFrom;\n        }\n        topBucket.to = topBucket.relTo + from;\n        topBucket.from = topBucket.relFrom + from;\n        targetEmptyBuckets.push(topBucket);\n      }\n\n      let idx = 0;\n      let bucketFrom = 0;\n      while (bucketFrom >= 0) {\n        let b = new Bucket();\n        b.yLabel = target;\n        b.pLabels = targetPartials[target];\n        b.relTo = lastTs - idx * intervalMs;\n        b.relFrom = lastTs - (idx + 1) * intervalMs;\n        b.to = b.relTo + from;\n        b.from = b.relFrom + from;\n        b.values = [];\n        bucketFrom = b.relFrom;\n        targetEmptyBuckets.push(b);\n        idx++;\n      }\n\n      targetEmptyBuckets.map((bucket, i) => {\n        bucket.xid = i;\n      });\n\n      bucketMatrix.buckets[target] = targetEmptyBuckets;\n    });\n\n    //console.log (\"bucketMatrix: \", bucketMatrix);\n\n    // Put values into buckets.\n    bucketMatrix.minValue = Number.MAX_VALUE;\n    bucketMatrix.maxValue = Number.MIN_SAFE_INTEGER;\n    targetKeys.map(target => {\n      targetIndex[target].map(dataIndex => {\n        let s = data[dataIndex];\n        s.datapoints.map((dp: any) => {\n          for (let i = 0; i < bucketMatrix.buckets[target].length; i++) {\n            if (bucketMatrix.buckets[target][i].belong(dp[TIME_INDEX])) {\n              bucketMatrix.buckets[target][i].put(dp[VALUE_INDEX]);\n            }\n          }\n        });\n      });\n      bucketMatrix.buckets[target].map(bucket => {\n        bucket.minValue = _.min(bucket.values);\n        bucket.maxValue = _.max(bucket.values);\n        if (bucket.minValue < bucketMatrix.minValue) {\n          bucketMatrix.minValue = bucket.minValue;\n        }\n        if (bucket.maxValue > bucketMatrix.maxValue) {\n          bucketMatrix.maxValue = bucket.maxValue;\n        }\n        bucket.value = bucket.maxValue;\n        if (bucket.values.length > 1) {\n          bucketMatrix.multipleValues = true;\n          bucket.multipleValues = true;\n\n          bucket.value =\n            this.panel.seriesFilterIndex !== -1 ? bucket.values[this.panel.seriesFilterIndex] : bucket.maxValue;\n        }\n      });\n    });\n\n    bucketMatrix.xBucketSize = Number.MIN_SAFE_INTEGER;\n    targetKeys.map(target => {\n      let bucketsLen: number = bucketMatrix.buckets[target].length;\n      if (bucketsLen > bucketMatrix.xBucketSize) {\n        bucketMatrix.xBucketSize = bucketsLen;\n      }\n    });\n\n    //console.log (\"bucketMatrix with values: \", bucketMatrix);\n\n    bucketMatrix.targets = targetKeys;\n    bucketMatrix.pLabels = targetPartials;\n    return bucketMatrix;\n  }\n}\n\nexport { StatusHeatmapCtrl, StatusHeatmapCtrl as PanelCtrl };\n"],"sourceRoot":""}