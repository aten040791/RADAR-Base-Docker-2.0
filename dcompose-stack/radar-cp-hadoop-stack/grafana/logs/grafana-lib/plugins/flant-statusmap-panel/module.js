/*! For license information please see module.js.LICENSE.txt */
define(["lodash","d3","@grafana/data","jquery","app/core/utils/kbn","app/core/core","@grafana/runtime","app/core/core_module","app/plugins/sdk","moment","app/core/time_series2","app/core/utils/ticks"],(function(e,t,a,r,i,n,o,c,s,f,d,l){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=16)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t){e.exports=n},,function(e,t){e.exports=o},function(e,t){e.exports=c},function(e,t){e.exports=s},function(e,t){e.exports=f},,function(e,t){e.exports=d},function(e,t){e.exports=l},,,function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"schemeCategory10",(function(){return y})),a.d(r,"schemeAccent",(function(){return x})),a.d(r,"schemeDark2",(function(){return w})),a.d(r,"schemePaired",(function(){return M})),a.d(r,"schemePastel1",(function(){return k})),a.d(r,"schemePastel2",(function(){return S})),a.d(r,"schemeSet1",(function(){return C})),a.d(r,"schemeSet2",(function(){return P})),a.d(r,"schemeSet3",(function(){return A})),a.d(r,"schemeTableau10",(function(){return T})),a.d(r,"interpolateBrBG",(function(){return pe})),a.d(r,"schemeBrBG",(function(){return ue})),a.d(r,"interpolatePRGn",(function(){return me})),a.d(r,"schemePRGn",(function(){return be})),a.d(r,"interpolatePiYG",(function(){return ve})),a.d(r,"schemePiYG",(function(){return ge})),a.d(r,"interpolatePuOr",(function(){return xe})),a.d(r,"schemePuOr",(function(){return ye})),a.d(r,"interpolateRdBu",(function(){return Me})),a.d(r,"schemeRdBu",(function(){return we})),a.d(r,"interpolateRdGy",(function(){return Se})),a.d(r,"schemeRdGy",(function(){return ke})),a.d(r,"interpolateRdYlBu",(function(){return Pe})),a.d(r,"schemeRdYlBu",(function(){return Ce})),a.d(r,"interpolateRdYlGn",(function(){return Te})),a.d(r,"schemeRdYlGn",(function(){return Ae})),a.d(r,"interpolateSpectral",(function(){return _e})),a.d(r,"schemeSpectral",(function(){return Re})),a.d(r,"interpolateBuGn",(function(){return Oe})),a.d(r,"schemeBuGn",(function(){return He})),a.d(r,"interpolateBuPu",(function(){return Ve})),a.d(r,"schemeBuPu",(function(){return We})),a.d(r,"interpolateGnBu",(function(){return Ee})),a.d(r,"schemeGnBu",(function(){return Ye})),a.d(r,"interpolateOrRd",(function(){return De})),a.d(r,"schemeOrRd",(function(){return Be})),a.d(r,"interpolatePuBuGn",(function(){return ze})),a.d(r,"schemePuBuGn",(function(){return Fe})),a.d(r,"interpolatePuBu",(function(){return Ne})),a.d(r,"schemePuBu",(function(){return Ge})),a.d(r,"interpolatePuRd",(function(){return Le})),a.d(r,"schemePuRd",(function(){return Ie})),a.d(r,"interpolateRdPu",(function(){return $e})),a.d(r,"schemeRdPu",(function(){return je})),a.d(r,"interpolateYlGnBu",(function(){return Xe})),a.d(r,"schemeYlGnBu",(function(){return qe})),a.d(r,"interpolateYlGn",(function(){return Qe})),a.d(r,"schemeYlGn",(function(){return Ue})),a.d(r,"interpolateYlOrBr",(function(){return Ke})),a.d(r,"schemeYlOrBr",(function(){return Je})),a.d(r,"interpolateYlOrRd",(function(){return et})),a.d(r,"schemeYlOrRd",(function(){return Ze})),a.d(r,"interpolateBlues",(function(){return at})),a.d(r,"schemeBlues",(function(){return tt})),a.d(r,"interpolateGreens",(function(){return it})),a.d(r,"schemeGreens",(function(){return rt})),a.d(r,"interpolateGreys",(function(){return ot})),a.d(r,"schemeGreys",(function(){return nt})),a.d(r,"interpolatePurples",(function(){return st})),a.d(r,"schemePurples",(function(){return ct})),a.d(r,"interpolateReds",(function(){return dt})),a.d(r,"schemeReds",(function(){return ft})),a.d(r,"interpolateOranges",(function(){return ht})),a.d(r,"schemeOranges",(function(){return lt})),a.d(r,"interpolateCividis",(function(){return ut})),a.d(r,"interpolateCubehelixDefault",(function(){return Rt})),a.d(r,"interpolateRainbow",(function(){return Wt})),a.d(r,"interpolateWarm",(function(){return _t})),a.d(r,"interpolateCool",(function(){return Ht})),a.d(r,"interpolateSinebow",(function(){return Bt})),a.d(r,"interpolateTurbo",(function(){return Dt})),a.d(r,"interpolateViridis",(function(){return zt})),a.d(r,"interpolateMagma",(function(){return Gt})),a.d(r,"interpolateInferno",(function(){return Nt})),a.d(r,"interpolatePlasma",(function(){return It}));var i={};a.r(i),a.d(i,"graphHover",(function(){return ya})),a.d(i,"graphHoverClear",(function(){return xa})),a.d(i,"renderComplete",(function(){return wa}));var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)};var o=function(){return(o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var i in t=arguments[a])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],r=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var s=a(0),f=a.n(s),d=a(2),l=a(7),h=a(12),u=a.n(h),p=function(){function e(e,t){this.panel=e,this.grafanaVersion=t}return e.prototype.getSeriesList=function(e){var t=[],a=e.dataList,r=e.range;if(!a||!a.length)return t;for(var i=0;i<a.length;i++){var n=a[i],c=Object(d.getTimeField)(n).timeField;if(c)for(var s=0;s<n.fields.length;s++){var f=n.fields[s];if(f.type===d.FieldType.number){var l=Object(d.getFieldDisplayName)(f,n,a),h=l;if(this.grafanaVersion>=8){var u=l.indexOf(" ");h=u>=0?l.slice(u):h}for(var p=[],b=0;b<n.length;b++)p.push([f.values.get(b),Object(d.dateTime)(c.values.get(b)).valueOf()]);var m=o(o({},this.toTimeSeries(f,h,i,s,p,t.length,r)),{target:h,refId:n.refId});t.push(m)}}}return t},e.prototype.toTimeSeries=function(e,t,a,r,i,n,o){var c=new u.a({datapoints:i||[],alias:t,unit:e.config?e.config.unit:void 0,dataFrameIndex:a,fieldIndex:r});if(i&&i.length>0&&o){var s=i[i.length-1][1],f=o.from;if(s-f.valueOf()<-1e4)i[0][1]-f.valueOf()<-1e4&&(c.isOutsideRange=!0)}return c},e.prototype.setPanelDefaultsForNewXAxisMode=function(){switch(this.panel.xaxis.mode){case"time":this.panel.bars=!1,this.panel.lines=!0,this.panel.points=!1,this.panel.legend.show=!0,this.panel.tooltip.shared=!0,this.panel.xaxis.values=[];break;case"series":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1,this.panel.xaxis.values=["total"];break;case"histogram":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1}},e.prototype.validateXAxisSeriesValue=function(){switch(this.panel.xaxis.mode){case"series":if(0===this.panel.xaxis.values.length)return void(this.panel.xaxis.values=["total"]);var e=this.getXAxisValueOptions({});return void(Object(s.find)(e,{value:this.panel.xaxis.values[0]})||(this.panel.xaxis.values=["total"]))}},e.prototype.getXAxisValueOptions=function(e){switch(this.panel.xaxis.mode){case"series":return[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Count",value:"count"}]}return[]},e.prototype.pluckDeep=function(e,t){for(var a=t.split("."),r=e,i=0;i<a.length;++i){if(!r[a[i]])return;r=r[a[i]]}return r},e}(),b=a(3),m=a.n(b),g=a(1),v=function(e){for(var t=e.length/6|0,a=new Array(t),r=0;r<t;)a[r]="#"+e.slice(6*r,6*++r);return a},y=v("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),x=v("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),w=v("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),M=v("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),k=v("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),S=v("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),C=v("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),P=v("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),A=v("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),T=v("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),R=function(e,t,a){e.prototype=t.prototype=a,a.constructor=e};function _(e,t){var a=Object.create(e.prototype);for(var r in t)a[r]=t[r];return a}function H(){}var O="\\s*([+-]?\\d+)\\s*",W="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",V="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y=/^#([0-9a-f]{3,8})$/,E=new RegExp("^rgb\\("+[O,O,O]+"\\)$"),B=new RegExp("^rgb\\("+[V,V,V]+"\\)$"),D=new RegExp("^rgba\\("+[O,O,O,W]+"\\)$"),F=new RegExp("^rgba\\("+[V,V,V,W]+"\\)$"),z=new RegExp("^hsl\\("+[W,V,V]+"\\)$"),G=new RegExp("^hsla\\("+[W,V,V,W]+"\\)$"),N={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function I(){return this.rgb().formatHex()}function L(){return this.rgb().formatRgb()}function j(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=Y.exec(e))?(a=t[1].length,t=parseInt(t[1],16),6===a?q(t):3===a?new J(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===a?X(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===a?X(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=E.exec(e))?new J(t[1],t[2],t[3],1):(t=B.exec(e))?new J(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=D.exec(e))?X(t[1],t[2],t[3],t[4]):(t=F.exec(e))?X(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=z.exec(e))?te(t[1],t[2]/100,t[3]/100,1):(t=G.exec(e))?te(t[1],t[2]/100,t[3]/100,t[4]):N.hasOwnProperty(e)?q(N[e]):"transparent"===e?new J(NaN,NaN,NaN,0):null}function q(e){return new J(e>>16&255,e>>8&255,255&e,1)}function X(e,t,a,r){return r<=0&&(e=t=a=NaN),new J(e,t,a,r)}function U(e){return e instanceof H||(e=j(e)),e?new J((e=e.rgb()).r,e.g,e.b,e.opacity):new J}function Q(e,t,a,r){return 1===arguments.length?U(e):new J(e,t,a,null==r?1:r)}function J(e,t,a,r){this.r=+e,this.g=+t,this.b=+a,this.opacity=+r}function K(){return"#"+ee(this.r)+ee(this.g)+ee(this.b)}function Z(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function ee(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function te(e,t,a,r){return r<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new re(e,t,a,r)}function ae(e){if(e instanceof re)return new re(e.h,e.s,e.l,e.opacity);if(e instanceof H||(e=j(e)),!e)return new re;if(e instanceof re)return e;var t=(e=e.rgb()).r/255,a=e.g/255,r=e.b/255,i=Math.min(t,a,r),n=Math.max(t,a,r),o=NaN,c=n-i,s=(n+i)/2;return c?(o=t===n?(a-r)/c+6*(a<r):a===n?(r-t)/c+2:(t-a)/c+4,c/=s<.5?n+i:2-n-i,o*=60):c=s>0&&s<1?0:o,new re(o,c,s,e.opacity)}function re(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}function ie(e,t,a){return 255*(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)}function ne(e,t,a,r,i){var n=e*e,o=n*e;return((1-3*e+3*n-o)*t+(4-6*n+3*o)*a+(1+3*e+3*n-3*o)*r+o*i)/6}R(H,j,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:I,formatHex:I,formatHsl:function(){return ae(this).formatHsl()},formatRgb:L,toString:L}),R(J,Q,_(H,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new J(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K,formatHex:K,formatRgb:Z,toString:Z})),R(re,(function(e,t,a,r){return 1===arguments.length?ae(e):new re(e,t,a,null==r?1:r)}),_(H,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new re(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new re(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*t,i=2*a-r;return new J(ie(e>=240?e-240:e+120,i,r),ie(e,i,r),ie(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var oe=e=>()=>e;function ce(e,t){return function(a){return e+a*t}}function se(e){return 1==(e=+e)?fe:function(t,a){return a-t?function(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(r){return Math.pow(e+r*t,a)}}(t,a,e):oe(isNaN(t)?a:t)}}function fe(e,t){var a=t-e;return a?ce(e,a):oe(isNaN(e)?t:e)}(function e(t){var a=se(t);function r(e,t){var r=a((e=Q(e)).r,(t=Q(t)).r),i=a(e.g,t.g),n=a(e.b,t.b),o=fe(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=n(t),e.opacity=o(t),e+""}}return r.gamma=e,r})(1);function de(e){return function(t){var a,r,i=t.length,n=new Array(i),o=new Array(i),c=new Array(i);for(a=0;a<i;++a)r=Q(t[a]),n[a]=r.r||0,o[a]=r.g||0,c[a]=r.b||0;return n=e(n),o=e(o),c=e(c),r.opacity=1,function(e){return r.r=n(e),r.g=o(e),r.b=c(e),r+""}}}var le=de((function(e){var t=e.length-1;return function(a){var r=a<=0?a=0:a>=1?(a=1,t-1):Math.floor(a*t),i=e[r],n=e[r+1],o=r>0?e[r-1]:2*i-n,c=r<t-1?e[r+2]:2*n-i;return ne((a-r/t)*t,o,i,n,c)}})),he=(de((function(e){var t=e.length;return function(a){var r=Math.floor(((a%=1)<0?++a:a)*t),i=e[(r+t-1)%t],n=e[r%t],o=e[(r+1)%t],c=e[(r+2)%t];return ne((a-r/t)*t,i,n,o,c)}})),e=>le(e[e.length-1])),ue=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(v),pe=he(ue),be=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(v),me=he(be),ge=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(v),ve=he(ge),ye=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(v),xe=he(ye),we=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(v),Me=he(we),ke=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(v),Se=he(ke),Ce=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(v),Pe=he(Ce),Ae=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(v),Te=he(Ae),Re=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(v),_e=he(Re),He=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(v),Oe=he(He),We=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(v),Ve=he(We),Ye=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(v),Ee=he(Ye),Be=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(v),De=he(Be),Fe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(v),ze=he(Fe),Ge=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(v),Ne=he(Ge),Ie=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(v),Le=he(Ie),je=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(v),$e=he(je),qe=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(v),Xe=he(qe),Ue=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(v),Qe=he(Ue),Je=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(v),Ke=he(Je),Ze=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(v),et=he(Ze),tt=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(v),at=he(tt),rt=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(v),it=he(rt),nt=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(v),ot=he(nt),ct=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(v),st=he(ct),ft=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(v),dt=he(ft),lt=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(v),ht=he(lt),ut=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"};const pt=Math.PI/180,bt=180/Math.PI;var mt=-.14861,gt=1.78277,vt=-.29227,yt=-.90649,xt=1.97294,wt=xt*yt,Mt=xt*gt,kt=gt*vt-yt*mt;function St(e){if(e instanceof Pt)return new Pt(e.h,e.s,e.l,e.opacity);e instanceof J||(e=U(e));var t=e.r/255,a=e.g/255,r=e.b/255,i=(kt*r+wt*t-Mt*a)/(kt+wt-Mt),n=r-i,o=(xt*(a-i)-vt*n)/yt,c=Math.sqrt(o*o+n*n)/(xt*i*(1-i)),s=c?Math.atan2(o,n)*bt-120:NaN;return new Pt(s<0?s+360:s,c,i,e.opacity)}function Ct(e,t,a,r){return 1===arguments.length?St(e):new Pt(e,t,a,null==r?1:r)}function Pt(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}function At(e){return function t(a){function r(t,r){var i=e((t=Ct(t)).h,(r=Ct(r)).h),n=fe(t.s,r.s),o=fe(t.l,r.l),c=fe(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=n(e),t.l=o(Math.pow(e,a)),t.opacity=c(e),t+""}}return a=+a,r.gamma=t,r}(1)}R(Pt,Ct,_(H,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Pt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Pt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*pt,t=+this.l,a=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new J(255*(t+a*(mt*r+gt*i)),255*(t+a*(vt*r+yt*i)),255*(t+a*(xt*r)),this.opacity)}}));At((function(e,t){var a=t-e;return a?ce(e,a>180||a<-180?a-360*Math.round(a/360):a):oe(isNaN(e)?t:e)}));var Tt=At(fe),Rt=Tt(Ct(300,.5,0),Ct(-240,.5,1)),_t=Tt(Ct(-100,.75,.35),Ct(80,1.5,.8)),Ht=Tt(Ct(260,.75,.35),Ct(80,1.5,.8)),Ot=Ct(),Wt=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ot.h=360*e-100,Ot.s=1.5-1.5*t,Ot.l=.8-.9*t,Ot+""},Vt=Q(),Yt=Math.PI/3,Et=2*Math.PI/3,Bt=function(e){var t;return e=(.5-e)*Math.PI,Vt.r=255*(t=Math.sin(e))*t,Vt.g=255*(t=Math.sin(e+Yt))*t,Vt.b=255*(t=Math.sin(e+Et))*t,Vt+""},Dt=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"};function Ft(e){var t=e.length;return function(a){return e[Math.max(0,Math.min(t-1,Math.floor(a*t)))]}}var zt=Ft(v("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Gt=Ft(v("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Nt=Ft(v("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),It=Ft(v("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Lt=new Array(3).concat("91cf60ffffbffc8d59","1a9641a6d96afdae61d7191c","1a9641a6d96affffbffdae61d7191c","1a985091cf60d9ef8bfee08bfc8d59d73027","1a985091cf60d9ef8bffffbffee08bfc8d59d73027","1a985066bd63a6d96ad9ef8bfee08bfdae61f46d43d73027","1a985066bd63a6d96ad9ef8bffffbffee08bfdae61f46d43d73027","0068371a985066bd63a6d96ad9ef8bfee08bfdae61f46d43d73027a50026","0068371a985066bd63a6d96ad9ef8bffffbffee08bfdae61f46d43d73027a50026").map((function(e){for(var t=e.length/6|0,a=new Array(t),r=0;r<t;)a[r]="#"+e.slice(6*r,6*++r);return a})),jt=g.interpolateRgbBasis(Lt[Lt.length-1]),$t=o(o({},r),{interpolateGnYlRd:jt}),qt=a(5),Xt=a(13),Ut=a(8),Qt=a.n(Ut);function Jt(e,t,a,r,i,n,o){var c=m()(e).find("svg"),s=g.select(c.get(0));if(!(o<=0||0===c.get(0).childNodes.length)){var d=g.scaleLinear().domain([a,r]).range([0,o]),l=function(e,t,a,r){for(var i=t-e,n=Object(Xt.tickStep)(e,t,3),o=Math.round(i/n),c=[],s=0;s<o;s++){var d=n*s+e;aa(r,d,n)?c.push(r):(r<d&&c.push(r),aa(a,d,n)?c.push(a):(a<d&&c.push(a),c.push(d)))}aa(a,t,n)||c.push(a);return c.push(t),c=f.a.sortBy(f.a.uniq(c))}(a,r,i,n),h=g.axisBottom(d).tickValues(l).tickSize(2),u=c.find(":first-child"),p=ta(c)+2,b=ea(u);g.select(c.get(0)).append("g").attr("class","axis").attr("transform","translate("+b+","+p+")").call(h),s.select(".axis").select(".domain").remove()}}function Kt(e){m()(e).find("svg").empty()}function Zt(e,t,a){void 0===a&&(a=0);var r=$t[e.value],i="always"===e.invert||"dark"===e.invert&&!qt.contextSrv.user.lightTheme,n=i?t:a,o=i?a:t;return g.scaleSequential(r).domain([n,o])}function ea(e){var t=e.get(0);return t&&t.x&&t.x.baseVal?t.x.baseVal.value:0}function ta(e){var t=e.get(0);return t&&t.height&&t.height.baseVal?t.height.baseVal.value:0}function aa(e,t,a){return Math.abs(e-t)<.3*a}Qt.a.directive("optionsColorLegend",(function(){return{restrict:"E",template:'<div class="status-heatmap-color-legend"><svg width="16.8rem" height="24px"></svg></div>',link:function(e,t,a){var r=e.ctrl,i=e.ctrl.panel;function n(){var e=m()(t).find("svg"),a=Math.floor(e.outerWidth());if("spectrum"===i.color.mode){var n=Zt(f.a.find(r.colorSchemes,{value:i.color.colorScheme}),a);!function(e,t){var a=m()(e).find("svg"),r=g.select(a.get(0));Kt(e);var i=Math.floor(a.outerWidth()),n=a.attr("height");if(i){var o=g.range(0,i,2);r.selectAll(".status-heatmap-color-legend-rect").data(o).enter().append("rect").attr("x",(function(e){return e})).attr("y",0).attr("width",3).attr("height",n).attr("stroke-width",0).attr("fill",(function(e){return t(e)}))}}(t,n)}else if("opacity"===i.color.mode){var o=i.color;!function(e,t){var a=m()(e).find("svg"),r=g.select(a.get(0));Kt(e);var i=Math.floor(a.outerWidth()),n=a.attr("height");if(i){var o;"linear"===t.colorScale?o=g.scaleLinear().domain([0,i]).range([0,1]):"sqrt"===t.colorScale&&(o=g.scalePow().exponent(t.exponent).domain([0,i]).range([0,1]));var c=g.range(0,i,2);r.selectAll(".status-heatmap-opacity-legend-rect").data(c).enter().append("rect").attr("x",(function(e){return e})).attr("y",0).attr("width",3).attr("height",n).attr("stroke-width",0).attr("fill",t.cardColor).style("opacity",(function(e){return o(e)}))}}(t,o)}}n(),r.events.on(d.PanelEvents.render,(function(){n()}))}}})),Qt.a.directive("statusHeatmapLegend",(function(){return{restrict:"E",template:'<div class="status-heatmap-color-legend"><svg width="100px" height="6px"></svg></div>',link:function(e,t,a){var r=e.ctrl,i=e.ctrl.panel;function n(){if(Kt(t),r.panel.legend.show&&r.bucketMatrix){var e=r.bucketMatrix.minValue,a=r.bucketMatrix.maxValue,n=null!=i.color.max?i.color.max:a,o=null!=i.color.min?i.color.min:e;if(r.bucketMatrix.noDatapoints&&(a=null!=i.color.max?n=100:100,e=null!=i.color.min?o=0:0),"spectrum"===i.color.mode){var c=f.a.find(r.colorSchemes,{value:i.color.colorScheme});!function(e,t,a,r,i,n){var o=m()(e).find("svg"),c=g.select(o.get(0));Kt(e);var s=Math.floor(o.outerWidth())-30,f=o.attr("height"),d=(r-a)/(s/2),l=s/(r-a),h=g.range(a,r,d),u=Zt(t,i,n);c.selectAll(".status-heatmap-color-legend-rect").data(h).enter().append("rect").attr("x",(function(e){return(e-a)*l+10})).attr("y",0).attr("width",3).attr("height",f).attr("stroke-width",0).attr("fill",(function(e){return u(e)})),Jt(e,u,a,r,i,n,s)}(t,c,e,a,n,o)}else if("opacity"===i.color.mode){var s=i.color;!function(e,t,a,r,i,n){var o=m()(e).find("svg"),c=g.select(o.get(0));Kt(e);var s=Math.floor(o.outerWidth())-30,f=o.attr("height"),d=(r-a)/(s/2),l=s/(r-a),h=g.range(a,r,d),u=function(e,t,a){void 0===a&&(a=0);var r;"linear"===e.colorScale?r=g.scaleLinear().domain([a,t]).range([0,1]):"sqrt"===e.colorScale&&(r=g.scalePow().exponent(e.exponent).domain([a,t]).range([0,1]));return r}(t,i,n);c.selectAll(".status-heatmap-opacity-legend-rect").data(h).enter().append("rect").attr("x",(function(e){return e*l+10})).attr("y",0).attr("width",3).attr("height",f).attr("stroke-width",0).attr("fill",t.cardColor).style("opacity",(function(e){return u(e)})),Jt(e,u,a,r,i,n,s)}(t,s,e,a,n,o)}else if("discrete"===i.color.mode){s=i.color;!function(e,t,a){var r=m()(e).find("svg"),i=g.select(r.get(0));Kt(e);var n=t.thresholds,o=f.a.map(n,(function(e){return e.tooltip})),c=n.length,s=m()(e).parent().parent().parent().find(".statusmap-panel").find("svg").attr("width"),d=parseInt(s,10),l=[];i.selectAll(".hidden-texts").data(o).enter().append("text").attr("class","axis tick hidden-texts").attr("font-family","sans-serif").text((function(e){return e})).each((function(e,t){var a=this.getBBox().width;l.push(a)})),i.selectAll(".hidden-texts").remove();var h=Math.floor(f.a.min([d-30,(f.a.max(l)+3)*c]));r.attr("width",h);var u=r.attr("height"),p=Math.floor(h/c),b=g.range(c);i.selectAll(".status-heatmap-color-legend-rect").data(b).enter().append("rect").attr("x",(function(e){return e*p})).attr("y",0).attr("width",p+1).attr("height",u).attr("stroke-width",0).attr("fill",(function(e){return a.getDiscreteColor(e)})),function(e,t,a){var r=t.thresholds,i=m()(e).find("svg"),n=g.select(i.get(0));if(a<=0||0===i.get(0).childNodes.length)return;for(var o=r.length,c=Math.floor(a/o),s=g.scaleLinear().domain([0,o]).range([0,a]),f=[],d=[],l=0;l<r.length;l++)f.push(r[l].value),d.push(r[l].tooltip);var h=g.axisBottom(s).tickValues(g.range(0,o,1)).tickSize(2).tickFormat((function(e){var t=Math.floor(e.valueOf()),a=d[t];return void 0!==a||void 0!==(a=f[t])?""+a:"n/a"})),u=i.find(":first-child"),p=ta(i)+2,b=ea(u)+Math.floor(c/2);g.select(i.get(0)).append("g").attr("class","axis").attr("transform","translate("+b+","+p+")").call(h),n.select(".axis").select(".domain").remove()}(e,t,h)}(t,s,r.discreteExtraSeries)}}}n(),r.events.on(d.PanelEvents.render,(function(){n()}))}}}));var ra=a(4),ia=a.n(ra),na=function(){function e(e){e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.unitFormats=ia.a.getUnitFormats()}return e.$inject=["$scope"],e.prototype.setUnitFormat=function(e){this.panel.data.unitFormat=e.value,this.panelCtrl.render()},e.prototype.render=function(){this.panelCtrl.render()},e.prototype.onAddThreshold=function(){this.panel.color.thresholds.push({color:this.panel.defaultColor}),this.render()},e.prototype.onRemoveThreshold=function(e){this.panel.color.thresholds.splice(e,1),this.render()},e.prototype.onRemoveThresholds=function(){this.panel.color.thresholds=[],this.render()},e.prototype.onAddThreeLights=function(){this.panel.color.thresholds.push({color:"red",value:2,tooltip:"error"}),this.panel.color.thresholds.push({color:"yellow",value:1,tooltip:"warning"}),this.panel.color.thresholds.push({color:"green",value:0,tooltip:"ok"}),this.render()},e.prototype.onAddSolarized=function(){this.panel.color.thresholds.push({color:"#b58900",value:0,tooltip:"yellow"}),this.panel.color.thresholds.push({color:"#cb4b16",value:1,tooltip:"orange"}),this.panel.color.thresholds.push({color:"#dc322f",value:2,tooltip:"red"}),this.panel.color.thresholds.push({color:"#d33682",value:3,tooltip:"magenta"}),this.panel.color.thresholds.push({color:"#6c71c4",value:4,tooltip:"violet"}),this.panel.color.thresholds.push({color:"#268bd2",value:5,tooltip:"blue"}),this.panel.color.thresholds.push({color:"#2aa198",value:6,tooltip:"cyan"}),this.panel.color.thresholds.push({color:"#859900",value:7,tooltip:"green"}),this.render()},e}();function oa(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/flant-statusmap-panel/partials/options_editor.html",controller:na}}var ca={urlText:"",urlTemplate:"",urlIcon:"external-link",urlToLowerCase:!0,valueDateFormat:""},sa=function(){function e(e){e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel}return e.$inject=["$scope"],e.prototype.render=function(){this.panelCtrl.render()},e.prototype.onAddUrl=function(){this.panel.tooltip.items.push(Object.assign({},ca)),this.render()},e.prototype.onRemoveUrl=function(e){this.panel.tooltip.items.splice(e,1),this.render()},e.prototype.onRemoveUrls=function(){this.panel.tooltip.items=[],this.render()},e.prototype.getFAIconClasses=function(){return["external-link","plus","anchor","ban","globe","gear","cloud","download","cloud-download"]},e.prototype.getValueDateFormats=function(){return["YYYY/MM/DD/HH_mm_ss","YYYYMMDDHHmmss","YYYY-MM-DD-HH-mm-ss"]},e}();function fa(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/flant-statusmap-panel/partials/tooltip_editor.html",controller:sa}}function da(e){if(f.a.has(e,"statusmap")){if("v1"===e.statusmap.ConfigVersion)return}else!function(e){var t,a;if(f.a.has(e,"xAxis.labelFormat")&&delete e.xAxis.labelFormat,f.a.has(e,"xAxis.minBucketWidthToShowWeekends")&&delete e.xAxis.minBucketWidthToShowWeekends,f.a.has(e,"xAxis.showCrosshair")&&delete e.xAxis.showCrosshair,f.a.has(e,"xAxis.showWeekends")&&delete e.xAxis.showWeekends,f.a.has(e,"yAxis.showCrosshair")&&delete e.yAxis.showCrosshair,f.a.has(e,"data.unitFormat")&&delete e.data,f.a.has(e,"cards.cardSpacing")&&(f.a.has(e,"cards.cardVSpacing")||e.cards.cardSpacing&&(e.cards.cardVSpacing=e.cards.cardSpacing,e.cards.cardHSpacing=e.cards.cardSpacing),delete e.cards.cardSpacing),f.a.has(e,"usingUrl")&&(f.a.has(e,"tooltip.freezeOnClick")||(e.tooltip.freezeOnClick=e.usingUrl),delete e.usingUrl),f.a.has(e,"urls")){if(!f.a.has(e,"tooltip.items")){e.tooltip.items=[];var r=!0;if(0===e.urls.length&&(r=!1),1===e.urls.length)""===(o=e.urls[0]).base_url&&""===o.label&&(r=!1);if(r){e.tooltip.showItems=!0;try{for(var i=c(e.urls),n=i.next();!n.done;n=i.next()){var o=n.value,s={urlTemplate:f.a.toString(o.base_url),urlText:f.a.toString(o.label),urlIcon:f.a.toString(o.icon_fa),urlToLowerCase:o.forcelowercase,valueDateFormat:""};if(""!==s.urlTemplate){s.urlTemplate=f.a.replace(o.base_url,/\$time/g,"&${__url_time_range}"),s.urlTemplate=f.a.replace(s.urlTemplate,/\$series_label/,"${__y_label}");var d="__value";if(!0===o.useExtraSeries){o.extraSeries.index>-1&&(d+="_"+o.extraSeries.index);var l=f.a.toString(o.extraSeries.format);"YYYY/MM/DD/HH_mm_ss"===l&&(d+="_date",s.valueDateFormat=l)}s.urlTemplate=f.a.replace(s.urlTemplate,/\$series_extra/,"${"+d+"}")}e.tooltip.items.push(s)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(t)throw t.error}}}}delete e.urls}e.statusmap={ConfigVersion:"v1"}}(e)}var la=a(9),ha=function(){function e(){this.id=0,this.values=[],this.columns=[],this.multipleValues=!1,this.noColorDefined=!1,this.y="",this.yLabel="",this.pLabels=[],this.x=0,this.xid=0,this.from=0,this.to=0,this.relFrom=0,this.relTo=0,this.mostRecent=!1,this.minValue=0,this.maxValue=0,this.value=0}return e.prototype.belong=function(e){return e>=this.from&&e<=this.to},e.prototype.put=function(e){this.values.push(e)},e.prototype.done=function(){},e.prototype.isEmpty=function(){return 0===this.values.length},e}(),ua=function(){function e(){this.buckets={},this.maxValue=0,this.minValue=0,this.multipleValues=!1,this.noColorDefined=!1,this.noDatapoints=!1,this.targets=[],this.pLabels={},this.rangeMs=0,this.intervalMs=0,this.xBucketSize=0}return e.prototype.get=function(e,t){return e in this.buckets&&t in this.buckets[e]?this.buckets[e][t]:new ha},e.prototype.hasData=function(){var e=this,t=!1;return this.targets.length>0&&this.targets.map((function(a){e.buckets[a].length>0&&(t=!0)})),t},e}(),pa=function(){function e(){this.defaultPageSize=-1,this.pageSize=-1,this.currentPage=0;var e=new ua;this.bucketMatrix=e}return e.prototype.targets=function(){return this.enable?this.bucketMatrix.targets.slice(this.pageSize*this.currentPage,this.pageSize*(this.currentPage+1)):this.bucketMatrix.targets},e.prototype.buckets=function(){if(!this.enable)return this.bucketMatrix.buckets;var e={},t=this;return this.targets().map((function(a){e[a]=t.bucketMatrix.buckets[a]})),e},e.prototype.setEnable=function(e){this.enable=e},e.prototype.setCurrent=function(e){this.currentPage=e},e.prototype.setDefaultPageSize=function(e){this.defaultPageSize=e},e.prototype.setPageSize=function(e){this.pageSize=e},e.prototype.pages=function(){return Math.ceil(this.totalRows()/this.pageSize)},e.prototype.totalRows=function(){return this.bucketMatrix.targets.length},e.prototype.pageStartRow=function(){return this.enable?this.pageSize*this.currentPage+1:1},e.prototype.pageEndRow=function(){if(!this.enable)return this.totalRows();var e=this.pageSize*(this.currentPage+1);return e>this.totalRows()?this.totalRows():e},e.prototype.hasNext=function(){return!!this.enable&&!((this.currentPage+1)*this.pageSize>=this.totalRows())},e.prototype.hasPrev=function(){return!!this.enable&&this.currentPage>0},e.prototype.switchToNext=function(){this.hasNext()&&(this.currentPage=this.currentPage+1)},e.prototype.switchToPrev=function(){this.hasPrev()&&(this.currentPage=this.currentPage-1)},e}(),ba=a(10),ma=a.n(ba),ga=function(){function e(e,t){this.scope=t,this.dashboard=t.ctrl.dashboard,this.panelCtrl=t.ctrl,this.panel=t.ctrl.panel,this.panelElem=e,this.mouseOverBucket=!1,this.originalFillColor=null,e.on("mouseover",this.onMouseOver.bind(this)),e.on("mouseleave",this.onMouseLeave.bind(this))}return e.prototype.onMouseOver=function(e){this.panel.tooltip.show&&this.scope.ctrl.data&&!f.a.isEmpty(this.scope.ctrl.data)&&(this.tooltip||(this.add(),this.move(e,this.tooltip)))},e.prototype.onMouseLeave=function(){this.destroy()},e.prototype.onMouseMove=function(e){this.panel.tooltip.show&&this.move(e,this.tooltip)},e.prototype.add=function(){this.tooltip=g.select("body").append("div").attr("class","graph-tooltip statusmap-tooltip")},e.prototype.destroy=function(){this.tooltip&&this.tooltip.remove(),this.tooltip=null},e.prototype.removeFrozen=function(){this.tooltipFrozen&&(this.tooltipFrozen.remove(),this.tooltipFrozen=null)},e.prototype.showFrozen=function(e){this.removeFrozen(),this.tooltipFrozen=g.select(this.panelElem[0]).append("div").attr("class","graph-tooltip statusmap-tooltip statusmap-tooltip-frozen"),this.displayTooltip(e,this.tooltipFrozen,!0),this.moveRelative(e,this.tooltipFrozen)},e.prototype.show=function(e){this.panel.tooltip.show&&this.tooltip&&(e.panelRelY||(this.displayTooltip(e,this.tooltip,!1),this.move(e,this.tooltip)))},e.prototype.displayTooltip=function(e,t,a){var r,i,n=g.select(e.target),o=n.attr("yid"),s=n.attr("xid"),d=this.panelCtrl.bucketMatrix.get(o,s);if(d&&!d.isEmpty()){var l=d.to,h=d.yLabel,u=d.pLabels,p=d.value,b=d.values,m="";a&&(m='\n<a class="pointer pull-right small tooltip-close">\n      <i class="fa fa-remove"></i>\n</a>\n');var v='<div class="graph-tooltip-time">'+this.dashboard.formatDate(+l,"YYYY-MM-DD HH:mm:ss")+m+"</div>";if("discrete"===this.panel.color.mode){var y=void 0,x="status:";(y=this.panel.seriesFilterIndex>=0?this.panelCtrl.discreteExtraSeries.convertValueToTooltips(p):this.panelCtrl.discreteExtraSeries.convertValuesToTooltips(b)).length>1&&(x="statuses:"),v+="\n      <div>\n        name: <b>"+h+"</b>\n        <br>\n        <span>"+x+"</span>\n        <ul>\n          "+f.a.join(f.a.map(y,(function(e){return'<li style="background-color: '+e.color+'; text-align:center" class="discrete-item">'+e.tooltip+"</li>"})),"")+"\n        </ul>\n      </div>"}else 1===b.length?v+="<div>\n      name: <b>"+h+"</b> <br>\n      value: <b>"+p+"</b> <br>\n      </div>":v+="<div>\n      name: <b>"+h+"</b> <br>\n      values:\n      <ul>\n        "+f.a.join(f.a.map(b,(function(e){return"<li>"+e+"</li>"})),"")+"\n      </ul>\n      </div>";if(v+='<div class="statusmap-histogram"></div>',this.panel.tooltip.showItems){for(var w=JSON.parse(JSON.stringify(this.panel.tooltip.items)),M={},k=0;k<d.values.length;k++)M["__value_"+k]={value:d.values[k]};for(var k in M.__value={value:d.value},M.__y_label={value:h},M.__y_label_trim={value:h.trim()},M.__url_time_range={value:this.panelCtrl.retrieveTimeVar()},u)M["__y_label_"+k]={value:u[k]};var S=Math.ceil(.012*(d.to-d.from));M.__bucket_from={value:d.from-S},M.__bucket_to={value:d.to+S};try{for(var C=c(w),P=C.next();!P.done;P=C.next()){var A=P.value;if(f.a.isEmpty(A.urlTemplate))A.link="#";else{var T=A.valueDateFormat;""===T&&(T="YYYY/MM/DD/HH_mm_ss");for(k=0;k<d.values.length;k++)M["__value_"+k+"_date"]={value:this.dashboard.formatDate(+d.values[k],T)};M.__value_date={value:this.dashboard.formatDate(+d.value,T)},A.link=this.panelCtrl.templateSrv.replace(A.urlTemplate,M),A.urlToLowerCase&&(A.link=A.link.toLowerCase())}A.label=A.urlText,f.a.isEmpty(A.label)&&(A.label=f.a.isEmpty(A.urlTemplate)?"Empty URL":f.a.truncate(A.link))}}catch(e){r={error:e}}finally{try{P&&!P.done&&(i=C.return)&&i.call(C)}finally{if(r)throw r.error}}if(this.panel.tooltip.showCustomContent)v+="<div>"+this.panelCtrl.templateSrv.replace(this.panel.tooltip.customContent,M)+"</div>";v+=f.a.join(f.a.map(w,(function(e){return'\n          <div>\n            <a href="'+e.link+'" target="_blank">\n            <div class="dashlist-item">\n            <p class="dashlist-link dashlist-link-dash-db">\n              <span style="word-wrap: break-word;" class="dash-title">'+e.label+'</span><span class="dashlist-star">\n              <i class="fa fa-'+e.urlIcon+'"></i>\n            </span></p> </div></a><div>'})),"\n")}if(!this.panel.useMax&&d.multipleValues&&(v+="<div><b>Error:</b> "+this.panelCtrl.dataWarnings.multipleValues.title+"</div>"),"discrete"===this.panel.color.mode&&d.noColorDefined){var R=this.panelCtrl.discreteExtraSeries.getNotColoredValues(b);v+="<div><b>Error:</b> "+this.panelCtrl.dataWarnings.noColorDefined.title+"\n        <br>not colored values:\n        <ul>\n          "+f.a.join(f.a.map(R,(function(e){return"<li>"+e+"</li>"})),"")+"\n        </ul>\n        </div>"}t.html(v),a&&(t.on("click",(function(){g.event.stopPropagation()})).on("mousedown",(function(){g.event.stopPropagation()})).on("mouseup",(function(){g.event.stopPropagation()})),t.select("a.tooltip-close").on("click",this.removeFrozen.bind(this)))}else this.destroy()},e.prototype.move=function(e,t){if(t){var a=m()(t.node())[0],r=a.clientWidth;this.tooltipWidth=r;var i=a.clientHeight,n=e.pageX+30,o=e.pageY+5;return e.pageX+r+40>window.innerWidth&&(n=e.pageX-r-30),e.pageY-window.pageYOffset+i+20>window.innerHeight&&(o=e.pageY-i-5),t.style("left",n+"px").style("top",o+"px")}},e.prototype.moveRelative=function(e,t){if(t){var a=e.pageX-this.panelElem.offset().left,r=e.pageY-this.panelElem.offset().top,i=this.panelElem.width(),n=this.panelElem.height(),o=this.tooltipWidth+25,c=a+30;c+o>i&&(c=i-o),c<0&&(c=0);var s=-(n-r+5);return t.style("left",c+"px").style("top",s+"px").style("width",o+"px")}},e}(),va=function(){function e(e,t){this.scope=t,this.dashboard=t.ctrl.dashboard,this.panelCtrl=t.ctrl,this.panel=t.ctrl.panel,this.mouseOverAnnotationTick=!1,e.on("mouseover",this.onMouseOver.bind(this)),e.on("mouseleave",this.onMouseLeave.bind(this))}return e.prototype.onMouseOver=function(e){this.panel.tooltip.show&&this.scope.ctrl.data&&!f.a.isEmpty(this.scope.ctrl.data)&&(this.tooltip||(this.add(),this.move(e)))},e.prototype.onMouseLeave=function(){this.destroy()},e.prototype.onMouseMove=function(e){this.panel.tooltip.show&&this.move(e)},e.prototype.add=function(){this.tooltipBase=g.select("body").append("div").attr("class","statusmap-annotation-tooltip drop drop-popover drop-popover--annotation drop-element drop-enabled drop-target-attached-center drop-open drop-open-transitionend drop-after-open").style("position","absolute"),this.tooltip=this.tooltipBase.append("div").attr("class","drop-content").append("div").append("annotation-tooltip").append("div").attr("class","graph-annotation")},e.prototype.destroy=function(){this.tooltip&&this.tooltip.remove(),this.tooltip=null,this.tooltipBase&&this.tooltipBase.remove(),this.tooltipBase=null},e.prototype.show=function(e){if(this.panel.tooltip.show&&this.tooltip){var t=g.select(e.target).attr("annoId");if(t){var a=this.panelCtrl.annotations[t];if(a){var r=this.dashboard.formatDate(a.time,"YYYY-MM-DD HH:mm:ss"),i=a.text,n=[];a.tags&&(n=f.a.map(a.tags,(function(e){return{text:e,backColor:"rgb(63, 43, 91)",borderColor:"rgb(101, 81, 129)"}})));var o='<div class="graph-annotation__header">\n      <span class="graph-annotation__title"></span>\n    <span class="graph-annotation__time">'+r+'</span></div>\n    <div class="graph-annotation__body">\n      <div>'+i+"</div>\n      "+f.a.join(f.a.map(n,(function(e){return'<span class="label label-tag small" style="background-color: '+e.backColor+"; border-color: "+e.borderColor+'">'+e.text+"</span>"})),"")+'\n    </div>\n      <div class="statusmap-histogram"></div>';this.tooltip.html(o),this.move(e)}else this.destroy()}else this.destroy()}},e.prototype.move=function(e){if(this.tooltipBase){var t=m()(this.tooltipBase.node())[0],a=t.clientWidth,r=t.clientHeight,i=e.pageX-a/2,n=e.pageY+10;return e.pageX+a/2+10>window.innerWidth&&(i=e.pageX-a-30),e.pageY-window.pageYOffset+r+20>window.innerHeight&&(n=e.pageY-r-10),this.tooltipBase.style("left",i+"px").style("top",n+"px")}},e}(),ya=Object(d.eventFactory)("statusmap-graph-hover"),xa=Object(d.eventFactory)("statusmap-graph-hover-clear"),wa=Object(d.eventFactory)("statusmap-render-complete");var Ma=function(){function e(e,t,a,r){this.scope=e,this.elem=t,this.ctrl=r,this.width=0,this.height=0,this.chartWidth=0,this.chartHeight=0,this.chartTop=0,this.chartBottom=0,this.yAxisWidth=0,this.xAxisHeight=0,this.cardVSpacing=0,this.cardHSpacing=0,this.cardRound=0,this.cardWidth=0,this.cardHeight=0,this.xGridSize=0,this.yGridSize=0,this.dataRangeWidingFactor=1.2,this.$heatmap=this.elem.find(".statusmap-panel"),this.tooltip=new ga(this.$heatmap,this.scope),this.annotationTooltip=new va(this.$heatmap,this.scope),this.yOffset=0,this.selection={active:!1,x1:-1,x2:-1},this.padding={left:0,right:0,top:0,bottom:0},this.margin={left:25,right:15,top:10,bottom:20},this.ctrl.events.on(d.PanelEvents.render,this.onRender.bind(this)),this.ctrl.tickValueFormatter=this.tickValueFormatter.bind(this),qt.appEvents.on(i.graphHover,this.onGraphHover.bind(this),this.scope),qt.appEvents.on(i.graphHoverClear,this.onGraphHoverClear.bind(this),this.scope),this.$heatmap.on("mousedown",this.onMouseDown.bind(this)),this.$heatmap.on("mousemove",this.onMouseMove.bind(this)),this.$heatmap.on("mouseleave",this.onMouseLeave.bind(this)),this.$heatmap.on("click",this.onMouseClick.bind(this))}return e.prototype.onGraphHoverClear=function(){this.clearCrosshair()},e.prototype.onGraphHover=function(e){this.drawSharedCrosshair(e.pos)},e.prototype.onRender=function(){this.render(),this.ctrl.renderingCompleted()},e.prototype.setElementHeight=function(){try{var e=this.ctrl.height||this.panel.height||this.ctrl.row.height;return f.a.isString(e)&&(e=parseInt(e.replace("px",""),10)),this.panel.usingPagination?e-=this.panel.legend.show?70:40:e-=this.panel.legend.show?32:4,this.$heatmap.css("height",e+"px"),!0}catch(e){return!1}},e.prototype.getYAxisWidth=function(e){var t=e.selectAll(".axis-y text").nodes(),a=f.a.max(f.a.map(t,(function(e){return e.getBBox().width})));return Math.ceil(a)},e.prototype.getXAxisHeight=function(e){if(e.select(".axis-x line").empty())return 30;var t=parseFloat(e.select(".axis-x line").attr("y2"));return parseFloat(e.attr("height"))-t},e.prototype.addXAxis=function(){this.scope.xScale=this.xScale=g.scaleTime().domain([this.timeRange.from,this.timeRange.to]).range([this.xGridSize/2,this.chartWidth-this.xGridSize/2]);var e,t=this.chartWidth/100,a=function(e,t,a){if(t&&a&&e){var r=a-t,i=r/e/1e3;return i<=45?"%H:%M:%S":i<=7200||r<=864e5?"%H:%M":i<=8e4?"%m/%d %H:%M":i<=2419200||r<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"}(t,this.timeRange.from,this.timeRange.to);e="utc"===this.ctrl.dashboard.getTimezone()?g.utcFormat(a):g.timeFormat(a);var r=g.axisBottom(this.xScale).ticks(t).tickFormat(e).tickPadding(10).tickSize(this.chartHeight),i=this.chartTop,n=this.yAxisWidth;this.heatmap.append("g").attr("class","axis axis-x").attr("transform","translate("+n+","+i+")").call(r),this.heatmap.select(".axis-x").select(".domain").remove()},e.prototype.getYScale=function(e){var t=[],a=this.chartHeight/e.length;t.push(a);for(var r=1;r<e.length;r++)t.push(a*(r+1));return g.scaleOrdinal().domain(e).range(t)},e.prototype.getYAxisScale=function(e){var t=[],a=this.chartHeight/e.length;t.push(this.yOffset);for(var r=1;r<e.length;r++)t.push(a*r+this.yOffset);return g.scaleOrdinal().domain(e).range(t)},e.prototype.addYAxis=function(){var e=this.bucketMatrixPager.targets();"a  z"===this.panel.yAxisSort?e.sort((function(e,t){return e.localeCompare(t,"en",{ignorePunctuation:!1,numeric:!0})})):"z  a"===this.panel.yAxisSort&&e.sort((function(e,t){return t.localeCompare(e,"en",{ignorePunctuation:!1,numeric:!0})}));var t=this.getYAxisScale(e);this.scope.yScale=this.yScale=this.getYScale(e);var a=g.axisLeft(t).tickValues(e).tickSizeInner(0-this.width).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(a);var r=this.margin.top,i=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+i+","+r+")"),this.heatmap.select(".axis-y").select(".domain").remove(),this.heatmap.select(".axis-y").selectAll(".tick line").remove()},e.prototype.wideYAxisRange=function(e,t,a){var r,i,n=(t*(this.dataRangeWidingFactor-1)-e*(this.dataRangeWidingFactor-1))/2;return 0===a?a=((i=t*this.dataRangeWidingFactor)-(r=e-e*(this.dataRangeWidingFactor-1)))/2:(i=Math.ceil((t+n)/a)*a,r=Math.floor((e-n)/a)*a),e>=0&&r<0&&(r=0),{y_min:r,y_max:i}},e.prototype.tickValueFormatter=function(e,t){void 0===t&&(t=null);var a=this.panel.yAxis.format;return function(r){return ia.a.valueFormats[a](r,e,t)}},e.prototype.addStatusmapCanvas=function(){var e=this.$heatmap[0];this.width=Math.floor(this.$heatmap.width())-this.padding.right,this.height=Math.floor(this.$heatmap.height())-this.padding.bottom,this.heatmap&&this.heatmap.remove(),this.heatmap=g.select(e).insert("svg",":first-child").attr("width",this.width).attr("height",this.height),this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.chartTop=this.margin.top,this.chartBottom=this.chartTop+this.chartHeight,this.cardHSpacing=null!==this.panel.cards.cardHSpacing?this.panel.cards.cardHSpacing:2,this.cardVSpacing=null!==this.panel.cards.cardVSpacing?this.panel.cards.cardVSpacing:2,this.cardRound=null!==this.panel.cards.cardRound?this.panel.cards.cardRound:0,this.yGridSize=this.chartHeight,this.bucketMatrixPager.targets().length>0&&(this.yGridSize=Math.floor(this.chartHeight/this.bucketMatrixPager.targets().length)),this.cardHeight=this.yGridSize?this.yGridSize-this.cardVSpacing:0,this.yOffset=this.cardHeight/2,this.addYAxis(),this.yAxisWidth=this.getYAxisWidth(this.heatmap)+5,this.chartWidth=this.width-this.yAxisWidth-this.margin.right,this.xGridSize=this.chartWidth/(this.bucketMatrix.xBucketSize+1),this.cardWidth=this.xGridSize-this.cardHSpacing,this.addXAxis(),this.xAxisHeight=this.getXAxisHeight(this.heatmap),this.panel.yAxis.show||this.heatmap.select(".axis-y").selectAll("line").style("opacity",0),this.panel.xAxis.show||this.heatmap.select(".axis-x").selectAll("line").style("opacity",0)},e.prototype.addStatusmap=function(){var e=this,t=null!=this.panel.color.max?this.panel.color.max:this.bucketMatrix.maxValue,a=null!=this.panel.color.min?this.panel.color.min:this.bucketMatrix.minValue;"discrete"!==this.panel.color.mode&&(this.colorScale=this.getColorScale(t,a)),this.setOpacityScale(t),this.heatmap.selectAll(".statusmap-cards-row").data(this.bucketMatrixPager.targets()).enter().selectAll(".statustmap-card").data((function(t){return e.bucketMatrix.buckets[t]})).enter().append("rect").attr("cardId",(function(e){return e.id})).attr("xid",(function(e){return e.xid})).attr("yid",(function(e){return e.yLabel})).attr("x",this.getCardX.bind(this)).attr("width",this.getCardWidth.bind(this)).attr("y",this.getCardY.bind(this)).attr("height",this.getCardHeight.bind(this)).attr("rx",this.cardRound).attr("ry",this.cardRound).attr("class",(function(e){return e.isEmpty()?"empty-card":"bordered statusmap-card"})).style("fill",this.getCardColor.bind(this)).style("stroke",this.getCardColor.bind(this)).style("stroke-width",0).style("opacity",this.getCardOpacity.bind(this)),this.$heatmap.find(".statusmap-card + .bordered").on("mouseenter",(function(t){e.tooltip.mouseOverBucket=!0,e.highlightCard(t)})).on("mouseleave",(function(t){e.tooltip.mouseOverBucket=!1,e.resetCardHighLight(t)})),this._renderAnnotations(),this.ctrl.events.emit(i.renderComplete,{chartWidth:this.chartWidth})},e.prototype.highlightCard=function(e){var t=g.select(e.target).style("fill"),a=g.color(t).darker(2),r=g.color(t).brighter(4),i=g.select(e.target);this.tooltip.originalFillColor=t,i.style("fill",a.toString()).style("stroke",r.toString()).style("stroke-width",1)},e.prototype.resetCardHighLight=function(e){g.select(e.target).style("fill",this.tooltip.originalFillColor).style("stroke",this.tooltip.originalFillColor).style("stroke-width",0)},e.prototype.getColorScale=function(e,t){void 0===t&&(t=0);var a=f.a.find(this.ctrl.colorSchemes,{value:this.panel.color.colorScheme}),r=$t[a.value],i="always"===a.invert||"dark"===a.invert&&!qt.contextSrv.user.lightTheme;e===t&&(e=t+1);var n=i?e:t,o=i?t:e;return g.scaleSequential(r).domain([n,o])},e.prototype.setOpacityScale=function(e){"linear"===this.panel.color.colorScale?this.opacityScale=g.scaleLinear().domain([0,e]).range([0,1]):"sqrt"===this.panel.color.colorScale&&(this.opacityScale=g.scalePow().exponent(this.panel.color.exponent).domain([0,e]).range([0,1]))},e.prototype.getCardX=function(e){var t=e.relTo/this.bucketMatrix.rangeMs*this.chartWidth-this.cardWidth/2;return t-this.cardWidth/2<0?this.yAxisWidth+this.cardHSpacing/2:this.yAxisWidth+t-this.cardWidth/2},e.prototype.getCardWidth=function(e){var t,a=e.relTo/this.bucketMatrix.rangeMs*this.chartWidth-this.cardWidth/2;if(a<this.cardWidth/2){var r=a-this.cardHSpacing/2+this.cardWidth/2;t=r>0?r:0}else t=this.chartWidth-a<this.cardWidth/2?this.cardWidth/2+(this.chartWidth-a-this.cardHSpacing/2):this.cardWidth;return t=Math.max(t,5),0===this.cardHSpacing&&(t+=1),t},e.prototype.getCardY=function(e){return this.yScale(e.yLabel)+this.chartTop-this.cardHeight-this.cardVSpacing/2},e.prototype.getCardHeight=function(e){var t=this.yScale(e.yLabel),a=t+this.chartTop-this.cardHeight-this.cardVSpacing/2,r=this.cardHeight;return a<this.chartTop?r=t-this.cardVSpacing/2:(t>this.chartBottom||a+this.cardHeight>this.chartBottom)&&(r=this.chartBottom-a),r=Math.min(r,this.chartHeight),r=Math.max(r,5),0===this.cardVSpacing&&(r+=1),r},e.prototype.getCardColor=function(e){return"opacity"===this.panel.color.mode?this.panel.color.cardColor:"spectrum"===this.panel.color.mode?e.value||"as zero"!==this.panel.nullPointMode?this.colorScale(e.value):this.colorScale(0):"discrete"===this.panel.color.mode?null!==this.panel.seriesFilterIndex&&-1!==this.panel.seriesFilterIndex?this.ctrl.discreteExtraSeries.getBucketColorSingle(e.values[this.panel.seriesFilterIndex]):this.ctrl.discreteExtraSeries.getBucketColor(e.values):void 0},e.prototype.getCardOpacity=function(e){return"as empty"===this.panel.nullPointMode&&null==e.value?0:"opacity"===this.panel.color.mode?this.opacityScale(e.value):1},e.prototype.getCardStrokeWidth=function(e){return"discrete"===this.panel.color.mode?"1":"0"},e.prototype.getEventOffset=function(e){var t=this.$heatmap.offset();return{x:Math.floor(e.clientX-t.left),y:Math.floor(e.clientY-t.top)}},e.prototype.onMouseDown=function(e){var t=this,a=this.getEventOffset(e);this.selection.active=!0,this.selection.x1=a.x,this.mouseUpHandler=function(){t.onMouseUp()},m()(document).one("mouseup",this.mouseUpHandler.bind(this))},e.prototype.onMouseUp=function(){m()(document).unbind("mouseup",this.mouseUpHandler.bind(this)),this.mouseUpHandler=null,this.selection.active=!1;var e=Math.abs(this.selection.x2-this.selection.x1);if(this.selection.x2>=0&&e>2){var t=this.xScale.invert(Math.min(this.selection.x1,this.selection.x2)-this.yAxisWidth-this.xGridSize/2),a=this.xScale.invert(Math.max(this.selection.x1,this.selection.x2)-this.yAxisWidth-this.xGridSize/2);this.ctrl.timeSrv.setTime({from:ma.a.utc(t),to:ma.a.utc(a)})}this.clearSelection()},e.prototype.onMouseLeave=function(e){qt.appEvents.emit(i.graphHoverClear),this.clearCrosshair(),this.annotationTooltip.destroy()},e.prototype.onMouseMove=function(e){if(this.heatmap){var t=this.getEventOffset(e);this.selection.active?(this.clearCrosshair(),this.tooltip.destroy(),this.annotationTooltip.destroy(),this.selection.x2=this.limitSelection(e.offsetX),this.drawSelection(this.selection.x1,this.selection.x2)):(this.emitGraphHoverEvent(e),this.drawCrosshair(t.x),this.tooltip.show(e),this.annotationTooltip.show(e))}},e.prototype.onMouseClick=function(e){this.ctrl.panel.tooltip.freezeOnClick&&(this.tooltip.showFrozen(e),this.tooltip.destroy())},e.prototype.getEventPos=function(e,t){var a=this.xScale.invert(t.x-this.yAxisWidth).valueOf(),r=this.yScale.invert(t.y-this.chartTop);return{pageX:e.pageX,pageY:e.pageY,x:a,x1:a,y:r,y1:r,panelRelY:null,offset:t}},e.prototype.emitGraphHoverEvent=function(e){var t=this.xScale.invert(e.offsetX-this.yAxisWidth-this.xGridSize/2).valueOf(),a=this.yScale(e.offsetY),r={pageX:e.pageX,pageY:e.pageY,x:t,x1:t,y:a,y1:a,panelRelY:0};r.panelRelY=Math.max(e.offsetY/this.height,.001),qt.appEvents.emit(i.graphHover,{pos:r,panel:this.panel})},e.prototype.limitSelection=function(e){return e=Math.max(e,this.yAxisWidth),e=Math.min(e,this.chartWidth+this.yAxisWidth)},e.prototype.drawSelection=function(e,t){if(this.heatmap){this.heatmap.selectAll(".status-heatmap-selection").remove();var a=Math.min(e,t),r=Math.abs(e-t);r>2&&this.heatmap.append("rect").attr("class","status-heatmap-selection").attr("x",a).attr("width",r).attr("y",this.chartTop).attr("height",this.chartHeight)}},e.prototype.clearSelection=function(){this.selection.x1=-1,this.selection.x2=-1,this.heatmap&&this.heatmap.selectAll(".status-heatmap-selection").remove()},e.prototype.drawCrosshair=function(e){if(this.heatmap){this.heatmap.selectAll(".status-heatmap-crosshair").remove();var t=e;t=Math.max(t,this.yAxisWidth),t=Math.min(t,this.chartWidth+this.yAxisWidth),this.heatmap.append("g").attr("class","status-heatmap-crosshair").attr("transform","translate("+t+",0)").append("line").attr("x1",1).attr("y1",this.chartTop).attr("x2",1).attr("y2",this.chartBottom).attr("stroke-width",1)}},e.prototype.drawSharedCrosshair=function(e){if(this.heatmap&&0!==this.ctrl.dashboard.graphTooltip){var t=this.xScale(e.x)+this.yAxisWidth;this.drawCrosshair(t)}},e.prototype.clearCrosshair=function(){this.heatmap&&this.heatmap.selectAll(".status-heatmap-crosshair").remove()},e.prototype.render=function(){this.panel=this.ctrl.panel,this.timeRange=this.ctrl.range,this.bucketMatrix=this.ctrl.bucketMatrix,this.bucketMatrixPager=this.ctrl.bucketMatrixPager,this.bucketMatrix&&this.setElementHeight()&&(this.addStatusmapCanvas(),this.bucketMatrix.noDatapoints||(this.addStatusmap(),this.scope.yAxisWidth=this.yAxisWidth,this.scope.xAxisHeight=this.xAxisHeight,this.scope.chartHeight=this.chartHeight,this.scope.chartWidth=this.chartWidth,this.scope.chartTop=this.chartTop))},e.prototype._renderAnnotations=function(){var e=this;if(this.ctrl.annotations&&0!==this.ctrl.annotations.length&&this.heatmap){var t=f.a.map(this.ctrl.annotations,(function(t,a){return{x:Math.floor(e.yAxisWidth+e.xScale(t.time)),id:a,anno:t.source}})),a=this.heatmap.append("g").attr("class","statusmap-annotations").attr("transform","translate(0.5,0)").selectAll(".statusmap-annotations").data(t).enter().append("g");a.append("line").attr("x1",(function(e){return e.x})).attr("y1",this.chartTop).attr("x2",(function(e){return e.x})).attr("y2",this.chartBottom).style("stroke",(function(e){return e.anno.iconColor})).style("stroke-width",1).style("stroke-dasharray","3,3"),a.append("polygon").attr("points",(function(t){return[[t.x,e.chartBottom+1],[t.x-5,e.chartBottom+6],[t.x+5,e.chartBottom+6]].join(" ")})).style("stroke-width",0).style("fill",(function(e){return e.anno.iconColor})),a.append("rect").attr("x",(function(e){return e.x-5})).attr("width",10).attr("y",this.chartBottom+1).attr("height",5).attr("class","statusmap-annotation-tick").attr("annoId",(function(e){return e.id})).style("opacity",0),this.$heatmap.find(".statusmap-annotation-tick").on("mouseenter",(function(t){e.annotationTooltip.mouseOverAnnotationTick=!0})).on("mouseleave",(function(t){e.annotationTooltip.mouseOverAnnotationTick=!1}))}},e}();var ka=function(){function e(e){this.scope=e,this.panelCtrl=e.ctrl,this.panel=e.ctrl.panel}return e.prototype.convertValuesToTooltips=function(e){for(var t=this.panel.color.thresholds,a=[],r=0;r<t.length;r++)for(var i=0;i<e.length;i++)this.isEqualValues(e[i],t[r].value)&&a.push({tooltip:t[r].tooltip?t[r].tooltip:e[i],color:t[r].color});return a},e.prototype.convertValueToTooltips=function(e){for(var t=this.panel.color.thresholds,a=[],r=0;r<t.length;r++)this.isEqualValues(e,t[r].value)&&a.push({tooltip:t[r].tooltip?t[r].tooltip:e,color:t[r].color});return a},e.prototype.getNotMatchedValues=function(e){for(var t=[],a=0;a<e.length;a++)this.getMatchedThreshold(e[a])||t.push(e[a]);return t},e.prototype.getNotColoredValues=function(e){for(var t=[],a=0;a<e.length;a++){var r=this.getMatchedThreshold(e[a]);r&&r.color&&""!==r.color||t.push(e[a])}return t},e.prototype.getDiscreteColor=function(e){var t=this.getThreshold(e).color;return t&&""!==t?t:"rgba(0,0,0,1)"},e.prototype.getBucketColorSingle=function(e){if(null==e)return"rgba(0,0,0,1)";var t=this.getMatchedThreshold(e);return t&&t.color&&""!==t.color?t.color:"rgba(0,0,0,1)"},e.prototype.getBucketColor=function(e){var t=this.panel.color.thresholds;if(!e||0===e.length)return this.getMatchedThreshold(null).color;if(1===e.length){var a=this.getMatchedThreshold(e[0]);return a&&a.color&&""!==a.color?a.color:"rgba(0,0,0,1)"}for(var r=!0,i=0;i<e.length;i++)null!=e[i]&&(r=!1);if(r)return this.getMatchedThreshold(null).color;for(var n=0;n<t.length;n++)for(i=0;i<e.length;i++)if(this.isEqualValues(e[i],t[n].value))return this.getDiscreteColor(n);return"rgba(0,0,0,1)"},e.prototype.updateCardsValuesHasColorInfoSingle=function(){var e=this;this.panelCtrl.bucketMatrix&&(this.panelCtrl.bucketMatrix.noColorDefined=!1,this.panelCtrl.bucketMatrix.targets.map((function(t){e.panelCtrl.bucketMatrix.buckets[t].map((function(t){t.noColorDefined=!1;var a=e.getMatchedThreshold(t.value);a&&a.color&&""!==a.color||(t.noColorDefined=!0,e.panelCtrl.bucketMatrix.noColorDefined=!0)}))})))},e.prototype.updateCardsValuesHasColorInfo=function(){var e=this;this.panelCtrl.bucketMatrix&&(this.panelCtrl.bucketMatrix.noColorDefined=!1,this.panelCtrl.bucketMatrix.targets.map((function(t){e.panelCtrl.bucketMatrix.buckets[t].map((function(t){t.noColorDefined=!1;for(var a=0;a<t.values.length;a++){var r=e.getMatchedThreshold(t.values[a]);if(!r||!r.color||""===r.color){t.noColorDefined=!0,e.panelCtrl.bucketMatrix.noColorDefined=!0;break}}}))})))},e.prototype.getMatchedThreshold=function(e){if(null==e){if("as empty"===this.panel.nullPointMode)return{color:"rgba(0,0,0,0)",value:"null",tooltip:"null"};e=0}for(var t=this.panel.color.thresholds,a=0;a<t.length;a++)if(this.isEqualValues(e,t[a].value))return t[a];return null},e.prototype.getThreshold=function(e){var t=this.panel.color.thresholds;return e<0||e>=t.length==null?{color:"rgba(0,0,0,0)",value:"null",tooltip:"null"}:t[e]},e.prototype.isEqualValues=function(e,t){return e==t},e.prototype.roundIntervalCeil=function(e){switch(!0){case e<=10:return 10;case e<=20:return 20;case e<=50:return 50;case e<=100:return 100;case e<=200:return 200;case e<=500:return 500;case e<=1e3:return 1e3;case e<=2e3:return 2e3;case e<=5e3:return 5e3;case e<=1e4:return 1e4;case e<=15e3:return 15e3;case e<=2e4:return 2e4;case e<=3e4:return 3e4;case e<=6e4:return 6e4;case e<=12e4:return 12e4;case e<=3e5:return 3e5;case e<=6e5:return 6e5;case e<=9e5:return 9e5;case e<=12e5:return 12e5;case e<=18e5:return 18e5;case e<=36e5:return 36e5;case e<=72e5:return 72e5;case e<=108e5:return 108e5;case e<=216e5:return 216e5;case e<=432e5:return 432e5;case e<=864e5:return 864e5;case e<=6048e5:return 6048e5;case e<=2592e6:return 2592e6;default:return 31536e6}},e}();a.d(t,"StatusHeatmapCtrl",(function(){return Aa})),a.d(t,"PanelCtrl",(function(){return Aa}));var Sa=[{name:"Spectral",value:"interpolateSpectral",invert:"always"},{name:"RdYlGn",value:"interpolateRdYlGn",invert:"always"},{name:"GnYlRd",value:"interpolateGnYlRd",invert:"always"},{name:"Blues",value:"interpolateBlues",invert:"dark"},{name:"Greens",value:"interpolateGreens",invert:"dark"},{name:"Greys",value:"interpolateGreys",invert:"dark"},{name:"Oranges",value:"interpolateOranges",invert:"dark"},{name:"Purples",value:"interpolatePurples",invert:"dark"},{name:"Reds",value:"interpolateReds",invert:"dark"},{name:"BuGn",value:"interpolateBuGn",invert:"dark"},{name:"BuPu",value:"interpolateBuPu",invert:"dark"},{name:"GnBu",value:"interpolateGnBu",invert:"dark"},{name:"OrRd",value:"interpolateOrRd",invert:"dark"},{name:"PuBuGn",value:"interpolatePuBuGn",invert:"dark"},{name:"PuBu",value:"interpolatePuBu",invert:"dark"},{name:"PuRd",value:"interpolatePuRd",invert:"dark"},{name:"RdPu",value:"interpolateRdPu",invert:"dark"},{name:"YlGnBu",value:"interpolateYlGnBu",invert:"dark"},{name:"YlGn",value:"interpolateYlGn",invert:"dark"},{name:"YlOrBr",value:"interpolateYlOrBr",invert:"dark"},{name:"YlOrRd",value:"interpolateYlOrRd",invert:"dark"}],Ca=["opacity","spectrum","discrete"],Pa=["linear","sqrt"];Object(la.loadPluginCss)({dark:"plugins/flant-statusmap-panel/styles/dark.css",light:"plugins/flant-statusmap-panel/styles/light.css"});var Aa=function(e){function t(t,a,r){var n=e.call(this,t,a)||this;n.annotationsSrv=r,n.opacityScales=[],n.colorModes=[],n.colorSchemes=[],n.dataWarnings={},n.annotations=[],n.pageSizeViewer=15,n.panelDefaults={datasource:null,color:{mode:"spectrum",cardColor:"#b4ff00",colorScale:"sqrt",exponent:.5,colorScheme:"interpolateGnYlRd",defaultColor:"#757575",thresholds:[]},cards:{cardMinWidth:5,cardVSpacing:2,cardHSpacing:2,cardRound:null},xAxis:{show:!0},yAxis:{show:!0,minWidth:-1,maxWidth:-1},tooltip:{show:!0,freezeOnClick:!0,showItems:!1,items:[],showExtraInfo:!1,extraInfo:""},legend:{show:!0},yLabel:{usingSplitLabel:!1,delimiter:"",labelTemplate:""},nullPointMode:"as empty",yAxisSort:"metrics",highlightCards:!0,useMax:!0,seriesFilterIndex:-1,usingPagination:!1,pageSize:15,hideBranding:!1},"function"==typeof ia.a.intervalToMs&&(ia.a.interval_to_ms=ia.a.intervalToMs),da(n.panel),f.a.defaultsDeep(n.panel,n.panelDefaults),n.bucketMatrix=new ua,n.bucketMatrixPager=new pa,n.bucketMatrixPager.setEnable(n.panel.usingPagination),n.bucketMatrixPager.setDefaultPageSize(n.panel.pageSize),n.bucketMatrixPager.setPageSize(n.panel.pageSize),t.pager=n.bucketMatrixPager,n.opacityScales=Pa,n.colorModes=Ca,n.colorSchemes=Sa,n.graph={chartWidth:-1},n.multipleValues=!1,n.noColorDefined=!1,n.discreteExtraSeries=new ka(t),n.dataWarnings={noColorDefined:{title:"Data has value with undefined color",tip:"Check metric values, color values or define a new color"},multipleValues:{title:"Data has multiple values for one target",tip:'Change targets definitions or set "use max value"'},noDatapoints:{title:"No data points",tip:"No datapoints returned from data query"}},n.annotations=[],n.annotationsSrv=r,n.events.on(d.PanelEvents.render,n.onRender.bind(n)),n.events.on(d.PanelEvents.dataError,n.onDataError.bind(n)),n.events.on(d.PanelEvents.editModeInitialized,n.onInitEditMode.bind(n)),n.events.on(d.PanelEvents.refresh,n.postRefresh.bind(n)),n.events.on(i.renderComplete,n.onRenderComplete.bind(n)),n.onCardColorChange=n.onCardColorChange.bind(n);var o=parseInt(l.config.buildInfo.version.split(".",2)[0],10);return o>=7?(n.useDataFrames=!0,n.events.on(d.PanelEvents.dataFramesReceived,n.onDataFramesReceived.bind(n)),n.events.on(d.PanelEvents.dataSnapshotLoad,n.onDataFramesReceived.bind(n)),n.processor=new p(n.panel,o)):(n.events.on(d.PanelEvents.dataReceived,n.onDataReceived.bind(n)),n.events.on(d.PanelEvents.dataSnapshotLoad,n.onDataReceived.bind(n))),n}return t.$inject=["$scope","$injector","annotationsSrv"],function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}(t,e),t.prototype.onRenderComplete=function(e){this.graph.chartWidth=e.chartWidth,this.renderingCompleted()},t.prototype.changeDefaultPaginationSize=function(e){this.bucketMatrixPager.setDefaultPageSize(e),this.bucketMatrixPager.setPageSize(e),this.pageSizeViewer=e,this.render(),this.refresh()},t.prototype.onChangePageSize=function(){this.pageSizeViewer<=0&&(this.pageSizeViewer=this.bucketMatrixPager.defaultPageSize),this.bucketMatrixPager.setPageSize(this.pageSizeViewer),this.bucketMatrixPager.setCurrent(0),this.render(),this.refresh()},t.prototype.onPrevPage=function(){this.bucketMatrixPager.switchToPrev(),this.render()},t.prototype.onNextPage=function(){this.bucketMatrixPager.switchToNext(),this.render()},t.prototype.getChartWidth=function(){if(this.graph.chartWidth>0)return this.graph.chartWidth;var e=$(window).width(),t=this.panel.gridPos.w/24,a=Math.ceil(e*t);return f.a.max([a-200,a/2])},t.prototype.updateTimeRange=function(t){var a=e.prototype.updateTimeRange.call(this,t);return this.calculateInterval(),a},t.prototype.calculateInterval=function(){var e,t=this.getChartWidth(),a=this.panel.cards.cardMinWidth,r=this.panel.cards.cardHSpacing,i=Math.ceil((t-a)/(a+r)),n=this.range.to.valueOf()-this.range.from.valueOf();e=this.discreteExtraSeries.roundIntervalCeil(n/i);var o=1,c=this.panel.interval;c?c=this.templateSrv.replace(c,this.panel.scopedVars):this.datasource&&this.datasource.interval&&(c=this.datasource.interval),c&&(">"===c[0]&&(c=c.slice(1)),o=ia.a.interval_to_ms(c)),o>e&&(e=o);var s=ia.a.secondsToHms(e/1e3);this.intervalMs=e,this.interval=s},t.prototype.issueQueries=function(e){var t=this;return this.range||this.updateTimeRange(e),this.annotationsPromise=this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}),void 0!==this.annotationsSrv.datasourcePromises?this.annotationsSrv.datasourcePromises.then((function(a){return t.issueQueriesWithInterval(e,t.interval)})):this.issueQueriesWithInterval(e,this.interval)},t.prototype.issueQueriesWithInterval=function(t,a){var r=this.panel.interval;this.panel.interval=a;var i=e.prototype.issueQueries.call(this,t);return this.panel.interval=r,i},t.prototype.onDataFramesReceived=function(e){var t=this.processor.getSeriesList({dataList:e,range:this.range});this.onDataReceived(t)},t.prototype.onDataReceived=function(e){var t=this;this.data=e,this.intervalMs||this.calculateInterval();var a=this.convertDataToBuckets(e,this.range.from.valueOf(),this.range.to.valueOf(),this.intervalMs,!0);this.bucketMatrix=a,this.bucketMatrixPager.bucketMatrix=a,a.targets.length!==this.bucketMatrix.targets.length&&this.bucketMatrixPager.setCurrent(0),this.noDatapoints=this.bucketMatrix.noDatapoints,this.annotationsPromise?this.annotationsPromise.then((function(e){t.loading=!1,e.annotations&&e.annotations.length>0?t.annotations=e.annotations:t.annotations=[],t.render()}),(function(){t.loading=!1,t.annotations=[],t.render()})):(this.loading=!1,this.annotations=[],this.render())},t.prototype.onInitEditMode=function(){this.addEditorTab("Options",oa,2),this.addEditorTab("Tooltip",fa,3),this.addEditorTab("About","public/plugins/flant-statusmap-panel/partials/about_editor.html",4),this.unitFormats=ia.a.getUnitFormats()},t.prototype.onRender=function(){this.range&&this.data?(this.multipleValues=!1,this.panel.useMax||this.bucketMatrix&&(this.multipleValues=this.bucketMatrix.multipleValues),this.noColorDefined=!1,"discrete"===this.panel.color.mode&&(-1===this.panel.seriesFilterIndex?this.discreteExtraSeries.updateCardsValuesHasColorInfo():this.discreteExtraSeries.updateCardsValuesHasColorInfoSingle(),this.bucketMatrix&&(this.noColorDefined=this.bucketMatrix.noColorDefined)),this.noDatapoints=!1,this.bucketMatrix&&(this.noDatapoints=this.bucketMatrix.noDatapoints)):this.noDatapoints=!0},t.prototype.onCardColorChange=function(e){this.panel.color.cardColor=e,this.render()},t.prototype.onDataError=function(){this.data=[],this.annotations=[],this.render()},t.prototype.postRefresh=function(){this.noColorDefined=!1},t.prototype.link=function(e,t,a,r){!function(e,t,a,r){new Ma(e,t,a,r)}(e,t,a,r)},t.prototype.retrieveTimeVar=function(){var e=this.timeSrv.timeRangeForUrl();return"from="+e.from+"&to="+e.to},t.prototype.convertDataToBuckets=function(e,t,a,r,i){var n=this,o=new ua;if(o.rangeMs=a-t,o.intervalMs=r,!e||0===e.length)return o.targets=["1.0","0.0","-1.0"],o.buckets["1.0"]=[],o.buckets["0.0"]=[],o.buckets["-1.0"]=[],o.xBucketSize=42,o.noDatapoints=!0,o;var c={},s={};e.map((function(e,t){var a=e.target;if(n.panel.yLabel.usingSplitLabel&&""!==n.panel.yLabel.delimiter){var r=e.target.split(n.panel.yLabel.delimiter),i=[];for(var o in i.__y_label={value:a},r)i["__y_label_"+o]={value:r[o]};""!==n.panel.yLabel.labelTemplate&&(a=n.templateSrv.replace(n.panel.yLabel.labelTemplate,i)),s[a]=r}c.hasOwnProperty(a)||(c[a]=[]),c[a].push(t)}));var d=f.a.keys(c),l={};return d.map((function(a){for(var i=[],n=0;n<c[a].length;n++){var o=e[c[a][n]];f.a.map(o.datapoints,(function(e,a){i.push(e[1]-t)}))}i=f.a.uniq(i),l[a]=[];for(var s=i.length-1;s>=0;s--){var d=i[s],h=0;if(d<0)h=d-r;else if(s-1>=0){h=i[s-1]+1;var u=d-r;h<u&&(h=u)}l[a][d]=[h,d]}})),d.map((function(e){var n=[],c=a-t;if(i){var f=new ha;f.yLabel=e,f.relTo=c,f.relFrom=c,f.values=[],f.mostRecent=!0,l[e].hasOwnProperty(c)&&(f.relFrom=l[e][c][0],c=f.relFrom),f.to=f.relTo+t,f.from=f.relFrom+t,n.push(f)}for(var d=0,h=0;h>=0;){var u=new ha;u.yLabel=e,u.pLabels=s[e],u.relTo=c-d*r,u.relFrom=c-(d+1)*r,u.to=u.relTo+t,u.from=u.relFrom+t,u.values=[],h=u.relFrom,n.push(u),d++}n.map((function(e,t){e.xid=t})),o.buckets[e]=n})),o.minValue=Number.MAX_VALUE,o.maxValue=Number.MIN_SAFE_INTEGER,d.map((function(t){c[t].map((function(a){e[a].datapoints.map((function(e){for(var a=0;a<o.buckets[t].length;a++)o.buckets[t][a].belong(e[1])&&o.buckets[t][a].put(e[0])}))})),o.buckets[t].map((function(e){e.minValue=f.a.min(e.values),e.maxValue=f.a.max(e.values),e.minValue<o.minValue&&(o.minValue=e.minValue),e.maxValue>o.maxValue&&(o.maxValue=e.maxValue),e.value=e.maxValue,e.values.length>1&&(o.multipleValues=!0,e.multipleValues=!0,e.value=-1!==n.panel.seriesFilterIndex?e.values[n.panel.seriesFilterIndex]:e.maxValue)}))})),o.xBucketSize=Number.MIN_SAFE_INTEGER,d.map((function(e){var t=o.buckets[e].length;t>o.xBucketSize&&(o.xBucketSize=t)})),o.targets=d,o.pLabels=s,o},t.templateUrl="module.html",t}(la.MetricsPanelCtrl)}])}));
//# sourceMappingURL=module.js.map